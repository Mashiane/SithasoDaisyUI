
/* sithasodaisysupabase */
function banano_sithasodaisysupabase_sduisupabase() {var _B=this;_B._db_bool="BOOL";_B._db_int="INT";_B._db_string="STRING";_B._db_real="REAL";_B._db_blob="BLOB";_B._db_float="FLOAT";_B._db_integer="INTEGER";_B._db_text="TEXT";_B._db_double="DOUBLE";_B._mcallback={};_B._wherefield={};_B._ops=[];_B._orderbyl={};_B._flds=[];_B._rowcount=0;_B._lastposition=0;_B._record={};_B._result=[];_B._success=false;_B._client=null;_B._mevent="";_B._stablename="";_B._tag={};_B._schema={};_B._primarykey="";_B._displayfield="";_B._singular="";_B._plural="";_B._displayvalue="";_B._supabase=null;_B._errormessage="";_B._profile={};_B.initialize=function(_module,_eventname,_url,_sapikey) {_B._mcallback=_module;_B._wherefield={};_B._ops.length=0;_B._orderbyl={};_B._flds.length=0;_B._record={};_B._lastposition=-1;_B._result.length=0;_B._mevent=_eventname;_B._primarykey="id";_B._schema={};_B.schemaaddtext1("id",_B);_B._supabase=supabase;_B._client=_B._supabase["createClient"](_url,_sapikey);return _B;};_B.settablename=function(_s) {_B._stablename=_s;};_B.schemaaddblob=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_blob;}return _B;};_B.schemaaddblob1=function(_b) {_B._schema[_b]=_B._db_blob;return _B;};_B.schemaaddboolean=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_bool;}return _B;};_B.schemaaddboolean1=function(_b) {_B._schema[_b]=_B._db_bool;return _B;};_B.schemaadddouble1=function(_b) {_B._schema[_b]=_B._db_double;return _B;};_B.schemaadddouble=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_double;}return _B;};_B.schemaaddfloat1=function(_b) {_B._schema[_b]=_B._db_float;return _B;};_B.schemaaddfloat=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_float;}return _B;};_B.schemaaddtext1=function(_b) {_B._schema[_b]=_B._db_string;return _B;};_B.schemaaddtext=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_string;}return _B;};_B.schemaaddint1=function(_b) {_B._schema[_b]=_B._db_int;return _B;};_B.schemaaddint=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_int;}return _B;};_B.setfield=function(_fldname,_fldvalue) {_B._record[_fldname]=_fldvalue;return _B;};_B.recordfrommap=function(_sm) {var _k,_v;_B._record={};var _kKeys = Object.keys(_sm);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_sm[_k];_B._record[_k]=_v;}};_B.firstrecord=function() {var _rec;_rec=_B._result[0];return _rec;};_B.clear_where=function() {_B._wherefield={};_B._ops.length=0;_B._orderbyl={};_B._flds.length=0;return _B;};_B.add_field=function(_fld) {_B._flds.push(_fld);return _B;};_B.add_fields=function(_fields) {var _fld;for (var _fldindex=0;_fldindex<_fields.length;_fldindex++) {_fld=_fields[_fldindex];_B.add_field(_fld,_B);}return _B;};_B.add_where=function(_fld,_operator,_value) {switch ("" + _operator) {case "" + "=":_operator="eq";break;case "" + "<>":_operator="neq";break;case "" + ">":_operator="gt";break;case "" + ">=":_operator="gte";break;case "" + "<":_operator="lt";break;case "" + "<=":_operator="lte";break;}_B._wherefield[_fld]=_value;_B._ops.push(_operator);return _B;};_B.add_where_string=function(_fld,_operator,_value) {_B.add_where(_fld,_operator,"'" + _value + "'",_B);return _B;};_B.add_order_by=function(_fld,_ascending) {_B._orderbyl[_fld]=_ascending;return _B;};_B.nextrow=function() {var _realsize;_B._lastposition=_B._lastposition+1;_realsize=_B._rowcount-1;if (_B._lastposition>_realsize) {return false;} else {_B.setposition(_B._lastposition,_B);return true;}};_B.setrecord=function(_rec) {var _k,_fldpos,_v,_dt;_B._record={};var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_fldpos=(_k in _B._schema);if (_fldpos==false) {delete _rec[_k];}}var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_rec[_k]===undefined? "":_rec[_k];_dt=_B._schema[_k];switch ("" + _dt) {case "" + _B._db_bool:_v=_banano_sithasodaisy_sduishared.cbool(_v);break;case "" + _B._db_int:_v=_banano_sithasodaisy_sduishared.cint(_v);break;case "" + _B._db_string:_v=_banano_sithasodaisy_sduishared.cstr(_v);break;case "" + _B._db_real:_v=_banano_sithasodaisy_sduishared.cdbl(_v);break;case "" + _B._db_blob:break;case "" + _B._db_float:_v=_banano_sithasodaisy_sduishared.cdbl(_v);break;case "" + _B._db_integer:_v=_banano_sithasodaisy_sduishared.cint(_v);break;case "" + _B._db_text:_v=_banano_sithasodaisy_sduishared.cstr(_v);break;case "" + _B._db_double:_v=_banano_sithasodaisy_sduishared.cdbl(_v);break;}_B._record[_k]=_v;}_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];};_B.preparerecord=function() {_B._record={};};_B.setposition=function(_pos) {if (_B._result.length>_pos) {_B._record=_B._result[_pos];_B._lastposition=_pos;} else {_B._lastposition=-1;_B._record={};}};_B.getposition=function() {return _B._lastposition;};_B.getint=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return 0;}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? 0:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cint(_obj);return _obj;} else {return 0;}};_B.getlong=function(_fld) {return _B.getint(_fld,_B);};_B.getstring=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return "";}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? "":_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cstr(_obj);return _obj;} else {return "";}};_B.getimage=function(_fld) {var _simage;_simage=_B.getstring(_fld,_B);if (_simage=="") { return "./assets/placeholderimg.jpg";}return _simage;};_B.getboolean=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return false;}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? false:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.parsebool(_obj);return _obj;} else {return false;}};_B.getdouble=function(_fld) {var _obj;_fld=_fld.toLowerCase();if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? 0:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cdbl(_obj);return _obj;} else {return 0;}};_B.getrecord=function(_pos) {var _rec;_rec=_B._result[_pos];return _rec;};_B.movefirst=function() {_B.setposition(0,_B);};_B.movelast=function() {_B.setposition(_B._rowcount-1,_B);};_B.moveprevious=function() {_B._lastposition=_B._lastposition-1;if (_B._lastposition<0) {_B._lastposition=0;}_B.setposition(_B._lastposition,_B);};_B.movenext=function() {_B._lastposition=_B._lastposition+1;if (_B._lastposition>_B._rowcount) {_B._lastposition=_B._rowcount-1;}_B.setposition(_B._lastposition,_B);};_B.assignrealrecord=function(_dbrecord) {var _k,_v;_B._record={};var _kKeys = Object.keys(_B._schema);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_dbrecord[_k];_B._record[_k]=_v;}_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];};_B.select_all=async function() {var _sflds,_tclient,_out,_k,_v,_sopt;if (Object.keys(_B._schema).length==0) {throw "SDUISupaBase.SELECT_ALL. Please execute SchemaAdd?? first to define your table schema!";return null;}_B._lastposition=-1;_B._result.length=0;try {_sflds=_banano_sithasodaisy_sduishared.join(",",_B._flds);if (_sflds=="") {_sflds="*";}_tclient=_B._client["from"](_B._stablename);if (Object.keys(_B._orderbyl).length==0) {_out=await _tclient["select"](_sflds);_B._result=_out["data"];} else {_tclient=_tclient["select"](_sflds);var _kKeys = Object.keys(_B._orderbyl);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_B._orderbyl[_k];_sopt={};_sopt["ascending"]=_v;_tclient=_tclient["order"](_k,_sopt);}_out=await _tclient;_B._result=_out["data"];}} catch(err) {}_B._rowcount=_B._result.length;return _B._result;};_B.select_where=async function() {var _res,_sflds,_tclient,_i,_iwhere,_col,_val,_opr,_k,_v,_sopt,_out;if (Object.keys(_B._schema).length==0) {throw "SDUISupaBase.SELECT_ALL. Please execute SchemaAdd?? first to define your table schema!";return null;}_res=[];_res.length=0;_sflds=_banano_sithasodaisy_sduishared.join(",",_B._flds);if (_sflds=="") {_sflds="*";}_tclient=_B._client["from"](_B._stablename);_tclient=_tclient["select"](_sflds);if (Object.keys(_B._wherefield).length>0) {_i=0;_iwhere=Object.keys(_B._wherefield).length-1;for (_i=0;_i<=_iwhere;_i++) {_col=banano_getB4JKeyAt(_B._wherefield,_i);_val=banano_getB4JValueAt(_B._wherefield,_i);_opr=_B._ops[_i];_tclient=_tclient[_opr](_col,_val);}}if (Object.keys(_B._orderbyl).length>0) {var _kKeys = Object.keys(_B._orderbyl);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_B._orderbyl[_k];_sopt={};_sopt["ascending"]=_v;_tclient=_tclient["order"](_k,_sopt);}}_out=await _tclient;_res=_out["data"];return _res;};_B.create=async function() {var _tclient,_out,_status;if (Object.keys(_B._schema).length==0) {throw "SDUISupaBase.CREATE. Please execute SchemaAdd?? first to define your table schema!";return false;}try {_tclient=_B._client["from"](_B._stablename);_out=await _tclient["insert"](_B._record);_status=_out["status"];_status=_banano_sithasodaisy_sduishared.cstr(_status);if (_status=="201") {return true;} else {return false;}} catch(err) {return false;}};_B.update=async function() {var _id,_tclient,_out,_status;if (Object.keys(_B._schema).length==0) {throw "SDUISupaBase.UPDATE. Please execute SchemaAdd?? first to define your table schema!";return null;}try {_id=_B._record["id"];_tclient=_B._client["from"](_B._stablename);delete _B._record["id"];_tclient=_tclient["update"](_B._record);_out=await _tclient["eq"](_B._primarykey,_id);_status=_out["status"];_status=_banano_sithasodaisy_sduishared.cstr(_status);if (_status=="204") {return true;} else {return false;}} catch(err) {return false;}};_B.unsubscribeall=function() {_B._client["removeAllChannels"]();};_B.subscribe=function() {var _opt,_channel,_payload,_cb;if (_B._stablename=="") {throw "SDUISupaBase.Subscribe. The tablename has not been specified!";return;}_opt={};_opt["event"]="*";_opt["schema"]="public";_opt["table"]=_B._stablename;_channel=_B._client["channel"]("*");_payload={};_cb=function(_payload) {if (typeof _B[("Changes").toLowerCase()]==="function") {return _B[("Changes").toLowerCase()](_payload,_B)};};_channel["on"]("postgres_changes",_opt,_cb);_channel["subscribe"]();};_B.changes=function(_payload) {var _seventtype,_mnew,_mold,_stable;_seventtype=_payload["eventType"];_mnew=_payload["new"];_mold=_payload["old"];_stable=_payload["table"];(function() {if (typeof _B._mcallback[("" + _B._mevent + "_changes").toLowerCase()]==="function") {var CSr = _B._mcallback[("" + _B._mevent + "_changes").toLowerCase()](_seventtype,_mnew,_mold,_stable,_B);if(CSr!=null) {return CSr}}})();};_B.delete=async function(_id) {var _tclient,_out,_status;if (Object.keys(_B._schema).length==0) {throw "SDUISupaBase.DELETE. Please execute SchemaAdd?? first to define your table schema!";return null;}try {_tclient=_B._client["from"](_B._stablename);_tclient=_tclient["delete"]();_out=await _tclient["eq"](_B._primarykey,_id);_status=_out["status"];_status=_banano_sithasodaisy_sduishared.cstr(_status);if (_status=="204") {return true;} else {return false;}} catch(err) {return false;}};_B.read=async function(_id) {var _m,_lst;if (Object.keys(_B._schema).length==0) {throw "SDUISupaBase.READ. Please execute SchemaAdd?? first to define your table schema!";return null;}_m={};_B.clear_where(_B);_B.add_where("id","=",_id,_B);_lst=await _B.select_where(_B);if (_lst.length>0) {_m=_lst[0];}_B.setrecord(_m,_B);return _m;};_B.containskey=async function(_id) {var _res;if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.ContainsKey. Please execute SchemaAdd?? first to define your table schema!";return "";}_B.clear_where(_B);_B.add_where("id","=","'" + _id + "'",_B);_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.read_by_string=async function(_fldname,_fldvalue) {var _res,_m;_B.clear_where(_B);_B.add_where_string(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);_m={};if (_res.length==0) {return _m;} else {_m=_res[0];return _m;}};_B.read_by=async function(_fldname,_fldvalue) {var _res,_m;_B.clear_where(_B);_B.add_where(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);_m={};if (_res.length==0) {return _m;} else {_m=_res[0];return _m;}};_B.existsbystring=async function(_fldname,_fldvalue) {var _res;_B.clear_where(_B);_B.add_where_string(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);console.log(_res);if (_res.length==0) {return false;} else {return true;}};_B.exists=async function(_fldname,_fldvalue) {var _res;_B.clear_where(_B);_B.add_where(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.listkeys=async function() {var _res,_rec,_k;if (Object.keys(_B._schema).length==0) {throw "SDUISupaBase.ListKeys. Please execute SchemaAdd?? first to define your table schema!";return null;}_B.clear_where(_B);_B._result=await _B.select_where(_B);_res=[];_res.length=0;for (var _recindex=0;_recindex<_B._result.length;_recindex++) {_rec=_B._result[_recindex];_k=_rec["id"]===undefined? "":_rec["id"];_k=_banano_sithasodaisy_sduishared.cstr(_k);_res.push(_k);}return _res;};_B.delete_all=async function() {var _keys,_k,_tclient;_keys=await _B.listkeys(_B);if (_keys.length==0) { return ;}for (var _kindex=0;_kindex<_keys.length;_kindex++) {_k=_keys[_kindex];_tclient=_B._client["from"](_B._stablename);_tclient=_tclient["delete"]();await _tclient["eq"](_B._primarykey,_k);}};_B.getkeyvalues=async function(_bhasnothing,_k,_v) {var _mx,_row,_f1,_f2;_mx={};if (_bhasnothing) {_mx[""]="-- Nothing Selected --";}_B.clear_where(_B);_B.add_field(_k,_B);_B.add_field(_v,_B);_B.add_order_by(_v,true,_B);_B._result=await _B.select_where(_B);for (var _rowindex=0;_rowindex<_B._result.length;_rowindex++) {_row=_B._result[_rowindex];_f1=_row[_k];_f2=_row[_v];_mx[_f1]=_f2;}return _mx;};_B.getkeyvaluesfromlist=function(_source,_bhasnothing,_k,_v) {var _mx,_row,_f1,_f2;_mx={};if (_bhasnothing) {_mx[""]="-- Nothing Selected --";}for (var _rowindex=0;_rowindex<_source.length;_rowindex++) {_row=_source[_rowindex];_f1=_row[_k];_f2=_row[_v];_mx[_f1]=_f2;}return _mx;};_B.findwhereorderby=async function(_wheremap,_whereops,_orderby) {var _s,_nl;if (Object.keys(_B._schema).length==0) {throw "SDUISupaBase.findWhereOrderBy. Please execute SchemaAdd?? first to define your table schema!";return null;}_B.clear_where(_B);_B._wherefield=_wheremap;_B._ops=_whereops;if (is.null(_orderby)==false) {for (var _sindex=0;_sindex<_orderby.length;_sindex++) {_s=_orderby[_sindex];_B.add_order_by(_s,true,_B);}}_nl=await _B.select_where(_B);return _nl;};_B.findwhere=async function(_wheremap,_whereops) {var _res;_res=await _B.findwhereorderby(_wheremap,_whereops,null,_B);return _res;};_B.deletewhere=async function(_prikey,_wheremap,_whereops) {var _recs,_rec,_pvalue;if (Object.keys(_B._schema).length==0) {throw "SDUISupaBase.deleteWhere. Please execute SchemaAdd?? first to define your table schema!";return null;}_recs=await _B.findwhere(_wheremap,_whereops,_B);for (var _recindex=0;_recindex<_recs.length;_recindex++) {_rec=_recs[_recindex];_pvalue=_rec[_prikey];await _B.delete(_pvalue,_B);}return true;};_B.nextid=function() {var _ni;_ni=_banano_sithasodaisy_sduishared.guidalpha(15);return _ni;};_B.delete_where=function() {_B.deletewhere("id",_B._wherefield,_B._ops,_B);};_B.delete_by=function(_fldname,_fldvalue) {_B.clear_where(_B);_B.add_where(_fldname,"=",_fldvalue,_B);_B.deletewhere("id",_B._wherefield,_B._ops,_B);};_B.delete_by_string=function(_fldname,_fldvalue) {_B.clear_where(_B);_B.add_where(_fldname,"=","'" + _fldvalue + "'",_B);_B.deletewhere("id",_B._wherefield,_B._ops,_B);};_B.user_signup=async function(_email,_password) {var _opt,_tauth,_out,_error;_opt={};_opt["email"]=_email;_opt["password"]=_password;_tauth=_B._client["auth"];_out=await _tauth["signUp"](_opt);_error=_out["error"];if (is.null(_error)==false) {_B._errormessage=_error["message"]===undefined? "":_error["message"];return false;} else {_B._profile=_out["data"];return true;}};_B.user_signinwithpassword=async function(_email,_password) {var _opt,_tauth,_out,_error;_opt={};_opt["email"]=_email;_opt["password"]=_password;_tauth=_B._client["auth"];_out=await _tauth["signInWithPassword"](_opt);_error=_out["error"];if (is.null(_error)==false) {_B._errormessage=_error["message"]===undefined? "":_error["message"];return false;} else {_B._profile=_out["data"];return true;}};_B.user_resetpasswordforemail=async function(_email,_redirectto) {var _opt,_tauth,_out,_error;_opt={};_opt["redirectTo"]=_redirectto;_tauth=_B._client["auth"];_out=await _tauth["resetPasswordForEmail"](_email,_opt);_error=_out["error"];if (is.null(_error)==false) {_B._errormessage=_error["message"]===undefined? "":_error["message"];return false;} else {return true;}};_B.user_signout=async function() {var _tauth;_tauth=_B._client["auth"];await _tauth["signOut"]();return true;};_B.user_getprofile=async function() {var _tauth,_out,_error;_tauth=_B._client["auth"];_out=await _tauth["getUser"]();_error=_out["error"];if (is.null(_error)==false) {_B._errormessage=_error["message"]===undefined? "":_error["message"];return false;} else {_B._profile=_out["data"]["user"];return true;}};_B.user_updateuser=async function(_email,_password) {var _opt,_tauth,_out,_error;_opt={};_opt["email"]=_email;_opt["password"]=_password;_opt["data"]=_B._record;_tauth=_B._client["auth"];_out=await _tauth["updateUser"](_opt);_error=_out["error"];if (is.null(_error)==false) {_B._errormessage=_error["message"]===undefined? "":_error["message"];return false;} else {return true;}};_B.read_id_by_string=async function(_fldname,_fldvalue) {var _rec,_sid;_rec=await _B.read_by_string(_fldname,_fldvalue,_B);_sid=_rec["id"]===undefined? "":_rec["id"];return _sid;};_B.update_by_string=async function(_fldname,_fldvalue) {var _rec,_sid,_nid;_rec=await _B.read_by_string(_fldname,_fldvalue,_B);_sid=_rec["id"]===undefined? "":_rec["id"];_B._record["id"]=_sid;_nid=await _B.update(_B);return _nid;};_B.update_by=async function(_fldname,_fldvalue) {var _rec,_sid,_nid;_rec=await _B.read_by(_fldname,_fldvalue,_B);_sid=_rec["id"]===undefined? "":_rec["id"];_B._record["id"]=_sid;_nid=await _B.update(_B);return _nid;};}