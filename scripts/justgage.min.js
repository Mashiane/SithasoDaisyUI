!function(root,factory){"function"==typeof define&&define.amd?define(["raphael"],(function(raphael){return root.JustGage=factory(raphael)})):"object"==typeof module&&module.exports?module.exports=root.JustGage=factory(require("raphael")):root.JustGage=factory(Raphael)}("undefined"!=typeof window?window:this,(function(Raphael){const JustGage=function(config){const obj=this;if(obj.events={},isUndefined(config))return console.log("* justgage: Make sure to pass options to the constructor!"),!1;if(isUndefined(config.id)){if(isUndefined(config.parentNode))return console.log("* justgage: Make sure to pass the existing element id or parentNode to the constructor."),!1;obj.node=config.parentNode}else if(obj.node=document.getElementById(config.id),!obj.node)return console.log("* justgage: No element with id : %s found",config.id),!1;const dataset=obj.node.dataset?obj.node.dataset:{},defaults=!isUndefined(config.defaults)&&config.defaults;let canvasW,canvasH,widgetW,widgetH,aspect,dx,dy,valueFontSize,valueX,valueY,labelFontSize,labelX,labelY,minFontSize,minX,minY,maxFontSize,maxX,maxY;!1!==defaults&&delete(config=extend({},config,defaults)).defaults,obj.config={id:config.id,classId:uuid(),value:kvLookup("value",config,dataset,0,"float"),defaults:kvLookup("defaults",config,dataset,0,!1),parentNode:kvLookup("parentNode",config,dataset,null),width:kvLookup("width",config,dataset,null),height:kvLookup("height",config,dataset,null),valueFontColor:kvLookup("valueFontColor",config,dataset,"#010101"),valueFontFamily:kvLookup("valueFontFamily",config,dataset,"Arial"),symbol:kvLookup("symbol",config,dataset,""),min:kvLookup("min",config,dataset,0,"float"),minTxt:kvLookup("minTxt",config,dataset,!1),max:kvLookup("max",config,dataset,100,"float"),maxTxt:kvLookup("maxTxt",config,dataset,!1),reverse:kvLookup("reverse",config,dataset,!1),humanFriendlyDecimal:kvLookup("humanFriendlyDecimal",config,dataset,0),textRenderer:kvLookup("textRenderer",config,dataset,null),onAnimationEnd:kvLookup("onAnimationEnd",config,dataset,null),gaugeWidthScale:kvLookup("gaugeWidthScale",config,dataset,1),gaugeColor:kvLookup("gaugeColor",config,dataset,"#edebeb"),label:kvLookup("label",config,dataset,""),labelFontColor:kvLookup("labelFontColor",config,dataset,"#b3b3b3"),labelFontFamily:kvLookup("labelFontFamily",config,dataset,"Arial"),shadowOpacity:kvLookup("shadowOpacity",config,dataset,.2),shadowSize:kvLookup("shadowSize",config,dataset,5),shadowVerticalOffset:kvLookup("shadowVerticalOffset",config,dataset,3),levelColors:kvLookup("levelColors",config,dataset,["#a9d70b","#f9c802","#ff0000"],"array",","),startAnimationTime:kvLookup("startAnimationTime",config,dataset,700),startAnimationType:kvLookup("startAnimationType",config,dataset,">"),refreshAnimationTime:kvLookup("refreshAnimationTime",config,dataset,700),refreshAnimationType:kvLookup("refreshAnimationType",config,dataset,">"),donutStartAngle:kvLookup("donutStartAngle",config,dataset,90),valueMinFontSize:kvLookup("valueMinFontSize",config,dataset,16),labelMinFontSize:kvLookup("labelMinFontSize",config,dataset,10),minLabelMinFontSize:kvLookup("minLabelMinFontSize",config,dataset,10),maxLabelMinFontSize:kvLookup("maxLabelMinFontSize",config,dataset,10),hideValue:kvLookup("hideValue",config,dataset,!1),hideMinMax:kvLookup("hideMinMax",config,dataset,!1),showInnerShadow:kvLookup("showInnerShadow",config,dataset,!1),humanFriendly:kvLookup("humanFriendly",config,dataset,!1),noGradient:kvLookup("noGradient",config,dataset,!1),donut:kvLookup("donut",config,dataset,!1),differential:kvLookup("differential",config,dataset,!1),relativeGaugeSize:kvLookup("relativeGaugeSize",config,dataset,!1),counter:kvLookup("counter",config,dataset,!1),decimals:kvLookup("decimals",config,dataset,0),customSectors:kvLookup("customSectors",config,dataset,{}),formatNumber:kvLookup("formatNumber",config,dataset,!1),pointer:kvLookup("pointer",config,dataset,!1),pointerOptions:kvLookup("pointerOptions",config,dataset,{}),displayRemaining:kvLookup("displayRemaining",config,dataset,!1)},obj.config.value>obj.config.max&&(obj.config.value=obj.config.max),obj.config.value<obj.config.min&&(obj.config.value=obj.config.min),obj.originalValue=kvLookup("value",config,dataset,-1,"float"),null!==obj.config.id&&null!==document.getElementById(obj.config.id)?obj.canvas=Raphael(obj.config.id,"100%","100%"):null!==obj.config.parentNode&&(obj.canvas=Raphael(obj.config.parentNode,"100%","100%")),!0===obj.config.relativeGaugeSize?!0===obj.config.donut?(obj.canvas.setViewBox(0,0,200,200,!0),canvasW=200,canvasH=200):(obj.canvas.setViewBox(0,0,200,100,!0),canvasW=200,canvasH=100):null!==obj.config.width&&null!==obj.config.height?(canvasW=obj.config.width,canvasH=obj.config.height):null!==obj.config.parentNode?(obj.canvas.setViewBox(0,0,200,100,!0),canvasW=200,canvasH=100):(canvasW=1*getStyle(document.getElementById(obj.config.id),"width").slice(0,-2),canvasH=1*getStyle(document.getElementById(obj.config.id),"height").slice(0,-2)),!0===obj.config.donut?(canvasW>canvasH?(widgetH=canvasH,widgetW=widgetH):(widgetW=canvasW,widgetH=widgetW),dx=(canvasW-widgetW)/2,dy=(canvasH-widgetH)/2,valueFontSize=widgetH/6.4>16?widgetH/5.4:18,valueX=dx+widgetW/2,valueY=""!==obj.config.label?dy+widgetH/1.85:dy+widgetH/1.7,labelFontSize=widgetH/16>10?widgetH/16:10,labelX=dx+widgetW/2,labelY=valueY+labelFontSize,minFontSize=widgetH/16>10?widgetH/16:10,minX=dx+widgetW/10+widgetW/6.666666666666667*obj.config.gaugeWidthScale/2,minY=labelY,maxFontSize=widgetH/16>10?widgetH/16:10,maxX=dx+widgetW-widgetW/10-widgetW/6.666666666666667*obj.config.gaugeWidthScale/2,maxY=labelY):(canvasW>canvasH?(widgetH=canvasH,widgetW=2*widgetH,widgetW>canvasW&&(aspect=widgetW/canvasW,widgetW/=aspect,widgetH/=aspect)):canvasW<canvasH?(widgetW=canvasW,widgetH=widgetW/2):(widgetW=canvasW,widgetH=.5*widgetW),dx=(canvasW-widgetW)/2,dy=(canvasH-widgetH)/2,valueFontSize=widgetH/6.5>obj.config.valueMinFontSize?widgetH/6.5:obj.config.valueMinFontSize,valueX=dx+widgetW/2,valueY=dy+widgetH/1.275,labelFontSize=widgetH/16>obj.config.labelMinFontSize?widgetH/16:obj.config.labelMinFontSize,labelX=dx+widgetW/2,labelY=valueY+valueFontSize/2+5,minFontSize=widgetH/16>obj.config.minLabelMinFontSize?widgetH/16:obj.config.minLabelMinFontSize,minX=dx+widgetW/10+widgetW/6.666666666666667*obj.config.gaugeWidthScale/2,minY=labelY,maxFontSize=widgetH/16>obj.config.maxLabelMinFontSize?widgetH/16:obj.config.maxLabelMinFontSize,maxX=dx+widgetW-widgetW/10-widgetW/6.666666666666667*obj.config.gaugeWidthScale/2,maxY=labelY),obj.params={canvasW:canvasW,canvasH:canvasH,widgetW:widgetW,widgetH:widgetH,dx:dx,dy:dy,valueFontSize:valueFontSize,valueX:valueX,valueY:valueY,labelFontSize:labelFontSize,labelX:labelX,labelY:labelY,minFontSize:minFontSize,minX:minX,minY:minY,maxFontSize:maxFontSize,maxX:maxX,maxY:maxY},obj.canvas.customAttributes.pki=function(value,isDiff){let min=obj.config.min,max=obj.config.max;const w=obj.params.widgetW,h=obj.params.widgetH,dx=obj.params.dx,dy=obj.params.dy,gws=obj.config.gaugeWidthScale,donut=obj.config.donut;let alpha,Ro,Ri,Cx,Cy,So,Si,Xo,Yo,Xi,Yi,path;if(min<0&&!isDiff&&(max-=min,value-=min,min=0),donut)return alpha=(1-2*(value-min)/(max-min))*Math.PI,Ro=w/2-w/30,Ri=Ro-w/6.666666666666667*gws,Cx=w/2+dx,Cy=h/2+dy,Xo=Cx+Ro*Math.cos(alpha),Yo=Cy-Ro*Math.sin(alpha),Xi=Cx+Ri*Math.cos(alpha),Yi=Cy-Ri*Math.sin(alpha),path="M"+(Cx-Ri)+","+Cy+" ",path+="L"+(Cx-Ro)+","+Cy+" ",value-min>(max-min)/2&&(path+="A"+Ro+","+Ro+" 0 0 1 "+(Cx+Ro)+","+Cy+" "),path+="A"+Ro+","+Ro+" 0 0 1 "+Xo+","+Yo+" ",path+="L"+Xi+","+Yi+" ",value-min>(max-min)/2&&(path+="A"+Ri+","+Ri+" 0 0 0 "+(Cx+Ri)+","+Cy+" "),path+="A"+Ri+","+Ri+" 0 0 0 "+(Cx-Ri)+","+Cy+" ",path+="Z ",{path:path};if(isDiff){alpha=(1-(value-min)/(max-min))*Math.PI,Ro=w/2-w/10,Ri=Ro-w/6.666666666666667*gws,Cx=w/2+dx,Cy=h/1.25+dy,Xo=Cx+Ro*Math.cos(alpha),Yo=Cy-Ro*Math.sin(alpha),Xi=Cx+Ri*Math.cos(alpha),Yi=Cy-Ri*Math.sin(alpha);const middle=min+(max-min)/2;return So=value<middle?1:0,Si=value<middle?0:1,path="M"+Cx+","+(Cy-Ri)+" ",path+="L"+Cx+","+(Cy-Ro)+" ",path+="A"+Ro+","+Ro+" 0 0 "+Si+" "+Xo+","+Yo+" ",path+="L"+Xi+","+Yi+" ",path+="A"+Ri+","+Ri+" 0 0 "+So+" "+Cx+","+(Cy-Ri)+" ",path+="Z ",{path:path}}return alpha=(1-(value-min)/(max-min))*Math.PI,Ro=w/2-w/10,Ri=Ro-w/6.666666666666667*gws,Cx=w/2+dx,Cy=h/1.25+dy,Xo=Cx+Ro*Math.cos(alpha),Yo=Cy-Ro*Math.sin(alpha),Xi=Cx+Ri*Math.cos(alpha),Yi=Cy-Ri*Math.sin(alpha),path="M"+(Cx-Ri)+","+Cy+" ",path+="L"+(Cx-Ro)+","+Cy+" ",path+="A"+Ro+","+Ro+" 0 0 1 "+Xo+","+Yo+" ",path+="L"+Xi+","+Yi+" ",path+="A"+Ri+","+Ri+" 0 0 0 "+(Cx-Ri)+","+Cy+" ",path+="Z ",{path:path}},obj.canvas.customAttributes.ndl=function(value){const min=obj.config.min,max=obj.config.max,w=obj.params.widgetW,h=obj.params.widgetH,dx=obj.params.dx,dy=obj.params.dy,gws=obj.config.gaugeWidthScale,donut=obj.config.donut;let dlt=3.5*w/100,dlb=w/15,dw=w/100,alpha,Ro,Ri,Cy,Xo,Yo,Xi,Yi,Xc,Yc,Xz,Yz,Xa,Ya,Xb,Yb,path;return null!=obj.config.pointerOptions.toplength&&void 0!==obj.config.pointerOptions.toplength&&(dlt=obj.config.pointerOptions.toplength),null!=obj.config.pointerOptions.bottomlength&&void 0!==obj.config.pointerOptions.bottomlength&&(dlb=obj.config.pointerOptions.bottomlength),null!=obj.config.pointerOptions.bottomwidth&&void 0!==obj.config.pointerOptions.bottomwidth&&(dw=obj.config.pointerOptions.bottomwidth),donut?(alpha=(1-2*(value-min)/(max-min))*Math.PI,Ro=w/2-w/30,Ri=Ro-w/6.666666666666667*gws,Cy=h/2+dy,Xo=w/2+dx+Ro*Math.cos(alpha),Yo=h-(h-Cy)-Ro*Math.sin(alpha),Xi=w/2+dx+Ri*Math.cos(alpha),Yi=h-(h-Cy)-Ri*Math.sin(alpha),Xc=Xo+dlt*Math.cos(alpha),Yc=Yo-dlt*Math.sin(alpha),Xz=Xi-dlb*Math.cos(alpha),Yz=Yi+dlb*Math.sin(alpha),Xa=Xz+dw*Math.sin(alpha),Ya=Yz+dw*Math.cos(alpha),Xb=Xz-dw*Math.sin(alpha),Yb=Yz-dw*Math.cos(alpha),path="M"+Xa+","+Ya+" ",path+="L"+Xb+","+Yb+" ",path+="L"+Xc+","+Yc+" ",path+="Z ",{path:path}):(alpha=(1-(value-min)/(max-min))*Math.PI,Ro=w/2-w/10,Ri=Ro-w/6.666666666666667*gws,Cy=h/1.25+dy,Xo=w/2+dx+Ro*Math.cos(alpha),Yo=h-(h-Cy)-Ro*Math.sin(alpha),Xi=w/2+dx+Ri*Math.cos(alpha),Yi=h-(h-Cy)-Ri*Math.sin(alpha),Xc=Xo+dlt*Math.cos(alpha),Yc=Yo-dlt*Math.sin(alpha),Xz=Xi-dlb*Math.cos(alpha),Yz=Yi+dlb*Math.sin(alpha),Xa=Xz+dw*Math.sin(alpha),Ya=Yz+dw*Math.cos(alpha),Xb=Xz-dw*Math.sin(alpha),Yb=Yz-dw*Math.cos(alpha),path="M"+Xa+","+Ya+" ",path+="L"+Xb+","+Yb+" ",path+="L"+Xc+","+Yc+" ",path+="Z ",{path:path})},obj.gauge=obj.canvas.path().attr({stroke:"none",fill:obj.config.gaugeColor,pki:[obj.config.max]}),obj.level=obj.canvas.path().attr({stroke:"none",fill:getColor(obj.config.value,(obj.config.value-obj.config.min)/(obj.config.max-obj.config.min),obj.config.levelColors,obj.config.noGradient,obj.config.customSectors),pki:[obj.config.differential?0:obj.config.min,obj.config.differential]}),obj.config.donut&&obj.level.transform("r"+obj.config.donutStartAngle+", "+(obj.params.widgetW/2+obj.params.dx)+", "+(obj.params.widgetH/2+obj.params.dy)),obj.config.pointer&&(obj.needle=obj.canvas.path().attr({stroke:isUndefined(obj.config.pointerOptions.stroke)?"none":obj.config.pointerOptions.stroke,"stroke-width":isUndefined(obj.config.pointerOptions.stroke_width)?0:obj.config.pointerOptions.stroke_width,"stroke-linecap":isUndefined(obj.config.pointerOptions.stroke_linecap)?"square":obj.config.pointerOptions.stroke_linecap,fill:isUndefined(obj.config.pointerOptions.color)?"#000000":obj.config.pointerOptions.color,ndl:[obj.config.min]}),obj.config.donut&&obj.needle.transform("r"+obj.config.donutStartAngle+", "+(obj.params.widgetW/2+obj.params.dx)+", "+(obj.params.widgetH/2+obj.params.dy))),obj.txtValue=obj.canvas.text(obj.params.valueX,obj.params.valueY,0),obj.txtValue.attr({"font-size":obj.params.valueFontSize,"font-weight":"bold","font-family":obj.config.valueFontFamily,fill:obj.config.valueFontColor,"fill-opacity":"0"}),setDy(obj.txtValue,obj.params.valueFontSize,obj.params.valueY),obj.txtLabel=obj.canvas.text(obj.params.labelX,obj.params.labelY,obj.config.label),obj.txtLabel.attr({"font-size":obj.params.labelFontSize,"font-weight":"normal","font-family":obj.config.labelFontFamily,fill:obj.config.labelFontColor,"fill-opacity":"0"}),setDy(obj.txtLabel,obj.params.labelFontSize,obj.params.labelY);let min=obj.config.min;obj.config.reverse&&(min=obj.config.max),obj.txtMinimum=min,obj.config.minTxt?obj.txtMinimum=obj.config.minTxt:obj.config.humanFriendly?obj.txtMinimum=humanFriendlyNumber(min,obj.config.humanFriendlyDecimal):obj.config.formatNumber&&(obj.txtMinimum=formatNumber(min)),obj.txtMin=obj.canvas.text(obj.params.minX,obj.params.minY,obj.txtMinimum),obj.txtMin.attr({"font-size":obj.params.minFontSize,"font-weight":"normal","font-family":obj.config.labelFontFamily,fill:obj.config.labelFontColor,"fill-opacity":obj.config.hideMinMax||obj.config.donut?"0":"1"}),setDy(obj.txtMin,obj.params.minFontSize,obj.params.minY);let max=obj.config.max;obj.config.reverse&&(max=obj.config.min),obj.txtMaximum=max,obj.config.maxTxt?obj.txtMaximum=obj.config.maxTxt:obj.config.humanFriendly?obj.txtMaximum=humanFriendlyNumber(max,obj.config.humanFriendlyDecimal):obj.config.formatNumber&&(obj.txtMaximum=formatNumber(max)),obj.txtMax=obj.canvas.text(obj.params.maxX,obj.params.maxY,obj.txtMaximum),obj.txtMax.attr({"font-size":obj.params.maxFontSize,"font-weight":"normal","font-family":obj.config.labelFontFamily,fill:obj.config.labelFontColor,"fill-opacity":obj.config.hideMinMax||obj.config.donut?"0":"1"}),setDy(obj.txtMax,obj.params.maxFontSize,obj.params.maxY);const defs=obj.canvas.canvas.childNodes[1],svg="http://www.w3.org/2000/svg";if(void 0!==ie&&ie<9||(void 0!==ie?onCreateElementNsReady((function(){obj.generateShadow(svg,defs)})):obj.generateShadow(svg,defs)),obj.config.textRenderer&&!1!==obj.config.textRenderer(obj.originalValue)?obj.originalValue=obj.config.textRenderer(obj.originalValue):obj.config.humanFriendly?obj.originalValue=humanFriendlyNumber(obj.originalValue,obj.config.humanFriendlyDecimal)+obj.config.symbol:obj.config.formatNumber?obj.originalValue=formatNumber(obj.originalValue)+obj.config.symbol:obj.config.displayRemaining?obj.originalValue=(1*(obj.config.max-obj.originalValue)).toFixed(obj.config.decimals)+obj.config.symbol:obj.originalValue=(1*obj.originalValue).toFixed(obj.config.decimals)+obj.config.symbol,!0===obj.config.counter){const onFrame=function(){let currentValue=obj.level.attr("pki")[0];obj.config.reverse&&(currentValue=1*obj.config.max+1*obj.config.min-1*obj.level.attr("pki")[0]),obj.config.textRenderer&&!1!==obj.config.textRenderer(Math.floor(currentValue))?obj.txtValue.attr("text",obj.config.textRenderer(Math.floor(currentValue))):obj.config.humanFriendly?obj.txtValue.attr("text",humanFriendlyNumber(Math.floor(currentValue),obj.config.humanFriendlyDecimal)+obj.config.symbol):obj.config.formatNumber?obj.txtValue.attr("text",formatNumber(Math.floor(currentValue))+obj.config.symbol):obj.config.displayRemaining?obj.txtValue.attr("text",(1*(obj.config.max-currentValue)).toFixed(obj.config.decimals)+obj.config.symbol):obj.txtValue.attr("text",(1*currentValue).toFixed(obj.config.decimals)+obj.config.symbol),setDy(obj.txtValue,obj.params.valueFontSize,obj.params.valueY),currentValue=null},onFinish=function(){obj.txtValue.attr({text:obj.originalValue}),setDy(obj.txtValue,obj.params.valueFontSize,obj.params.valueY)};this.bindEvent("raphael.anim.finish",onFinish),this.bindEvent("raphael.anim.frame",onFrame)}else{const onStart=function(){obj.txtValue.attr({text:obj.originalValue}),setDy(obj.txtValue,obj.params.valueFontSize,obj.params.valueY)};this.bindEvent("raphael.anim.start",onStart)}let rvl=obj.config.value;obj.config.reverse&&(rvl=1*obj.config.max+1*obj.config.min-1*obj.config.value),obj.level.animate({pki:[rvl,obj.config.differential]},obj.config.startAnimationTime,obj.config.startAnimationType,obj.config.onAnimationEnd),obj.config.pointer&&obj.needle.animate({ndl:[rvl]},obj.config.startAnimationTime,obj.config.startAnimationType),obj.txtValue.animate({"fill-opacity":obj.config.hideValue?"0":"1"},obj.config.startAnimationTime,obj.config.startAnimationType),obj.txtLabel.animate({"fill-opacity":"1"},obj.config.startAnimationTime,obj.config.startAnimationType)};function updateProp(obj,option,val){switch(option){case"valueFontColor":if(!isHexColor(val)){console.log("* justgage: the updated valueFontColor value is not a valid hex color");break}obj.txtValue.attr({fill:val});break;case"labelFontColor":if(!isHexColor(val)){console.log("* justgage: the updated labelFontColor value is not a valid hex color");break}obj.txtMin.attr({fill:val}),obj.txtMax.attr({fill:val}),obj.txtLabel.attr({fill:val});break;default:console.log(`* justgage: "${option}" is not a supported update setting`)}}function kvLookup(key,tablea,tableb,defval,datatype,delimiter){let val=defval,canConvert=!1;if(!isUndefined(key)&&(!isUndefined(tableb)&&"object"==typeof tableb&&key in tableb?(val=tableb[key],canConvert=!0):!isUndefined(tablea)&&"object"==typeof tablea&&key in tablea?(val=tablea[key],canConvert=!0):val=defval,!0===canConvert&&!isUndefined(datatype)))switch(datatype){case"int":val=parseInt(val,10);break;case"float":val=parseFloat(val)}return val}function isUndefined(v){return null==v}function getColor(val,pct,col,noGradient,custSec){let percentage,rval,gval,bval,lower,upper,range,rangePct,pctLower,pctUpper,color;const cust=custSec&&custSec.ranges&&custSec.ranges.length>0;if(noGradient=noGradient||cust,cust){!0===custSec.percents&&(val=100*pct);for(let i=0;i<custSec.ranges.length;i++)if(val>=custSec.ranges[i].lo&&val<=custSec.ranges[i].hi)return custSec.ranges[i].color}const no=col.length;if(1===no)return col[0];const inc=noGradient?1/no:1/(no-1),colors=[];for(let i=0;i<col.length;i++)percentage=noGradient?inc*(i+1):inc*i,rval=parseInt(cutHex(col[i]).substring(0,2),16),gval=parseInt(cutHex(col[i]).substring(2,4),16),bval=parseInt(cutHex(col[i]).substring(4,6),16),colors[i]={pct:percentage,color:{r:rval,g:gval,b:bval}};if(0===pct)return"rgb("+[colors[0].color.r,colors[0].color.g,colors[0].color.b].join(",")+")";for(let j=0;j<colors.length;j++)if(pct<=colors[j].pct)return noGradient?"rgb("+[colors[j].color.r,colors[j].color.g,colors[j].color.b].join(",")+")":(lower=colors[j-1],upper=colors[j],range=upper.pct-lower.pct,rangePct=(pct-lower.pct)/range,pctLower=1-rangePct,pctUpper=rangePct,color={r:Math.floor(lower.color.r*pctLower+upper.color.r*pctUpper),g:Math.floor(lower.color.g*pctLower+upper.color.g*pctUpper),b:Math.floor(lower.color.b*pctLower+upper.color.b*pctUpper)},"rgb("+[color.r,color.g,color.b].join(",")+")")}function setDy(elem,fontSize,txtYpos){(!ie||ie>9)&&elem.node.firstChild.attributes.dy&&(elem.node.firstChild.attributes.dy.value=0)}function cutHex(str){return"#"===str.charAt(0)?str.substring(1,7):str}function isHexColor(val){const regExp=/^#([0-9A-Fa-f]{3}){1,2}$/;return"string"==typeof val&&regExp.test(val)}function humanFriendlyNumber(n,d){const d2=Math.pow(10,d),s=" KMGTPE";let i=0;const c=1e3;for(;(n>=c||n<=-c)&&++i<s.length;)n/=c;return i=i>=s.length?s.length-1:i,Math.round(n*d2)/d2+s[i]}function formatNumber(x){const parts=x.toString().split(".");return parts[0]=parts[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),parts.join(".")}function getStyle(oElm,strCssRule){let strValue="";return document.defaultView&&document.defaultView.getComputedStyle?strValue=document.defaultView.getComputedStyle(oElm,"").getPropertyValue(strCssRule):oElm.currentStyle&&(strCssRule=strCssRule.replace(/-(\w)/g,(function(strMatch,p1){return p1.toUpperCase()})),strValue=oElm.currentStyle[strCssRule]),strValue}function onCreateElementNsReady(func){void 0!==document.createElementNS?func():setTimeout((function(){onCreateElementNsReady(func)}),100)}JustGage.prototype.bindEvent=function(eventName,func){eventName+="."+this.level.id,this.events[eventName]&&Raphael.eve.off(eventName,this.events[eventName]),Raphael.eve.on(eventName,func),this.events[eventName]=func},JustGage.prototype.refresh=function(val,max,min,label){const obj=this;let displayVal;max=isNumber(max)?max:null,min=isNumber(min)?min:null,null!==(label=label||null)&&(obj.config.label=label,obj.txtLabel.attr({text:obj.config.label}),setDy(obj.txtLabel,obj.params.labelFontSize,obj.params.labelY)),null!==min&&(obj.config.min=min,obj.txtMinimum=obj.config.min,obj.config.minTxt?obj.txtMinimum=obj.config.minTxt:obj.config.humanFriendly?obj.txtMinimum=humanFriendlyNumber(obj.config.min,obj.config.humanFriendlyDecimal):obj.config.formatNumber&&(obj.txtMinimum=formatNumber(obj.config.min)),obj.config.reverse?(obj.txtMax.attr({text:obj.txtMinimum}),setDy(obj.txtMax,obj.params.minFontSize,obj.params.minY)):(obj.txtMin.attr({text:obj.txtMinimum}),setDy(obj.txtMin,obj.params.minFontSize,obj.params.minY))),null!==max&&(obj.config.max=max,obj.txtMaximum=obj.config.max,obj.config.maxTxt?obj.txtMaximum=obj.config.maxTxt:obj.config.humanFriendly?obj.txtMaximum=humanFriendlyNumber(obj.config.max,obj.config.humanFriendlyDecimal):obj.config.formatNumber&&(obj.txtMaximum=formatNumber(obj.config.max)),obj.config.reverse?(obj.txtMin.attr({text:obj.txtMaximum}),setDy(obj.txtMin,obj.params.maxFontSize,obj.params.maxY)):(obj.txtMax.attr({text:obj.txtMaximum}),setDy(obj.txtMax,obj.params.maxFontSize,obj.params.maxY))),displayVal=val,1*val>1*obj.config.max&&(val=1*obj.config.max),1*val<1*obj.config.min&&(val=1*obj.config.min);const color=getColor(val,(val-obj.config.min)/(obj.config.max-obj.config.min),obj.config.levelColors,obj.config.noGradient,obj.config.customSectors);displayVal=obj.config.textRenderer&&!1!==obj.config.textRenderer(displayVal)?obj.config.textRenderer(displayVal):obj.config.humanFriendly?humanFriendlyNumber(displayVal,obj.config.humanFriendlyDecimal)+obj.config.symbol:obj.config.formatNumber?formatNumber((1*displayVal).toFixed(obj.config.decimals))+obj.config.symbol:obj.config.displayRemaining?(1*(obj.config.max-displayVal)).toFixed(obj.config.decimals)+obj.config.symbol:(1*displayVal).toFixed(obj.config.decimals)+obj.config.symbol,obj.originalValue=displayVal,obj.config.value=1*val,obj.config.counter||(obj.txtValue.attr({text:displayVal}),setDy(obj.txtValue,obj.params.valueFontSize,obj.params.valueY));let rvl=obj.config.value;obj.config.reverse&&(rvl=1*obj.config.max+1*obj.config.min-1*obj.config.value),obj.level.animate({pki:[rvl,obj.config.differential],fill:color},obj.config.refreshAnimationTime,obj.config.refreshAnimationType,obj.config.onAnimationEnd),obj.config.pointer&&obj.needle.animate({ndl:[rvl]},obj.config.refreshAnimationTime,obj.config.refreshAnimationType)},JustGage.prototype.update=function(options,val){const obj=this;if(options instanceof Object)for(const option in options)updateProp(obj,option,val=options[option]);else updateProp(obj,options,val)},JustGage.prototype.destroy=function(){this.node&&this.node.parentNode&&(this.node.innerHTML="");for(const event in this.events)Raphael.eve.off(event,this.events[event]);this.events={}},JustGage.prototype.generateShadow=function(svg,defs){const obj=this,sid="inner-shadow-"+(obj.config.id||obj.config.classId),gaussFilter=document.createElementNS(svg,"filter");gaussFilter.setAttribute("id",sid),defs.appendChild(gaussFilter);const feOffset=document.createElementNS(svg,"feOffset");feOffset.setAttribute("dx",0),feOffset.setAttribute("dy",obj.config.shadowVerticalOffset),gaussFilter.appendChild(feOffset);const feGaussianBlur=document.createElementNS(svg,"feGaussianBlur");feGaussianBlur.setAttribute("result","offset-blur"),feGaussianBlur.setAttribute("stdDeviation",obj.config.shadowSize),gaussFilter.appendChild(feGaussianBlur);const feComposite1=document.createElementNS(svg,"feComposite");feComposite1.setAttribute("operator","out"),feComposite1.setAttribute("in","SourceGraphic"),feComposite1.setAttribute("in2","offset-blur"),feComposite1.setAttribute("result","inverse"),gaussFilter.appendChild(feComposite1);const feFlood=document.createElementNS(svg,"feFlood");feFlood.setAttribute("flood-color","black"),feFlood.setAttribute("flood-opacity",obj.config.shadowOpacity),feFlood.setAttribute("result","color"),gaussFilter.appendChild(feFlood);const feComposite2=document.createElementNS(svg,"feComposite");feComposite2.setAttribute("operator","in"),feComposite2.setAttribute("in","color"),feComposite2.setAttribute("in2","inverse"),feComposite2.setAttribute("result","shadow"),gaussFilter.appendChild(feComposite2);const feComposite3=document.createElementNS(svg,"feComposite");feComposite3.setAttribute("operator","over"),feComposite3.setAttribute("in","shadow"),feComposite3.setAttribute("in2","SourceGraphic"),gaussFilter.appendChild(feComposite3),obj.config.showInnerShadow&&(obj.canvas.canvas.childNodes[2].setAttribute("filter","url(#"+sid+")"),obj.canvas.canvas.childNodes[3].setAttribute("filter","url(#"+sid+")"))};const ie=function(){let v=3;const div=document.createElement("div"),all=div.getElementsByTagName("i");for(;all[0];)div.innerHTML="\x3c!--[if gt IE "+ ++v+"]><i></i><![endif]--\x3e";return v>4?v:void 0}();function extend(out){out=out||{};for(let i=1;i<arguments.length;i++)if(arguments[i])for(const key in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],key)&&(out[key]=arguments[i][key]);return out}function isNumber(n){return null!=n&&!isNaN(n)}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){const r=16*Math.random()|0,v="x"===c?r:3&r|8;return v.toString(16)}))}return JustGage}));