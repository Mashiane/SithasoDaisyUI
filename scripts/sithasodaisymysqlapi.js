
/* sithasodaisymysqlapi */
function banano_sithasodaisymysqlapi_sduimysqlapi() {var _B=this;_B._db_bool="BOOL";_B._db_int="INT";_B._db_real="REAL";_B._db_float="FLOAT";_B._db_integer="INTEGER";_B._db_text="TEXT";_B._db_double="DOUBLE";_B._db_number="NUMBER";_B._db_date="DATE";_B._mcallback={};_B._wherefield={};_B._ops=[];_B._orderbyl=[];_B._flds=[];_B._rowcount=0;_B._lastposition=0;_B._record={};_B._result=[];_B._mevent="";_B._tablename="";_B._tag={};_B._schema={};_B._primarykey="";_B._displayfield="";_B._singular="";_B._plural="";_B._displayvalue="";_B._isauthenticated=false;_B._combinel=[];_B._showlog=false;_B._baseurl="";_B._autoincrement="";_B._operator_contains="cs";_B._operator_not_contains="ncs";_B._operator_startswith="sw";_B._operator_not_startswith="nsw";_B._operator_ends_with="ew";_B._operator_not_ends_with="new";_B._operator_eq="eq";_B._operator_neq="neq";_B._operator_lt="lt";_B._operator_nlt="nlt";_B._operator_lte="le";_B._operator_not_lte="nle";_B._operator_gte="ge";_B._operator_ngte="nge";_B._operator_gt="gt";_B._operator_ngt="ngt";_B._operator_between="between";_B._operator_nbetween="nbt";_B._operator_in="in";_B._operator_not_in="nin";_B._operator_isnull="is";_B._operator_not_isnull="nis";_B._operator_like="like";_B.initialize=function(_module,_eventname,_url,_stablename) {_B._tablename=_stablename;_B._mcallback=_module;_B._wherefield={};_B._ops.length=0;_B._orderbyl.length=0;_B._flds.length=0;_B._record={};_B._lastposition=-1;_B._result.length=0;_B._mevent=_eventname;_B._primarykey="id";_B._autoincrement="";_B._schema={};_B._combinel.length=0;_B._showlog=false;_B._baseurl=_url;_B._mevent=_eventname;return _B;};_B.schemaclear=function() {_B._schema={};return _B;};_B.schemaaddboolean=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_bool;}return _B;};_B.schemaaddboolean1=function(_b) {_B._schema[_b]=_B._db_bool;return _B;};_B.schemaadddouble1=function(_b) {_B._schema[_b]=_B._db_double;return _B;};_B.schemaadddouble=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_double;}return _B;};_B.schemaaddfloat1=function(_b) {_B._schema[_b]=_B._db_float;return _B;};_B.schemaaddfloat=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_float;}return _B;};_B.schemaaddtext1=function(_b) {_B._schema[_b]=_B._db_text;return _B;};_B.schemaaddtext=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_text;}return _B;};_B.schemaaddint1=function(_b) {_B._schema[_b]=_B._db_int;return _B;};_B.schemaaddint=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_int;}return _B;};_B.schemaaddnumber=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_number;}return _B;};_B.schemaaddnumber1=function(_b) {_B._schema[_b]=_B._db_number;return _B;};_B.select_all=async function() {var _qflds,_qsort,_xcommand,_scommand,_fetch,_response;_B._result.length=0;if (_B._showlog) {console.log("SDUIMySQLAPI.SELECT_ALL");}if (Object.keys(_B._schema).length==0) {throw "SDUIMySQLAPI.SELECT_ALL. Please execute SchemaAdd?? first to define your table schema!";return _B._result;}_qflds=_banano_sithasodaisy_sduishared.join("&",_B._flds);_qflds=_banano_sithasodaisy_sduishared.remdelim(_qflds,"&");_qsort=_banano_sithasodaisy_sduishared.join("&",_B._orderbyl);_qsort=_banano_sithasodaisy_sduishared.remdelim(_qsort,"&");_xcommand=[];_xcommand.length=0;if (_qflds!="") {_xcommand.push(_qflds);}if (_qsort!="") {_xcommand.push(_qsort);}_scommand=_banano_sithasodaisy_sduishared.join("&",_xcommand);_scommand=_banano_sithasodaisy_sduishared.remdelim(_scommand,"&");_B._lastposition=-1;_fetch= new banano_sithasodaisy_sduifetch();_fetch.initialize(_B._baseurl);if (_scommand=="") {_fetch.seturl("/records/" + _B._tablename + "");} else {_fetch.seturl("/records/" + _B._tablename + "?" + _scommand + "");if (_B._showlog) {console.log("SDUIMySQLAPI.SELECT_ALL(" + _scommand + ")");}}await _fetch.getwait();if (_fetch._success) {_response=_fetch._response;if (("records" in _response)) {_B._result=_response["records"];}}_B._rowcount=_B._result.length;return _B._result;};_B.create=async function() {var _output,_fetch,_response;if (_B._showlog) {console.log("SDUIMySQLAPI.CREATE");}if (Object.keys(_B._schema).length==0) {throw "SDUIMySQLAPI.CREATE. Please execute SchemaAdd?? first to define your table schema!";return "";}try {_output={};_fetch= new banano_sithasodaisy_sduifetch();_fetch.initialize(_B._baseurl);_fetch.seturl("/records/" + _B._tablename + "");_fetch.setdata(_B._record);await _fetch.postwait();if (_fetch._success) {_B._rowcount=1;_response=_fetch._response;_output=_response;}return _output;} catch(err) {return "";}};_B.delete=async function(_id) {var _output,_fetch,_response;if (_B._showlog) {console.log("SDUIMySQLAPI.DELETE(" + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIMySQLAPI.DELETE. Please execute SchemaAdd?? first to define your table schema!";return false;}try {_output={};_fetch= new banano_sithasodaisy_sduifetch();_fetch.initialize(_B._baseurl);_fetch.seturl("/records/" + _B._tablename + "/" + _id + "");await _fetch.deletewait();if (_fetch._success) {_response=_fetch._response;_output=_response;_B._rowcount=_banano_sithasodaisy_sduishared.cint(_output);return true;} else {return false;}} catch(err) {return false;}};_B.update=async function() {var _pkvalue,_output,_fetch,_response;if (_B._showlog) {console.log("SDUIMySQLAPI.UPDATE");}if (Object.keys(_B._schema).length==0) {throw "SDUIMySQLAPI.UPDATE. Please execute SchemaAdd?? first to define your table schema!";return "";}try {_pkvalue=_B._record[_B._primarykey]===undefined? "":_B._record[_B._primarykey];if (_pkvalue=="") {return "";}_output={};_fetch= new banano_sithasodaisy_sduifetch();_fetch.initialize(_B._baseurl);_fetch.seturl("/records/" + _B._tablename + "/" + _pkvalue + "");_fetch.setdata(_B._record);await _fetch.putwait();if (_fetch._success) {_response=_fetch._response;_output=_response;_B._rowcount=_banano_sithasodaisy_sduishared.cint(_output);}return _B._rowcount;} catch(err) {return "";}};_B.read=async function(_id) {var _m,_fetch,_response;_m={};_B._record=_m;_B._lastposition=-1;if (_B._showlog) {console.log("SDUIMySQLAPI.READ(" + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIMySQLAPI.READ. Please execute SchemaAdd?? first to define your table schema!";return _m;}_m={};try {_fetch= new banano_sithasodaisy_sduifetch();_fetch.initialize(_B._baseurl);_fetch.seturl("/records/" + _B._tablename + "/" + _id + "");await _fetch.getwait();if (_fetch._success) {_response=_fetch._response;console.log(_response);_B._rowcount=_B._result.length;_B._record=_response;_B._result.push(_B._record);}return _B._record;} catch(err) {_B._record=_m;return _m;}};_B.read_by=async function(_fldname,_fldvalue) {var _res,_m;if (_B._showlog) {console.log("SDUIMySQLAPI.READ_BY(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);_m={};if (_res.length==0) {return _m;} else {_m=_res[0];return _m;}};_B.containskey=async function(_id) {var _res;if (_B._showlog) {console.log("SDUIMySQLAPI.ContainsKey(" + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIMySQLAPI.ContainsKey. Please execute SchemaAdd?? first to define your table schema!";return "";}_B.clear_where(_B);_B.add_where(_B._primarykey,"=",_id,_B);_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.containsfield=async function(_fldname,_id) {var _res;if (_B._showlog) {console.log("SDUIMySQLAPI.ContainsField(" + _fldname + "," + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIMySQLAPI.ContainsField. Please execute SchemaAdd?? first to define your table schema!";return "";}_B.clear_where(_B);_B.add_where(_fldname,"=",_id,_B);_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.listkeys=async function() {var _res,_rec,_k;if (_B._showlog) {console.log("SDUIMySQLAPI.ListKeys");}if (Object.keys(_B._schema).length==0) {throw "SDUIMySQLAPI.ListKeys. Please execute SchemaAdd?? first to define your table schema!";return null;}_B.clear_where(_B);_B._result=await _B.select_where(_B);_res=[];_res.length=0;for (var _recindex=0;_recindex<_B._result.length;_recindex++) {_rec=_B._result[_recindex];_k=_rec[_B._primarykey]===undefined? "":_rec[_B._primarykey];_k=_banano_sithasodaisy_sduishared.cstr(_k);_res.push(_k);}return _res;};_B.delete_all=async function() {var _keys,_k;if (_B._showlog) {console.log("SDUIMySQLAPI.DELETE_ALL");}_keys=await _B.listkeys(_B);if (_keys.length==0) { return ;}for (var _kindex=0;_kindex<_keys.length;_kindex++) {_k=_keys[_kindex];await _B.delete(_k,_B);}};_B.getkeyvalues=async function(_bhasnothing,_k,_v) {var _mx,_row,_f1,_f2;if (_B._showlog) {console.log("SDUIMySQLAPI.GetKeyValues(" + _bhasnothing + "," + _k + "," + _v + ")");}_mx={};if (_bhasnothing) {_mx[""]="-- Nothing Selected --";}_B.clear_where(_B);_B.add_field(_k,_B);_B.add_field(_v,_B);_B.add_order_by(_v,_B);_B._result=await _B.select_where(_B);for (var _rowindex=0;_rowindex<_B._result.length;_rowindex++) {_row=_B._result[_rowindex];_f1=_row[_k];_f2=_row[_v];_mx[_f1]=_f2;}return _mx;};_B.create_or_update=async function() {var _key,_bthere,_ar;if (_B._showlog) {console.log("SDUIMySQLAPI.CREATE_OR_UPDATE");}if (Object.keys(_B._schema).length==0) {throw "SDUIMySQLAPI.CREATE_OR_UPDATE. Please execute SchemaAdd?? first to define your table schema!";return "";}try {_key=_B._record[_B._primarykey]===undefined? "":_B._record[_B._primarykey];_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];_bthere=false;if (_key!="") {_bthere=await _B.containskey(_key,_B);if (_B._showlog) {console.log("SDUIMySQLAPI.CREATE_OR_UPDATE:ContainsKey(id," + _key + "," + _bthere + ")");}}if (_bthere==false) {_ar=await _B.create(_B);return _ar;} else {_ar=await _B.update(_B);return _ar;}} catch(err) {return "";}};_B.create_or_update_by=async function(_fldname) {var _skey,_bthere,_id,_rec,_ar;if (_B._showlog) {console.log("SDUIMySQLAPI.CREATE_OR_UPDATE_BY_FIELD(" + _fldname + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIMySQLAPI.CREATE_OR_UPDATE_BY_FIELD. Please execute SchemaAdd?? first to define your table schema!";return "";}try {_skey=_B._record[_fldname]===undefined? "":_B._record[_fldname];_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];_bthere=false;_id="";if (_skey!="") {_rec=await _B.read_by(_fldname,_skey,_B);_id=_rec[_B._primarykey]===undefined? "":_rec[_B._primarykey];if (_id!="") {_bthere=true;}}if (_bthere==false) {_ar=await _B.create(_B);return _ar;} else {_B._record[_B._primarykey]=_id;_ar=await _B.update(_B);return _ar;}} catch(err) {return "";}};_B.get_id_by_field=async function(_fldname,_fldvalue) {var _rec,_sid;if (_B._showlog) {console.log("SDUIMySQLAPI.GET_ID_BY_FIELD(" + _fldname + "," + _fldvalue + ")");}_rec=await _B.read_by(_fldname,_fldvalue,_B);_sid=_rec[_B._primarykey]===undefined? "":_rec[_B._primarykey];return _sid;};_B.update_by=async function(_fldname,_fldvalue) {var _rec,_sid,_nid;if (_B._showlog) {console.log("SDUIMySQLAPI.UPDATE_BY(" + _fldname + "," + _fldvalue + ")");}_rec=await _B.read_by(_fldname,_fldvalue,_B);_sid=_rec[_B._primarykey]===undefined? "":_rec[_B._primarykey];_B._record[_B._primarykey]=_sid;_nid=await _B.update(_B);return _nid;};_B.setfield=function(_fldname,_fldvalue) {var _dt;if (_B._showlog) {console.log("SDUIMySQLAPI.SetField(" + _fldname + ", " + _fldvalue + ")");}_dt=_B._schema[_fldname];switch ("" + _dt) {case "" + _B._db_bool:_fldvalue=_banano_sithasodaisy_sduishared.cbool(_fldvalue);break;case "" + _B._db_int:_fldvalue=_banano_sithasodaisy_sduishared.cint(_fldvalue);break;case "" + _B._db_real:_fldvalue=_banano_sithasodaisy_sduishared.cdbl(_fldvalue);break;case "" + _B._db_float:_fldvalue=_banano_sithasodaisy_sduishared.cdbl(_fldvalue);break;case "" + _B._db_integer:_fldvalue=_banano_sithasodaisy_sduishared.cint(_fldvalue);break;case "" + _B._db_text:_fldvalue=_banano_sithasodaisy_sduishared.cstr(_fldvalue);break;case "" + _B._db_double:_fldvalue=_banano_sithasodaisy_sduishared.cdbl(_fldvalue);break;}_B._record[_fldname]=_fldvalue;return _B;};_B.firstrecord=function() {var _rec;_rec=_B._result[0];return _rec;};_B.clear_where=function() {if (_B._showlog) {console.log("SDUIMySQLAPI.CLEAR_WHERE");}_B._wherefield={};_B._ops.length=0;_B._orderbyl.length=0;_B._flds.length=0;_B._combinel.length=0;return _B;};_B.reset=function() {_B._wherefield={};_B._ops.length=0;_B._orderbyl.length=0;_B._flds.length=0;_B._combinel.length=0;_B._rowcount=0;_B._lastposition=-1;_B._record={};_B._result.length=0;_B._tag=null;_B._schema={};_B._displayfield="";_B._singular="";_B._plural="";_B._displayvalue="";_B._isauthenticated=false;_B._primarykey="";_B._autoincrement="";return _B;};_B.add_field=function(_fld) {_B._flds.push("include=" + _fld + "");return _B;};_B.add_fields=function(_fields) {var _fld;for (var _fldindex=0;_fldindex<_fields.length;_fldindex++) {_fld=_fields[_fldindex];_B.add_field(_fld,_B);}return _B;};_B.add_where=function(_fld,_operator,_value) {if (_B._showlog) {console.log("SDUIMySQLAPI.ADD_WHERE(" + _fld + "," + _operator + "," + _value + ")");}switch ("" + _operator) {case "" + ">":_operator="gt";break;case "" + ">=":_operator="ge";break;case "" + "<":_operator="lt";break;case "" + "<=":_operator="le";break;case "" + "=":_operator="eq";break;case "" + "<>":_operator="neq";break;case "" + "like":_operator="cs";break;case "" + "between":_operator="bt";break;case "" + "in":_operator="in";break;}_B._wherefield[_fld]=_value;_B._ops.push(_operator);_B._combinel.push("");return _B;};_B.where_or=function(_pos) {if (_B._showlog) {console.log("SDUIMySQLAPI.WHERE_OR(" + _pos + ")");}_B._combinel[_pos]="2";return _B;};_B.where_and=function(_pos) {if (_B._showlog) {console.log("SDUIMySQLAPI.WHERE_AND(" + _pos + ")");}_B._combinel[_pos]="";return _B;};_B.add_order_by=function(_fld) {if (_B._showlog) {console.log("SDUIMySQLAPI.ADD_ORDER_BY(" + _fld + ")");}_B._orderbyl.push("order=" + _fld + "");return _B;};_B.add_order_by_desc=function(_fld) {if (_B._showlog) {console.log("SDUIMySQLAPI.ADD_ORDER_BY_DESC(" + _fld + ")");}_B._orderbyl.push("order=" + _fld + ",desc");return _B;};_B.nextrow=function() {var _realsize;_B._lastposition=_B._lastposition+1;_realsize=_B._rowcount-1;if (_B._lastposition>_realsize) {return false;} else {_B.setposition(_B._lastposition,_B);return true;}};_B.setrecord=function(_rec) {var _k,_fldpos,_v,_dt;_B._record={};var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_fldpos=(_k in _B._schema);if (_fldpos==false) {delete _rec[_k];}}var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_rec[_k]===undefined? "":_rec[_k];_dt=_B._schema[_k];switch ("" + _dt) {case "" + _B._db_bool:_v=_banano_sithasodaisy_sduishared.cbool(_v);break;case "" + _B._db_int:_v=_banano_sithasodaisy_sduishared.cint(_v);break;case "" + _B._db_real:_v=_banano_sithasodaisy_sduishared.cdbl(_v);break;case "" + _B._db_float:_v=_banano_sithasodaisy_sduishared.cdbl(_v);break;case "" + _B._db_integer:_v=_banano_sithasodaisy_sduishared.cint(_v);break;case "" + _B._db_text:_v=_banano_sithasodaisy_sduishared.cstr(_v);break;case "" + _B._db_double:_v=_banano_sithasodaisy_sduishared.cdbl(_v);break;}_B._record[_k]=_v;}_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];if (_B._showlog) {console.log("SDUIMySQLAPI.SetRecord(" + JSON.stringify(_B._record) + ")");}};_B.delete_by=async function(_fldname,_fldvalue) {if (_B._showlog) {console.log("SDUIMySQLAPI.DELETE_BY(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where(_fldname,"=",_fldvalue,_B);await _B.deletewhere(_B._primarykey,_B._wherefield,_B._ops,_B);};_B.delete_where=async function() {if (_B._showlog) {console.log("SDUIMySQLAPI.DELETE_WHERE");}await _B.deletewhere(_B._primarykey,_B._wherefield,_B._ops,_B);};_B.exists=async function(_fldname,_fldvalue) {var _res;if (_B._showlog) {console.log("SDUIMySQLAPI.Exists(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.existswhere=async function(_where) {var _k,_v,_res;if (_B._showlog) {console.log("SDUIMySQLAPI.ExistsWhere(" + JSON.stringify(_where) + ")");}_B.clear_where(_B);var _kKeys = Object.keys(_where);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_where[_k];_B.add_where(_k,"=",_v,_B);}_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.select_where=async function() {if (_B._showlog) {console.log("SDUIMySQLAPI.SELECT_WHERE");}_B._lastposition=-1;_B._result.length=0;_B._result=await _B.findwhereorderby(_B._wherefield,_B._ops,_B._orderbyl,_B);_B._rowcount=_B._result.length;return _B._result;};_B.nextid=function() {var _ni;_ni=_banano_sithasodaisy_sduishared.guidalpha(15);return _ni;};_B.preparerecord=function() {_B._record={};};_B.setposition=function(_pos) {if (_B._result.length>_pos) {_B._record=_B._result[_pos];_B._lastposition=_pos;} else {_B._lastposition=-1;_B._record={};}};_B.getposition=function() {return _B._lastposition;};_B.getint=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return 0;}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? 0:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cint(_obj);return _obj;} else {return 0;}};_B.getlong=function(_fld) {return _B.getint(_fld,_B);};_B.getstring=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return "";}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? "":_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cstr(_obj);return _obj;} else {return "";}};_B.getimage=function(_fld) {var _simage;_simage=_B.getstring(_fld,_B);if (_simage=="") { return "./assets/placeholderimg.jpg";}return _simage;};_B.getboolean=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return false;}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? false:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.parsebool(_obj);return _obj;} else {return false;}};_B.getdouble=function(_fld) {var _obj;_fld=_fld.toLowerCase();if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? 0:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cdbl(_obj);return _obj;} else {return 0;}};_B.getrecord=function(_pos) {var _rec;_rec=_B._result[_pos];return _rec;};_B.movefirst=function() {_B.setposition(0,_B);};_B.movelast=function() {_B.setposition(_B._rowcount-1,_B);};_B.moveprevious=function() {_B._lastposition=_B._lastposition-1;if (_B._lastposition<0) {_B._lastposition=0;}_B.setposition(_B._lastposition,_B);};_B.movenext=function() {_B._lastposition=_B._lastposition+1;if (_B._lastposition>_B._rowcount) {_B._lastposition=_B._rowcount-1;}_B.setposition(_B._lastposition,_B);};_B.deletewhere=async function(_prikey,_wheremap,_whereops) {var _recs,_rec,_pvalue;if (_B._showlog) {console.log("SDUIMySQLAPI.deleteWhere(" + _prikey + "," + JSON.stringify(_wheremap) + "," + _whereops + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIMySQLAPI.deleteWhere. Please execute SchemaAdd?? first to define your table schema!";return null;}_recs=await _B.findwhereorderby(_wheremap,_whereops,null,_B);for (var _recindex=0;_recindex<_recs.length;_recindex++) {_rec=_recs[_recindex];_pvalue=_rec[_prikey];await _B.delete(_pvalue,_B);}return true;};_B.findwhere=async function(_wheremap,_whereops) {var _res;if (_B._showlog) {console.log("SDUIMySQLAPI.findWhere(" + JSON.stringify(_wheremap) + "," + _whereops + ")");}_res=await _B.findwhereorderby(_wheremap,_whereops,null,_B);return _res;};_B.findwhereorderby=async function(_wheremap,_whereops,_orderby) {var _sb,_i,_iwhere,_col,_val,_opr,_qfilter,_afilter,_qsort,_qflds,_xcommand,_scommand,_nresult,_fetch,_response;if (_B._showlog) {console.log("SDUIMySQLAPI.findWhereOrderBy(" + JSON.stringify(_wheremap) + "," + _whereops + "," + _orderby + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIMySQLAPI.findWhereOrderBy. Please execute SchemaAdd?? first to define your table schema!";return null;}_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_i=0;_iwhere=Object.keys(_wheremap).length-1;for (_i=0;_i<=_iwhere;_i++) {_col=banano_getB4JKeyAt(_wheremap,_i);_val=banano_getB4JValueAt(_wheremap,_i);_opr=_whereops[_i];_sb.append("filter[]=").append(_col).append(",");_sb.append(_opr).append(",").append(_val).append("&");}_qfilter=_sb.toString();_afilter=_banano_sithasodaisy_sduishared.remdelim(_qfilter,"&");_qfilter=_afilter.trim();_qsort="";if (is.null(_orderby)==false) {_qsort=_banano_sithasodaisy_sduishared.join("&",_orderby);_qsort=_banano_sithasodaisy_sduishared.remdelim(_qsort,"&");}_qflds=_banano_sithasodaisy_sduishared.join("&",_B._flds);_qflds=_banano_sithasodaisy_sduishared.remdelim(_qflds,"&");_xcommand=[];_xcommand.length=0;if (_qflds!="") {_xcommand.push(_qflds);}if (_qfilter!="") {_xcommand.push(_qfilter);}if (_qsort!="") {_xcommand.push(_qsort);}_scommand=_banano_sithasodaisy_sduishared.join("&",_xcommand);_scommand=_banano_sithasodaisy_sduishared.remdelim(_scommand,"&");_nresult=[];_nresult.length=0;_fetch= new banano_sithasodaisy_sduifetch();_fetch.initialize(_B._baseurl);if (_scommand=="") {_fetch.seturl("/records/" + _B._tablename + "");} else {_fetch.seturl("/records/" + _B._tablename + "?" + _scommand + "");if (_B._showlog) {console.log("SDUIMySQLAPI.findWhereOrderBy(" + _scommand + ")");}}await _fetch.getwait();if (_fetch._success) {_response=_fetch._response;if (("records" in _response)) {_nresult=_response["records"];}}return _nresult;};_B.getkeyvaluesfromlist=function(_source,_bhasnothing,_k,_v) {var _mx,_row,_f1,_f2;_mx={};if (_bhasnothing) {_mx[""]="-- Nothing Selected --";}for (var _rowindex=0;_rowindex<_source.length;_rowindex++) {_row=_source[_rowindex];_f1=_row[_k];_f2=_row[_v];_mx[_f1]=_f2;}return _mx;};}