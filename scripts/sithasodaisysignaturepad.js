
/* sithasodaisysignaturepad */
function banano_sithasodaisysignaturepad_sduisignaturepad() {var _B=this;_B._mname="";_B._meventname="";_B._mcallback={};_B._mtarget=null;_B._melement=null;_B._tag={};_B._sparentid="";_B._options={};_B._bvisible=false;_B._mclasses="";_B._mstyles="";_B._mattributes="";_B._smarginaxytblr="";_B._spaddingaxytblr="";_B._sbackgroundcolor="";_B._ddotsize=0;_B._sheight="200";_B._simagetype="";_B._dmaxwidth=0;_B._imindistance=0;_B._dminwidth=0;_B._spencolor="";_B._ithrottle=0;_B._dvelocityfilterweight=0;_B._swidth="400";_B._signaturepad=null;_B._sborderposition="";_B._sbordercolor="";_B._sborderradius="";_B._sborderstyle="";_B._sborderwidth="";_B._custprops={};_B._root= new banano_sithasodaisy_sduidiv();_B._wrapper= new banano_sithasodaisy_sduidiv();_B.initialize=function(_callback,_name,_eventname) {_B._mname=_banano_sithasodaisy_sduishared.cleanid(_name);_B._mcallback=_callback;_B._meventname=_banano_sithasodaisy_sduishared.cleanid(_eventname);_B._options={};};_B.enable=function() {_B._wrapper.disabled(false);};_B.disable=function() {_B._wrapper.disabled(true);};_B.show=function() {_B._wrapper.hidden(false);};_B.hide=function() {_B._wrapper.hidden(true);};_B.defaults=function() {_B.setdotsize(0,_B);_B.setheight("200",_B);_B.setimagetype("jpeg",_B);_B.setmaxwidth(2.5,_B);_B.setmindistance(5,_B);_B.setminwidth(0.5,_B);_B.setthrottle(16,_B);_B.setvelocityfilterweight(0.7,_B);_B.setwidth("400",_B);};_B.getid=function() {return _B._mname;};_B.gethere=function() {return "#" + _B._mname + "";};_B.setbackgroundcolor=function(_v) {_v=_banano_sithasodaisy_sduishared.cstr(_v);_B._sbackgroundcolor=_v;_B._options["backgroundColor"]=_v;};_B.setdotsize=function(_v) {_v=_banano_sithasodaisy_sduishared.cdbl(_v);_B._ddotsize=_v;_B._options["dotSize"]=_v;};_B.setheight=function(_v) {_v=_banano_sithasodaisy_sduishared.cstr(_v);_B._sheight=_v;_B._root.addattr("height",_v);_B._root.addstyle("height","" + _v + "px");_B._wrapper.addstyle("height","" + _v + "px");};_B.setimagetype=function(_v) {_v=_banano_sithasodaisy_sduishared.cstr(_v);_B._simagetype=_v;_B._options["imageType"]=_v;};_B.setmaxwidth=function(_v) {_v=_banano_sithasodaisy_sduishared.cdbl(_v);_B._dmaxwidth=_v;_B._options["maxWidth"]=_v;};_B.setmindistance=function(_v) {_v=_banano_sithasodaisy_sduishared.cint(_v);_B._imindistance=_v;_B._options["minDistance"]=_v;};_B.setminwidth=function(_v) {_v=_banano_sithasodaisy_sduishared.cdbl(_v);_B._dminwidth=_v;_B._options["minWidth"]=_v;};_B.setpencolor=function(_v) {_v=_banano_sithasodaisy_sduishared.cstr(_v);_B._spencolor=_v;_B._options["penColor"]=_v;};_B.setthrottle=function(_v) {_v=_banano_sithasodaisy_sduishared.cint(_v);_B._ithrottle=_v;_B._options["throttle"]=_v;};_B.setvelocityfilterweight=function(_v) {_v=_banano_sithasodaisy_sduishared.cdbl(_v);_B._dvelocityfilterweight=_v;_B._options["velocityFilterWeight"]=_v;};_B.setwidth=function(_v) {_v=_banano_sithasodaisy_sduishared.cstr(_v);_B._swidth=_v;_B._root.addattr("height",_v);_B._root.addstyle("width","" + _v + "px");_B._wrapper.addstyle("width","" + _v + "px");};_B.refresh=function() {var _canvas;_canvas=u("#" + _B._mname + "").nodes[0];_B._signaturepad=new SignaturePad(_canvas,_B._options);BANanoExec("resizeCanvas", window, _canvas,_B._signaturepad);};_B.clear=function() {_B._signaturepad["clear"]();};_B.download=function() {var _dataurl,_dfilename,_blob;_dataurl=_B.todataurl(_B);_dfilename="" + _B._mname + "." + _B._simagetype + "";_blob=_banano_sithasodaisy_sduishared.dataurltoblob(_dataurl);BANanoExec("saveAs", window, _blob,_dfilename);};_B.fromdata=function(_data) {_B._signaturepad["fromData"](_data);};_B.fromdataurl=function(_dataurl) {_B._signaturepad["fromDataURL"](_dataurl);};_B.draw=function() {var _canvas,_ctx;_canvas=u("#" + _B._mname + "").nodes[0];_ctx=_canvas["getContext"]("2d");_ctx["globalCompositeOperation"]="source-over";};_B.erase=function() {var _canvas,_ctx;_canvas=u("#" + _B._mname + "").nodes[0];_ctx=_canvas["getContext"]("2d");_ctx["globalCompositeOperation"]="destination-out";};_B.todata=function() {var _data;_data=_B._signaturepad["toData"]();return _data;};_B.undo=function() {var _data;_data=_B._signaturepad["toData"]();if (is.null(_data)==false) {_data["pop"]();_B._signaturepad["fromData"](_data);}};_B.todataurl=function() {var _res;_res="";switch ("" + _B._simagetype) {case "" + "jpeg":_res=_B._signaturepad["toDataURL"]("image/jpeg");break;case "" + "png":_res=_B._signaturepad["toDataURL"]("image/png");break;case "" + "svg":_res=_B._signaturepad["toDataURL"]("image/svg+xml");break;}return _res;};_B.isempty=function() {var _res;_res=_B._signaturepad["isEmpty"]();return _res;};_B.off=function() {_B._signaturepad["off"]();};_B.on=function() {_B._signaturepad["on"]();};_B.designercreateview=function(_target,_props) {_B._custprops=_props;_B._mtarget=_target;if (_props!=null) {_B._sparentid=_props["ParentID"]===undefined? "":_props["ParentID"];_B._sparentid=_banano_sithasodaisy_sduishared.cstr(_B._sparentid);_B._bvisible=_props["Visible"]===undefined? true:_props["Visible"];_B._bvisible=_banano_sithasodaisy_sduishared.parsebool(_B._bvisible);_B._mclasses=_props["RawClasses"]===undefined? "":_props["RawClasses"];_B._mstyles=_props["RawStyles"]===undefined? "":_props["RawStyles"];_B._mattributes=_props["RawAttributes"]===undefined? "":_props["RawAttributes"];_B._smarginaxytblr=_props["MarginAXYTBLR"]===undefined? "a=?; x=?; y=?; t=?; b=?; l=?; r=?":_props["MarginAXYTBLR"];_B._spaddingaxytblr=_props["PaddingAXYTBLR"]===undefined? "a=?; x=?; y=?; t=?; b=?; l=?; r=?":_props["PaddingAXYTBLR"];_B._sbackgroundcolor=_props["BackgroundColor"]===undefined? "white":_props["BackgroundColor"];_B._sbackgroundcolor=_banano_sithasodaisy_sduishared.cstr(_B._sbackgroundcolor);_B._ddotsize=_props["DotSize"]===undefined? "0":_props["DotSize"];_B._ddotsize=_banano_sithasodaisy_sduishared.cdbl(_B._ddotsize);_B._sheight=_props["Height"]===undefined? "200":_props["Height"];_B._sheight=_banano_sithasodaisy_sduishared.cstr(_B._sheight);_B._simagetype=_props["ImageType"]===undefined? "jpeg":_props["ImageType"];_B._simagetype=_banano_sithasodaisy_sduishared.cstr(_B._simagetype);_B._dmaxwidth=_props["MaxWidth"]===undefined? "2.5":_props["MaxWidth"];_B._dmaxwidth=_banano_sithasodaisy_sduishared.cdbl(_B._dmaxwidth);_B._imindistance=_props["MinDistance"]===undefined? 5:_props["MinDistance"];_B._imindistance=_banano_sithasodaisy_sduishared.cint(_B._imindistance);_B._dminwidth=_props["MinWidth"]===undefined? "0.5":_props["MinWidth"];_B._dminwidth=_banano_sithasodaisy_sduishared.cdbl(_B._dminwidth);_B._spencolor=_props["PenColor"]===undefined? "black":_props["PenColor"];_B._spencolor=_banano_sithasodaisy_sduishared.cstr(_B._spencolor);_B._ithrottle=_props["Throttle"]===undefined? 16:_props["Throttle"];_B._ithrottle=_banano_sithasodaisy_sduishared.cint(_B._ithrottle);_B._dvelocityfilterweight=_props["VelocityFilterWeight"]===undefined? "0.7":_props["VelocityFilterWeight"];_B._dvelocityfilterweight=_banano_sithasodaisy_sduishared.cdbl(_B._dvelocityfilterweight);_B._swidth=_props["Width"]===undefined? "400":_props["Width"];_B._swidth=_banano_sithasodaisy_sduishared.cstr(_B._swidth);_B._sbordercolor=_props["BorderColor"]===undefined? "black":_props["BorderColor"];_B._sbordercolor=_banano_sithasodaisy_sduishared.cstr(_B._sbordercolor);_B._sborderradius=_props["BorderRadius"]===undefined? "5px":_props["BorderRadius"];_B._sborderradius=_banano_sithasodaisy_sduishared.cstr(_B._sborderradius);_B._sborderstyle=_props["BorderStyle"]===undefined? "solid":_props["BorderStyle"];_B._sborderstyle=_banano_sithasodaisy_sduishared.cstr(_B._sborderstyle);_B._sborderwidth=_props["BorderWidth"]===undefined? "1px":_props["BorderWidth"];_B._sborderwidth=_banano_sithasodaisy_sduishared.cstr(_B._sborderwidth);_B._sborderposition=_props["BorderPosition"]===undefined? "all":_props["BorderPosition"];_B._sborderposition=_banano_sithasodaisy_sduishared.cstr(_B._sborderposition);}if (_B._sparentid!="") {_B._sparentid=_B._sparentid.toLowerCase();_B._mtarget=u("#" + _B._sparentid + "");}if (u("#" + _B._mname + "").length>0) {_B._melement=u("#" + _B._mname + "");} else {_B._melement=_B._mtarget.append("<div id=\"" + _B._mname + "wrapper\"><canvas id=\"" + _B._mname + "\"></canvas></div>").find("#"+_B._mname).bananofirst();}_B.assignelement(_B._mcallback,_B._mname,_B);_B._root.classes(_B._mclasses);_B._root.attributes(_B._mattributes);_B._root.styles(_B._mstyles);_B._root.paddingaxytblr(_B._spaddingaxytblr);_B._root.marginaxytblr(_B._smarginaxytblr);if (_B._bvisible==false) {_B.hide(_B);}_B._options["backgroundColor"]=_banano_sithasodaisy_sduishared.getcolorhex(_B._sbackgroundcolor);_B._options["dotSize"]=_B._ddotsize;_B._options["maxWidth"]=_B._dmaxwidth;_B._options["minDistance"]=_B._imindistance;_B._options["minWidth"]=_B._dminwidth;_B._options["penColor"]=_banano_sithasodaisy_sduishared.getcolorhex(_B._spencolor);_B._options["throttle"]=_B._ithrottle;_B._options["velocityFilterWeight"]=_B._dvelocityfilterweight;_B._root.setborder(_B._sborderposition,_B._sborderstyle,_B._sborderwidth,_B._sbordercolor,_B._sborderradius);_B.setheight(_B._sheight,_B);_B.setwidth(_B._swidth,_B);_B._wrapper.addstyle("position","relative");_B._wrapper.addstyle("-moz-user-select","none");_B._wrapper.addstyle("-webkit-user-select","none");_B._wrapper.addstyle("-ms-user-select","none");_B._wrapper.addstyle("user-select","none");_B._root.addstyle("position","absolute");_B._root.addstyle("left","0");_B._root.addstyle("top","0");_B.refresh(_B);};_B.assignelement=function(_module,_id) {_id=_banano_sithasodaisy_sduishared.cleanid(_id);if (u("#" + _id + "").length>0==false) {return;}_B._mname=_id;_B._mcallback=_module;_B._melement=u("#" + _id + "");_B._root.assignelement(_B._mcallback,_B._mname);_B._wrapper.assignelement(_B._mcallback,"" + _B._mname + "wrapper");_B._root.addevent("afterUpdateStroke",null);_B._root.addevent("beforeUpdateStroke",null);_B._root.addevent("beginStroke",null);_B._root.addevent("endStroke",null);};_B.shadow=function(_s) {_B._root.shadow(_s);};_B.roundedbox=function() {_B._root.roundedbox();};_B.addtoparent=function(_targetid,_props) {_targetid=_banano_sithasodaisy_sduishared.cleanid(_targetid);_B._mtarget=u("#"+_targetid);_B.designercreateview(_B._mtarget,_props,_B);};}