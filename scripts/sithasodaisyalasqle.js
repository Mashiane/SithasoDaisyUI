
/* sithasodaisyalasqle */
function banano_sithasodaisyalasqle_modala() {var _B;this.instr=function(__3e2,_sfind) {if (_B==null) _B=this;return __3e2.toLowerCase().indexOf(_sfind.toLowerCase());};this.cdbl=function(_o) {if (_B==null) _B=this;var _out,__d1b,_nout;_o=_B.val(_o,_B);_out=BANano_nf(BANano_r(_o, 2),0);__d1b=_B.cstr(_out,_B);__d1b=__d1b.split(",").join(".");__d1b=_B.val(__d1b,_B);_nout=parseFloat(__d1b);return _nout;};this.cstr=function(_o) {if (_B==null) _B=this;if (is.null(_o) || is.undefined(_o)) {_o="";}if (_o=="null") { return "";}if (_o=="undefined") { return "";}return ""+_o;};this.cbool=function(_v) {if (_B==null) _B=this;var _s;if (is.null(_v) || is.undefined(_v)) {_v=false;}if (typeof _v=="string" || typeof _v=="object") {_s=_v+"";_s=_s.toLowerCase();if (_s=="") { return false;}if (_s=="false") { return false;}if (_s=="true") { return true;}if (_s=="1") { return true;}if (_s=="y") { return true;}if (_s=="0") { return false;}if (_s=="n") { return false;}if (_s=="no") { return false;}if (_s=="yes") { return true;}}return _v;};this.cint=function(_o) {if (_B==null) _B=this;_o=_B.val(_o,_B);return parseInt(_o);};this.isnan=function(_obj) {if (_B==null) _B=this;var _res;_res=window["isNaN"](_obj);return _res;};this.val=function(_value) {if (_B==null) _B=this;var _sout,_mout,_slen,_i;_value=_B.cstr(_value,_B);_value=_value.trim();if (_value=="") {_value="0";}if (_B.isnan(_value,_B)) {_value="0";}try {_sout="";_mout="";_slen=_value.length;_i=0;for (_i=0;_i<=_slen-1;_i++) {_mout=_value.charAt(_i);if (_B.instr("0123456789.-",_mout,_B)!=-1) {_sout=_sout+_mout;}}return _sout;} catch(err) {return _value;}};}function banano_sithasodaisyalasqle_sduialasqle() {var _B=this;_B.__62="BOOL";_B.__63="INT";_B.__64="STRING";_B.__65="REAL";_B.__66="BLOB";_B.__67="FLOAT";_B.__68="INTEGER";_B.__69="TEXT";_B.__6a="DOUBLE";_B.__6c={};_B._tablename="";_B._primarykey="";_B.__87="";_B.__57=[];_B.__2c4="";_B.__2c5=[];_B._args=[];_B.__2c7="";_B._json="";_B._error="";_B.__59=0;_B.__5a={};_B._ok=false;_B._auto="";_B.__1df="";_B._view="";_B.__2cc="";_B.__a21=false;_B.__2ce=false;_B.__53={};_B._ops=[];_B.__55=[];_B._flds=[];_B.__5c=0;_B.__5d=0;_B.__a22="";_B.__a23="";_B.__5e="";_B.__5f="";_B.__60="";_B.__61="";_B.reset=function() {_B.__5a={};_B.__57.length=0;_B.__2c4="";_B._ops.length=0;_B.__2c5.length=0;_B._args.length=0;_B.__2c7="";_B.__87="";_B._error="";_B.__59=0;_B._json="";_B._ok=false;_B.__5d=-1;_B.__5c=0;};_B.setschemafromdatamodel=function(__1111) {var _tm,__f49,_fm,__ce9,__cac;if ((_B._tablename in __1111)==false) {throw "SetSchemaFromDataModel." + _B._tablename + " data-model does NOT exist!";return;}_tm=__1111[_B._tablename];_B._primarykey=_tm["pk"]===undefined? "":_tm["pk"];_B.__6c={};__f49=_tm["fields"];for (var _fmindex=0;_fmindex<__f49.length;_fmindex++) {_fm=__f49[_fmindex];__ce9=_fm["type"];__cac=_fm["name"];switch ("" + __ce9) {case "" + "TEXT":case "" + "STRING":_B.schemaaddtext1(__cac,_B);break;case "" + "BLOB":_B.schemaaddblob1(__cac,_B);break;case "" + "INT":case "" + "INTEGER":_B.schemaaddint1(__cac,_B);break;case "" + "DOUBLE":case "" + "REAL":case "" + "FLOAT":_B.schemaadddouble1(__cac,_B);break;case "" + "BOOL":_B.schemaaddboolean1(__cac,_B);break;}}};_B.gettablenames=function() {var _BANp = gBANp(arguments);_B.__2c7="SHOW TABLES FROM " + _B.__1df + "";_B.__2c4="select";};_B.clear_where=function() {var _BANp = gBANp(arguments);_B.__53={};_B._ops.length=0;_B.__55.length=0;_B._flds.length=0;};_B.add_field=function(_fld) {_B._flds.push(_fld);return _B;};_B.add_fields=function(_fields) {var _fld;for (var _fldindex=0;_fldindex<_fields.length;_fldindex++) {_fld=_fields[_fldindex];_B.add_field(_fld,_B);}return _B;};_B.add_where=function(_fld,__c86,_value) {_B.__53[_fld]=_value;_B._ops.push(__c86);return _B;};_B.add_order_by=function(_fld) {_B.__55.push(_fld);return _B;};_B.getdatabases=function() {var _BANp = gBANp(arguments);_B.__2c7="SHOW DATABASES";_B.__2c4="select";};_B.createindex=function(__12d3) {_B.__2c7="CREATE INDEX " + _B._tablename + "" + __12d3 + " ON " + _B._tablename + "(" + __12d3 + ")";_B.__2c4="execute";};_B.showcreatetable=function() {var _BANp = gBANp(arguments);_B.__2c7="SHOW CREATE TABLE " + _B._tablename + "";_B.__2c4="select";_B.__a21=true;};_B.getcount=function() {var _BANp = gBANp(arguments);_B.__2c7="select count(*) as records from " + _B._tablename + "";_B.__2c4="select";_B.__a21=true;return _B;};_B.getsum=function() {var _BANp = gBANp(arguments);_B.__2c7="select sum(" + _B._primarykey + ") as " + _B._primarykey + " from " + _B._tablename + "";_B.__2c4="select";return _B;};_B.initialize=function(__3e4,__619,_pk,_ai) {var _BANp = gBANp(arguments);_B.__1df=__3e4;_B.__6c={};_B._tablename=__619;_B._primarykey=_pk;_B._auto=_ai;_B.__87="";_B.__57.length=0;_B.__2c4="";_B.__2c5.length=0;_B._args.length=0;_B.__2c7="";_B._json="";_B._error="";_B.__59=0;_B.__5a={};_B._ok=false;_B._view="";_B.__2cc="";_B.__a21=false;_B.__2ce=true;_B.__55.length=0;_B.__53={};_B._flds.length=0;_B._ops.length=0;_B.__5c=0;_B.__5d=-1;_B.clear_where(_BANp,_B);return _B;};_B.setcallback=function(_v,_a) {_B._view=_v;_B.__2cc=_a;};_B.schemaaddblob=function(__caa) {var _BANp = gBANp(arguments);var _b;for (var _bindex=0;_bindex<__caa.length;_bindex++) {_b=__caa[_bindex];_B.__6c[_b]=_B.__66;}return _B;};_B.schemaaddblob1=function(_b) {_B.__6c[_b]=_B.__66;return _B;};_B.schemaaddboolean=function(__caa) {var _b;for (var _bindex=0;_bindex<__caa.length;_bindex++) {_b=__caa[_bindex];_B.__6c[_b]=_B.__62;}return _B;};_B.schemaaddboolean1=function(_b) {_B.__6c[_b]=_B.__62;return _B;};_B.schemaadddouble1=function(_b) {_B.__6c[_b]=_B.__6a;return _B;};_B.schemaadddouble=function(__caa) {var _BANp = gBANp(arguments);var _b;for (var _bindex=0;_bindex<__caa.length;_bindex++) {_b=__caa[_bindex];_B.__6c[_b]=_B.__6a;}return _B;};_B.schemaaddfloat1=function(_b) {_B.__6c[_b]=_B.__67;return _B;};_B.schemaaddfloat=function(__caa) {var _b;for (var _bindex=0;_bindex<__caa.length;_bindex++) {_b=__caa[_bindex];_B.__6c[_b]=_B.__67;}return _B;};_B.schemaaddtext1=function(_b) {_B.__6c[_b]=_B.__64;return _B;};_B.schemaaddtext=function(__caa) {var _BANp = gBANp(arguments);var _b;for (var _bindex=0;_bindex<__caa.length;_bindex++) {_b=__caa[_bindex];_B.__6c[_b]=_B.__64;}return _B;};_B.schemaaddint1=function(_b) {_B.__6c[_b]=_B.__63;return _B;};_B.schemaaddint=function(__caa) {var _BANp = gBANp(arguments);var _b;for (var _bindex=0;_bindex<__caa.length;_bindex++) {_b=__caa[_bindex];_B.__6c[_b]=_B.__63;}return _B;};_B.schemaaddfield=function(__cac,__ce9) {_B.__6c[__cac]=__ce9;};_B.setfield=function(__cac,__cb2) {_B.__5a[__cac]=__cb2;return _B;};_B.recordfrommap=function(_sm) {var _k,_v;_B.__5a={};var _kKeys = Object.keys(_sm);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_sm[_k];_B.__5a[_k]=_v;}};_B.firstrecord=function() {var _rec;_rec=_B.__57[0];return _rec;};_B.build=function() {var __e61,__e62,_b;__e61=[];__e62=[];__e61=((_B._args.length==0) ? null : _B._args);__e62=((_B.__2c5.length==0) ? null : _B.__2c5);_b={};_b["command"]=_B.__2c4;_b["query"]=_B.__2c7;_b["args"]=__e61;_b["types"]=__e62;return _b;};_B.fromjson=function() {var __cea;_B.__5d=-1;_B.__a22="";_B.__a23="";try {_B.__87="Success";_B._error="";_B.__59=_B.__57.length;_B._ok=true;if (_B.__a21) {if (_B.__57.length>=0) {_B.__5a=_B.__57[0];_B.__a23=JSON.stringify(_B.__5a);__cea=_B.__5a["records"]===undefined? 0:_B.__5a["records"];_B.__59=parseInt(__cea);} else {_B.__59=0;}}_B.__5c=_B.__59;_B.__a22=JSON.stringify(_B.__57);return _B;} catch(err) {_B.__5c=0;return _B;}};_B.nextrow=function() {var __cb4;_B.__5d=_B.__5d+1;__cb4=_B.__5c-1;if (_B.__5d>__cb4) {return false;} else {_B.setposition(_B.__5d,_B);return true;}};_B.update=function(__cd4) {var __cd6;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.Update: '" + _B._tablename + "' schema is not set!");}__cd6={};__cd6[_B._primarykey]=__cd4;_B.updatewhere(_B.__5a,__cd6,null,_B);return _B;};_B.updateby=function(_pk,_pv) {_B._primarykey=_pk;_B.update(_pv,_B);};_B.update1=function(_rec,__cd4) {var _BANp = gBANp(arguments);var __cd6;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.Update1: '" + _B._tablename + "' schema is not set!");}_B.__5a=_rec;_B.__a23=JSON.stringify(_B.__5a);__cd6={};__cd6[_B._primarykey]=__cd4;_B.updatewhere(_rec,__cd6,null,_BANp,_B);return _B;};_B.updatewait=async function(_rec,__cd4) {var _db;_db=null;_db_B.__1df=_B.__1df;await BananoSQLOpen(_B.__1df);_B.update1(_rec,__cd4,_B);_B.__57=await BananoSQLRunExecute(_B.__2c7, _B._args,_db_B.__1df);_B.fromjson(_B);return true;};_B.schemaclear=function() {var _BANp = gBANp(arguments);_B.__6c={};return _B;};_B.getnextid=function() {var __e6a,__e6b,_nr,_ni;__e6a=0;__e6b="";if (_B.__57.length==0) {__e6a=0;} else {_nr=_B.__57[0];_ni=_nr[_B._primarykey]===undefined? "0":_nr[_B._primarykey];__e6a=parseInt(_ni);}__e6a=__e6a+1;__e6b=_B.cstr(__e6a,_B);__e6a=parseInt(__e6a);return __e6b;};_B.cstr=function(_o) {if (is.null(_o) || is.undefined(_o)) {_o="";}if (_o=="null") { return "";}if (_o=="undefined") { return "";}return ""+_o;};_B.getmapvalues=function(__e70) {var _BANp = gBANp(arguments);var __e65,_icnt,_itot,_key,_value,__e74;__e65=[];__e65.length=0;_icnt=0;_itot=0;_itot=Object.keys(__e70).length-1;for (_icnt=0;_icnt<=_itot;_icnt++) {_key=banano_getB4JKeyAt(__e70,_icnt);_value=banano_getB4JValueAt(__e70,_icnt);_value=_B.cstr(_value,_B);_value=_value.trim();__e74=_B.getmaptype(_key,_B);switch ("" + __e74) {case "" + "i":if (_value=="") {_value="0";}_value=parseInt(_value);break;case "" + "d":if (_value=="") {_value="0";}_value=parseFloat(_value);break;case "" + "s":case "" + "b":break;}__e65.push(_value);}return __e65;};_B.joinfields=function(__cc2,_lst) {var _BANp = gBANp(arguments);var _i,_sb,_fld;_i=0;_sb=new StringBuilder();_fld="";_sb.init();_sb.isinitialized=true;_fld=_lst[0];_fld=_B.escapefield(_fld,_B);_sb.append(_fld);for (_i=1;_i<=_lst.length-1;_i++) {_fld=_lst[_i];_fld=_B.escapefield(_fld,_B);_sb.append(__cc2).append(_fld);}return _sb.toString();};_B.getmapkeys=function(__e70) {var __e65,_icnt,_itot,_value;__e65=[];__e65.length=0;_icnt=0;_itot=0;_itot=Object.keys(__e70).length-1;for (_icnt=0;_icnt<=_itot;_icnt++) {_value=banano_getB4JKeyAt(__e70,_icnt);__e65.push(_value);}return __e65;};_B.json2map=function(__e6c) {var __e6d,_map1;__e6d={};_map1={};_map1={};_map1={};try {if (__e6c.length>0) {__e6d=JSON.parse(__e6c);_map1=__e6d;}return _map1;} catch(err) {return _map1;}};_B.delete=function(__cd3) {var _BANp = gBANp(arguments);var _qw;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.Delete: '" + _B._tablename + "' schema is not set!");}_qw={};_qw[_B._primarykey]=__cd3;_B.deletewhere(_qw,["="],_BANp,_B);return _B;};_B.deleteby=function(_pk,_pv) {_B._primarykey=_pk;_B.delete(_pv,_B);};_B.escapefield=function(_f) {var _BANp = gBANp(arguments);if (_B.__2ce) {return "[" + _f + "]";} else {return _f;}};_B.schemacreatetable=function() {var _BANp = gBANp(arguments);_B.createtable(_B.__6c,_BANp,_B);return _B;};_B.schemacreatetablewait=async function() {var _db;_db=null;_db_B.__1df=_B.__1df;await BananoSQLOpen(_B.__1df);_B.schemacreatetable(_B);_B.__57=await BananoSQLRunExecute(_B.__2c7, _B._args,_db_B.__1df);_B.fromjson(_B);return true;};_B.createtable=function(__cd5) {var _BANp = gBANp(arguments);var __cac,__ce9,__d44,_fldcnt,_sb;__cac="";__ce9="";__d44=0;__d45=0;__d44=Object.keys(__cd5).length-1;_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("(");for (_fldcnt=0;_fldcnt<=__d44;_fldcnt++) {__cac=banano_getB4JKeyAt(__cd5,_fldcnt);__ce9=__cd5[__cac];__ce9=__ce9.split("STRING").join("TEXT");if (_fldcnt>0) {_sb.append(", ");}_sb.append(_B.escapefield(__cac,_BANp,_B));_sb.append(" ");_sb.append(__ce9);if (__cac.equalsIgnoreCase(_B._auto)) {_sb.append(" AUTOINCREMENT");}if (__cac.equalsIgnoreCase(_B._primarykey)) {_sb.append(" PRIMARY KEY");}}_sb.append(")");_B.__2c7="CREATE TABLE IF NOT EXISTS "+_B.escapefield(_B._tablename,_BANp,_B)+" "+_sb.toString();_B.__2c4="createtable";_B.__87="";_B._error="";_B.__57=_B.newlist(_BANp,_B);_B._json="";_B.__59=0;return _B;};_B.newlist=function() {var _BANp = gBANp(arguments);var _lst;_lst=[];_lst.length=0;return _lst;};_B.insertbulk=function(_recs) {var _ssql;_ssql="SELECT * INTO [" + _B._tablename + "] FROM ?";_B.__2c7=_ssql;_B._args=[_recs];_B.__2c4="insert";_B.__87="";_B._error="";_B.__57=_B.newlist(_B);_B._json="";_B.__59=0;return _B;};_B.insertlist=function() {var _ssql;_ssql="SELECT * INTO [" + _B._tablename + "] FROM ?";_B.__2c7=_ssql;_B.__2c4="insert";_B.__87="";_B._error="";_B.__57=_B.newlist(_B);_B._json="";_B.__59=0;return _B;};_B.getmax=function() {var _BANp = gBANp(arguments);var _sb;_sb="SELECT MAX([" + _B._primarykey + "]) As [" + _B._primarykey + "] FROM " + _B.escapefield(_B._tablename,_BANp,_B) + "";_B.__2c7=_sb;_B.__2c4="select";_B.__87="";_B._error="";_B.__57=_B.newlist(_BANp,_B);_B._json="";_B.__59=0;return _B;};_B.getmaxby=function(__6e9) {_B._primarykey=__6e9;_B.getmax(_B);};_B.getmin=function() {var _BANp = gBANp(arguments);var _sb;_sb="SELECT MIN([" + _B._primarykey + "]) As [" + _B._primarykey + "] FROM " + _B.escapefield(_B._tablename,_BANp,_B) + "";_B.__2c7=_sb;_B.__2c4="select";_B.__87="";_B._error="";_B.__57=_B.newlist(_BANp,_B);_B._json="";_B.__59=0;return _B;};_B.droptable=function() {var _BANp = gBANp(arguments);_B.__2c7="DROP TABLE "+_B.escapefield(_B._tablename,_BANp,_B);_B.__87="";_B._error="";_B.__2c4="droptable";_B.__57=_B.newlist(_BANp,_B);_B._json="";_B.__59=0;return _B;};_B.execute=function(__cda) {var _BANp = gBANp(arguments);__cda=__cda.trim();_B.__2c7=__cda;_B.__2c4="execute";_B.__87="";_B._error="";_B.__57=_B.newlist(_BANp,_B);_B._json="";_B.__59=0;return _B;};_B.executewait=async function(_qry) {var _db;_B.__2c7=_qry;_db=null;_db_B.__1df=_B.__1df;await BananoSQLOpen(_B.__1df);_B.execute(_B.__2c7,_B);_B.__57=await BananoSQLRunExecute(_B.__2c7, _B._args,_db_B.__1df);_B.fromjson(_B);_B.__5c=_B.__57.length;_B.__59=_B.__5c;return true;};_B.insert=function() {if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.Insert1: '" + _B._tablename + "' schema is not set!");}_B.insert1(_B.__5a,_B);return _B;};_B.insert1=function(_rec) {var _BANp = gBANp(arguments);var _sb,_columns,_values,__e65,__e64,_icnt,_itot,_col;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.Insert1: '" + _B._tablename + "' schema is not set!");}_sb=new StringBuilder();_columns=new StringBuilder();_values=new StringBuilder();__e65=_B.getmapvalues(_rec,_BANp,_B);__e64=_B.getmaptypes(_rec,_BANp,_B);_icnt=0;_itot=0;_sb.init();_sb.isinitialized=true;_columns.init();_columns.isinitialized=true;_values.init();_values.isinitialized=true;_sb.append("INSERT INTO " + _B.escapefield(_B._tablename,_BANp,_B) + " (");_itot=Object.keys(_rec).length-1;for (_icnt=0;_icnt<=_itot;_icnt++) {_col=banano_getB4JKeyAt(_rec,_icnt);if (_icnt>0) {_columns.append(", ");_values.append(", ");}_columns.append(_B.escapefield(_col,_BANp,_B));_values.append("?");}_sb.append(_columns.toString());_sb.append(") VALUES (");_sb.append(_values.toString());_sb.append(")");_B.__2c7=_sb.toString();_B._args=__e65;_B.__2c5=__e64;_B.__2c4="insert";_B.__87="";_B._error="";_B.__57=_B.newlist(_BANp,_B);_B._json="";_B.__59=0;return _B;};_B.setrecord=function(_rec) {var _k,_v;var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_rec[_k];_B.setfield(_k,_v,_B);}};_B.preparerecord=function() {_B.__5a={};};_B.insertwait=async function() {var _db;_db=null;_db_B.__1df=_B.__1df;await BananoSQLOpen(_B.__1df);_B.insert1(_B.__5a,_B);_B.__57=await BananoSQLRunExecute(_B.__2c7, _B._args,_db_B.__1df);_B.fromjson(_B);return true;};_B.getmaptype=function(_k) {var __e73;if ((_k in _B.__6c)) {__e73=_B.__6c[_k]===undefined? "STRING":_B.__6c[_k];switch ("" + __e73) {case "" + "INTEGER":case "" + "INT":case "" + "BOOL":case "" + "BOOLEAN":return "i";case "" + "BLOB":return "b";case "" + "REAL":case "" + "FLOAT":case "" + "DOUBLE":return "d";default:return "s";}} else {return "s";}};_B.getmaptypes=function(__e70) {var _BANp = gBANp(arguments);var __e64,_icnt,_itot,_col,__e73;__e64=[];__e64.length=0;_icnt=0;_itot=0;_itot=Object.keys(__e70).length-1;for (_icnt=0;_icnt<=_itot;_icnt++) {_col=banano_getB4JKeyAt(__e70,_icnt);__e73=_B.__6c[_col]===undefined? "STRING":_B.__6c[_col];switch ("" + __e73) {case "" + "INTEGER":case "" + "INT":case "" + "BOOL":case "" + "BOOLEAN":__e64.push("i");break;case "" + "BLOB":__e64.push("b");break;case "" + "REAL":case "" + "FLOAT":case "" + "DOUBLE":__e64.push("d");break;default:__e64.push("s");break;}}return __e64;};_B.eqoperators=function(_sm) {var _BANp = gBANp(arguments);var _nl,_k;_nl=[];_nl.length=0;var _kKeys = Object.keys(_sm);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_nl.push("=");}return _nl;};_B.updatewhere=function(__cd5,__cd6,__cd7) {var _BANp = gBANp(arguments);var __e64,__e77,__e65,__e78,_sb,_i,_itot,_col,__c8c,_opr;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.UpdateWhere: '" + _B._tablename + "' schema is not set!");}if (is.null(__cd7)) {__cd7=_B.eqoperators(__cd6,_BANp,_B);}__e64=_B.getmaptypes(__cd5,_BANp,_B);__e77=_B.getmaptypes(__cd6,_BANp,_B);__e64.push(...__e77);__e65=_B.getmapvalues(__cd5,_BANp,_B);__e78=_B.getmapvalues(__cd6,_BANp,_B);__e65.push(...__e78);_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("UPDATE " + _B.escapefield(_B._tablename,_BANp,_B) + " SET ");_i=0;_itot=Object.keys(__cd5).length-1;for (_i=0;_i<=_itot;_i++) {_col=banano_getB4JKeyAt(__cd5,_i);_sb.append(_B.escapefield(_col,_BANp,_B));if (_i!=_itot) {_sb.append(" = ?,");} else {_sb.append(" = ?");}}_sb.append(" WHERE ");__c8c=Object.keys(__cd6).length-1;for (_i=0;_i<=__c8c;_i++) {if (_i>0) {_sb.append(" AND ");}_col=banano_getB4JKeyAt(__cd6,_i);_sb.append(_B.escapefield(_col,_BANp,_B));_opr=__cd7[_i];_sb.append(" " + _opr + " ?");}_B.__2c7=_sb.toString();_B._args=__e65;_B.__2c5=__e64;_B.__2c4="update";_B.__87="";_B._error="";_B.__57=_B.newlist(_BANp,_B);_B._json="";_B.__59=0;return _B;};_B.updatewherewait=async function(__cd5,__cd6,__cd7) {var _db;_db=null;_db_B.__1df=_B.__1df;await BananoSQLOpen(_B.__1df);_B.updatewhere(__cd5,__cd6,__cd7,_B);_B.__57=await BananoSQLRunExecute(_B.__2c7, _B._args,_db_B.__1df);_B.fromjson(_B);return true;};_B.delete_where=function() {return _B.deletewhere(_B.__53,_B._ops,_B);};_B.deletewhere=function(__cd6,__cd7) {var _BANp = gBANp(arguments);var __e64,__e65,_sb,_i,__c8c,_col,_opr;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.DeleteWhere: '" + _B._tablename + "' schema is not set!");}if (is.null(__cd7)) {__cd7=_B.eqoperators(__cd6,_BANp,_B);}__e64=_B.getmaptypes(__cd6,_BANp,_B);__e65=_B.getmapvalues(__cd6,_BANp,_B);_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("DELETE FROM " + _B.escapefield(_B._tablename,_BANp,_B) + " WHERE ");_i=0;__c8c=Object.keys(__cd6).length-1;for (_i=0;_i<=__c8c;_i++) {if (_i>0) {_sb.append(" AND ");}_col=banano_getB4JKeyAt(__cd6,_i);_sb.append(_col);_opr=__cd7[_i];_sb.append(" " + _opr + " ?");}_B.__2c7=_sb.toString();_B._args=__e65;_B.__2c5=__e64;_B.__2c4="delete";_B.__87="";_B._error="";_B.__57=_B.newlist(_BANp,_B);_B._json="";_B.__59=0;return _B;};_B.deleteall=function() {var _sb;_sb="DELETE FROM " + _B.escapefield(_B._tablename,_B) + " WHERE 1=1";_B.__2c7=_sb;_B.__2c4="delete";_B.__87="";_B._error="";_B.__57=_B.newlist(_B);_B._json="";_B.__59=0;return _B;};_B.map2json=function(_mp) {var _xjson;_xjson={};_xjson=_mp;return JSON.stringify(_xjson);};_B.list2json=function(_mp) {var _xjson;_xjson={};_xjson=_mp;return JSON.stringify(_xjson);};_B.json2list=function(__12d6) {var _lst,__11cd;_lst=[];_lst.length=0;_lst.length=0;if (__12d6.length==0) {return _lst;}try {__11cd={};__11cd=JSON.parse(__12d6);return __11cd;} catch(err) {return _lst;}};_B.updateall=function(__cd5) {var __cd7,__e64,__e65,_sb,_i,_itot,_oper,_col;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.UpdateAll: '" + _B._tablename + "' schema is not set!");}__cd7=_B.eqoperators(__cd5,_B);__e64=_B.getmaptypes(__cd5,_B);__e65=_B.getmapvalues(__cd5,_B);_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("UPDATE " + _B.escapefield(_B._tablename,_B) + " SET ");_i=0;_itot=Object.keys(__cd5).length-1;for (_i=0;_i<=_itot;_i++) {_oper=__cd7[_i];_col=banano_getB4JKeyAt(__cd5,_i);_sb.append(_col);if (_i!=_itot) {_sb.append(" " + _oper + " ?,");} else {_sb.append(" " + _oper + " ?");}}_B.__2c7=_sb.toString();_B._args=__e65;_B.__2c5=__e64;_B.__2c4="update";_B.__87="";_B._error="";_B.__57=_B.newlist(_B);_B._json="";_B.__59=0;return _B;};_B.updateallwait=async function(_rec) {var _db;_db=null;_db_B.__1df=_B.__1df;await BananoSQLOpen(_B.__1df);_B.updateall(_rec,_B);_B.__57=await BananoSQLRunExecute(_B.__2c7, _B._args,_db_B.__1df);_B.fromjson(_B);return true;};_B.read=function(__cd3) {var _qw;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.Read: '" + _B._tablename + "' schema is not set!");}_qw={};_qw[_B._primarykey]=__cd3;_B.selectwhere(["*"],_qw,["="],[_B._primarykey],_B);return _B;};_B.readby=function(_pk,_pv) {_B._primarykey=_pk;_B.read(_pv,_B);};_B.readwait=async function(_pk) {var _db;_db=null;_db_B.__1df=_B.__1df;await BananoSQLOpen(_B.__1df);_B.read(_pk,_B);_B.__57=await BananoSQLRunExecute(_B.__2c7, _B._args,_db_B.__1df);_B.fromjson(_B);_B.__5c=_B.__57.length;_B.__59=_B.__5c;return true;};_B.exists=function(__cd3) {var _qw;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.Exists: '" + _B._tablename + "' schema is not set!");}_qw={};_qw[_B._primarykey]=__cd3;_B.selectwhere([_B._primarykey],_qw,["="],[_B._primarykey],_B);return _B;};_B.getmaxwhere=function(__cac,__cd6,__cd7) {var __e64,__e65,_sb,_i,__c8c,_col,_opr;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.GetMaxWhere: '" + _B._tablename + "' schema is not set!");}if (is.null(__cd7)) {__cd7=_B.eqoperators(__cd6,_B);}__e64=_B.getmaptypes(__cd6,_B);__e65=_B.getmapvalues(__cd6,_B);_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("SELECT MAX([" + __cac + "]) As [" + __cac + "] FROM " + _B.escapefield(_B._tablename,_B) + " WHERE ");_i=0;__c8c=Object.keys(__cd6).length-1;for (_i=0;_i<=__c8c;_i++) {if (_i>0) {_sb.append(" AND ");}_col=banano_getB4JKeyAt(__cd6,_i);_sb.append(_col);_opr=__cd7[_i];_sb.append(" " + _opr + " ?");}_B.__2c7=_sb.toString();_B._args=__e65;_B.__2c5=__e64;_B.__2c4="select";_B.__87="";_B._error="";_B.__57=_B.newlist(_B);_B._json="";_B.__59=0;return _B;};_B.selectdistinctall=function(__cd5,__c89) {var _fld1,__e67,_sb,_stro;if (__cd5.length==0) {__cd5.push("*");}_fld1=__cd5[0];__e67="";switch ("" + _fld1) {case "" + "*":__e67="*";break;default:__e67=_B.joinfields(",",__cd5,_B);break;}_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("SELECT DISTINCT " + __e67 + " FROM " + _B.escapefield(_B._tablename,_B) + "");if (true && __c89.length>0) {_stro=_B.joinfields(",",__c89,_B);if (_stro.length>0) {_sb.append(" ORDER BY ").append(_stro);}}_B.__2c7=_sb.toString();_B.__2c4="select";return _B;};_B.selectdistinctwhere=function(__cd5,__cd6,__cd7,__c89) {var __e64,__e65,_fld1,__e67,_sb,_i,__c8c,_col,_oper,_stro;if (Object.keys(_B.__6c).length==0) {console.log("SDUIMSSQLE.SelectDistinctWhere: '" + _B._tablename + "' schema is not set!");}if (is.null(__cd7)) {__cd7=_B.eqoperators(__cd6,_B);}__e64=_B.getmaptypes(__cd6,_B);__e65=_B.getmapvalues(__cd6,_B);if (__cd5.length==0) {__cd5.push("*");}_fld1=__cd5[0];__e67="";switch ("" + _fld1) {case "" + "*":__e67="*";break;default:__e67=_B.joinfields(",",__cd5,_B);break;}_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("SELECT DISTINCT " + __e67 + " FROM " + _B.escapefield(_B._tablename,_B) + " WHERE ");_i=0;__c8c=Object.keys(__cd6).length-1;for (_i=0;_i<=__c8c;_i++) {if (_i>0) {_sb.append(" AND ");}_col=banano_getB4JKeyAt(__cd6,_i);_oper=__cd7[_i];_sb.append(_B.escapefield(_col,_B));_sb.append(" " + _oper + " ?");}if (true && __c89.length>0) {_stro=_B.joinfields(",",__c89,_B);if (_stro.length>0) {_sb.append(" ORDER BY ").append(_stro);}}_B.__2c7=_sb.toString();_B._args=__e65;_B.__2c5=__e64;_B.__2c4="select";_B.__87="";_B._error="";_B.__57=_B.newlist(_B);_B._json="";_B.__59=0;return _B;};_B.select_where=function() {return _B.selectwhere(_B._flds,_B.__53,_B._ops,_B.__55,_B);};_B.selectwhere=function(__cd5,__cd6,__cd7,__c89) {var _BANp = gBANp(arguments);var __e64,__e65,_fld1,__e67,_sb,_i,__c8c,_col,_opr,_stro;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.SelectWhere: '" + _B._tablename + "' schema is not set!");}if (is.null(__cd7)) {__cd7=_B.eqoperators(__cd6,_BANp,_B);}__e64=_B.getmaptypes(__cd6,_BANp,_B);__e65=_B.getmapvalues(__cd6,_BANp,_B);if (__cd5.length==0) {__cd5.push("*");}_fld1=__cd5[0];__e67="";switch ("" + _fld1) {case "" + "*":__e67="*";break;default:__e67=_B.joinfields(",",__cd5,_BANp,_B);break;}_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("SELECT " + __e67 + " FROM " + _B.escapefield(_B._tablename,_BANp,_B) + " WHERE ");_i=0;__c8c=Object.keys(__cd6).length-1;for (_i=0;_i<=__c8c;_i++) {if (_i>0) {_sb.append(" AND ");}_col=banano_getB4JKeyAt(__cd6,_i);_sb.append(_col);_opr=__cd7[_i];_sb.append(" " + _opr + " ?");}if (true && __c89.length>0) {_stro=_B.joinfields(",",__c89,_BANp,_B);if (_stro.length>0) {_sb.append(" ORDER BY ").append(_stro);}}_B.__2c7=_sb.toString();_B._args=__e65;_B.__2c5=__e64;_B.__2c4="select";_B.__87="";_B._error="";_B.__57=_B.newlist(_BANp,_B);_B._json="";_B.__59=0;return _B;};_B.selectwherewait=async function(__cd5,__cd6,__cd7,__c89) {var _db;_db=null;_db_B.__1df=_B.__1df;await BananoSQLOpen(_B.__1df);_B.selectwhere(__cd5,__cd6,__cd7,__c89,_B);_B.__57=await BananoSQLRunExecute(_B.__2c7, _B._args,_db_B.__1df);_B.fromjson(_B);_B.__5c=_B.__57.length;_B.__59=_B.__5c;return true;};_B.selectmaxwhere=function(_fld,__cd6,__cd7) {var __e64,__e65,_sb,_i,__c8c,_col,_opr;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.SelectMaxWhere: '" + _B._tablename + "' schema is not set!");}if (is.null(__cd7)) {__cd7=_B.eqoperators(__cd6,_B);}__e64=_B.getmaptypes(__cd6,_B);__e65=_B.getmapvalues(__cd6,_B);_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("SELECT MAX(" + _fld + ") As [" + _fld + "] FROM " + _B.escapefield(_B._tablename,_B) + " WHERE ");_i=0;__c8c=Object.keys(__cd6).length-1;for (_i=0;_i<=__c8c;_i++) {if (_i>0) {_sb.append(" AND ");}_col=banano_getB4JKeyAt(__cd6,_i);_sb.append(_col);_opr=__cd7[_i];_sb.append(" " + _opr + " ?");}_B.__2c7=_sb.toString();_B._args=__e65;_B.__2c5=__e64;_B.__2c4="select";_B.__87="";_B._error="";_B.__57=_B.newlist(_B);_B._json="";_B.__59=0;return _B;};_B.andoroperators=function(_sm) {var _nl,_k;_nl=[];_nl.length=0;var _kKeys = Object.keys(_sm);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_nl.push("AND");}return _nl;};_B.selectwhere1=function(__cd5,__cd6,__cd7,__e63,__c89) {var __e64,__e65,_fld1,__e67,_sb,_i,__c8c,__e68,_col,_opr,_stro;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.SelectWhere1: '" + _B._tablename + "' schema is not set!");}if (is.null(__cd7)) {__cd7=_B.eqoperators(__cd6,_B);}if (is.null(__e63)) {__e63=_B.andoroperators(__cd6,_B);}__e64=_B.getmaptypes(__cd6,_B);__e65=_B.getmapvalues(__cd6,_B);if (__cd5.length==0) {__cd5.push("*");}_fld1=__cd5[0];__e67="";switch ("" + _fld1) {case "" + "*":__e67="*";break;default:__e67=_B.joinfields(",",__cd5,_B);break;}_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("SELECT " + __e67 + " FROM " + _B.escapefield(_B._tablename,_B) + " WHERE ");_i=0;__c8c=Object.keys(__cd6).length-1;for (_i=0;_i<=__c8c;_i++) {if (_i>0) {__e68=__e63[_i];_sb.append(" " + __e68 + " ");}_col=banano_getB4JKeyAt(__cd6,_i);_sb.append(_col);_opr=__cd7[_i];_sb.append(" " + _opr + " ?");}if (true && __c89.length>0) {_stro=_B.joinfields(",",__c89,_B);if (_stro.length>0) {_sb.append(" ORDER BY ").append(_stro);}}_B.__2c7=_sb.toString();_B._args=__e65;_B.__2c5=__e64;_B.__2c4="select";_B.__87="";_B._error="";_B.__57=_B.newlist(_B);_B._json="";_B.__59=0;return _B;};_B.selectwhere1wait=async function(__cd5,__cd6,__cd7,__e63,__c89) {var _db;_db=null;_db_B.__1df=_B.__1df;await BananoSQLOpen(_B.__1df);_B.selectwhere1(__cd5,__cd6,__cd7,__e63,__c89,_B);_B.__57=await BananoSQLRunExecute(_B.__2c7, _B._args,_db_B.__1df);_B.fromjson(_B);_B.__5c=_B.__57.length;_B.__59=_B.__5c;return true;};_B.selectwhereascdesc=function(__cd5,__cd6,__cd7,__c89,__e79) {var __e64,__e65,_fld1,__e67,_sb,_i,__c8c,_col,_oper,__e7a,__e7b,_obcnt,_xfld,_stro;if (Object.keys(_B.__6c).length==0) {console.log("SDUIAlaSQLE.SelectWhereAscDesc: '" + _B._tablename + "' schema is not set!");}if (is.null(__cd7)) {__cd7=_B.eqoperators(__cd6,_B);}__e64=_B.getmaptypes(__cd6,_B);__e65=_B.getmapvalues(__cd6,_B);if (__cd5.length==0) {__cd5.push("*");}_fld1=__cd5[0];__e67="";switch ("" + _fld1) {case "" + "*":__e67="*";break;default:__e67=_B.joinfields(",",__cd5,_B);break;}_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("SELECT " + __e67 + " FROM " + _B.escapefield(_B._tablename,_B) + " WHERE ");_i=0;__c8c=Object.keys(__cd6).length-1;for (_i=0;_i<=__c8c;_i++) {if (_i>0) {_sb.append(" AND ");}_col=banano_getB4JKeyAt(__cd6,_i);_oper=__cd7[_i];_sb.append(_B.escapefield(_col,_B));_sb.append(" " + _oper + " ?");}if (true && __c89.length>0) {__e7a=[];__e7a.length=0;__e7b=__c89.length-1;__e7c=0;for (_obcnt=0;_obcnt<=__e7b;_obcnt++) {_xfld=__c89[_obcnt];if (true && __e79.length>0) {if (__e79.indexOf(_xfld)>=0) {_xfld=_B.escapefield(_xfld,_B)+" DESC";__e7a.push(_xfld);}} else {__e7a.push(_B.escapefield(_xfld,_B));}}_stro=_B.join(",",__e7a,_B);if (_stro.length>0) {_sb.append(" ORDER BY ").append(_stro);}}_B.__2c7=_sb.toString();_B._args=__e65;_B.__2c5=__e64;_B.__2c4="select";return _B;};_B.selectwhereascdescwait=async function(__cd5,__cd6,__cd7,__c89,__e79) {var _db;_db=null;_db_B.__1df=_B.__1df;await BananoSQLOpen(_B.__1df);_B.selectwhereascdesc(__cd5,__cd6,__cd7,__c89,__e79,_B);_B.__57=await BananoSQLRunExecute(_B.__2c7, _B._args,_db_B.__1df);_B.fromjson(_B);_B.__5c=_B.__57.length;_B.__59=_B.__5c;return true;};_B.join=function(__cc2,_lst) {var _i,_sb,_fld;_i=0;_sb=new StringBuilder();_fld="";_sb.init();_sb.isinitialized=true;_fld=_lst[0];_sb.append(_fld);for (_i=1;_i<=_lst.length-1;_i++) {_fld=_lst[_i];_sb.append(__cc2).append(_fld);}return _sb.toString();};_B.selectall=function(__cd5,__c89) {var _fld1,__e67,_sb,_stro;if (__cd5.length==0) {__cd5.push("*");}_fld1=__cd5[0];__e67="";switch ("" + _fld1) {case "" + "*":__e67="*";break;default:__e67=_B.joinfields(",",__cd5,_B);break;}_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("SELECT " + __e67 + " FROM " + _B.escapefield(_B._tablename,_B) + "");if (true && __c89.length>0) {_stro=_B.joinfields(",",__c89,_B);if (_stro.length>0) {_sb.append(" ORDER BY ").append(_stro);}}_B.__2c7=_sb.toString();_B.__2c4="select";_B.__87="";_B._error="";_B.__57=_B.newlist(_B);_B._json="";_B.__59=0;return _B;};_B.selectallwait=async function(__cd5,__c89) {var _db;_db=null;_db_B.__1df=_B.__1df;await BananoSQLOpen(_B.__1df);_B.selectall(__cd5,__c89,_B);_B.__57=await BananoSQLRunExecute(_B.__2c7, _B._args,_db_B.__1df);_B.fromjson(_B);_B.__5c=_B.__57.length;_B.__59=_B.__5c;return true;};_B.selecteverything=function() {var __cd5,__c89;__cd5=[];__cd5.length=0;__cd5.push("*");__c89=[];__c89.length=0;_B.selectall(__cd5,__c89,_B);return true;};_B.selecteverythingwait=async function() {var __cd5,__c89,_db;__cd5=[];__cd5.length=0;__cd5.push("*");__c89=[];__c89.length=0;_db=null;_db_B.__1df=_B.__1df;await BananoSQLOpen(_B.__1df);_B.selectall(__cd5,__c89,_B);_B.__57=await BananoSQLRunExecute(_B.__2c7, _B._args,_db_B.__1df);_B.fromjson(_B);_B.__5c=_B.__57.length;_B.__59=_B.__5c;return _B.__57;};_B.selectallascdesc=function(__cd5,__c89,__e79) {var _fld1,__e67,_sb,__e7a,__e7b,_obcnt,_xfld,_stro;if (__cd5.length==0) {__cd5.push("*");}_fld1=__cd5[0];__e67="";switch ("" + _fld1) {case "" + "*":__e67="*";break;default:__e67=_B.joinfields(",",__cd5,_B);break;}_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("SELECT " + __e67 + " FROM " + _B.escapefield(_B._tablename,_B) + "");if (true && __c89.length>0) {__e7a=[];__e7a.length=0;__e7b=__c89.length-1;__e7c=0;for (_obcnt=0;_obcnt<=__e7b;_obcnt++) {_xfld=__c89[_obcnt];if (true && __e79.length>0) {if (__e79.indexOf(_xfld)>=0) {_xfld=_B.escapefield(_xfld,_B)+" DESC";__e7a.push(_xfld);}} else {__e7a.push(_B.escapefield(_xfld,_B));}}_stro=_B.join(",",__e7a,_B);if (_stro.length>0) {_sb.append(" ORDER BY ").append(_stro);}}_B.__2c7=_sb.toString();_B.__2c4="select";_B.__87="";_B._error="";_B.__57=_B.newlist(_B);_B._json="";_B.__59=0;};_B.setposition=function(_pos) {if (_B.__57.length>_pos) {_B.__5a=_B.__57[_pos];_B.__5d=_pos;} else {_B.__5d=-1;_B.__5a={};}_B.__a23=JSON.stringify(_B.__5a);};_B.getposition=function() {return _B.__5d;};_B.getint=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B.__5a)) { return 0;}if ((_fld in _B.__5a)) {_obj=_B.__5a[_fld]===undefined? 0:_B.__5a[_fld];_obj=_banano_sithasodaisyalasqle_modala.cint(_obj);return _obj;} else {return 0;}};_B.getlong=function(_fld) {return _B.getint(_fld,_B);};_B.getstring=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B.__5a)) { return "";}if ((_fld in _B.__5a)) {_obj=_B.__5a[_fld]===undefined? "":_B.__5a[_fld];_obj=_B.cstr(_obj,_B);return _obj;} else {return "";}};_B.getboolean=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B.__5a)) { return false;}if ((_fld in _B.__5a)) {_obj=_B.__5a[_fld]===undefined? false:_B.__5a[_fld];_obj=_banano_sithasodaisyalasqle_modala.cbool(_obj);return _obj;} else {return false;}};_B.getdouble=function(_fld) {var _obj;_fld=_fld.toLowerCase();if ((_fld in _B.__5a)) {_obj=_B.__5a[_fld]===undefined? 0:_B.__5a[_fld];_obj=_banano_sithasodaisyalasqle_modala.cdbl(_obj);return _obj;} else {return 0;}};_B.getrecord=function(_pos) {var _rec;_rec=_B.__57[_pos];return _rec;};_B.movestart=function() {_B.__5d=-1;};_B.movefirst=function() {_B.setposition(0,_B);};_B.movelast=function() {_B.setposition(_B.__5c-1,_B);};_B.moveprevious=function() {_B.__5d=_B.__5d-1;if (_B.__5d<0) {_B.__5d=0;}_B.setposition(_B.__5d,_B);};_B.movenext=function() {_B.__5d=_B.__5d+1;if (_B.__5d>_B.__5c) {_B.__5d=_B.__5c-1;}_B.setposition(_B.__5d,_B);};}function banano_sithasodaisyalasqle_sduikeystore() {var _B=this;_B._db=null;_B._sdb="";_B.__53={};_B._ops=[];_B.__55=[];_B._flds=[];_B.__5c=0;_B.__5d=0;_B.__5a={};_B.__57=[];_B.__2ce=false;_B.initialize=async function(__3e4) {var _xname;_B._sdb=__3e4;_xname=__3e4;_B._db_xname=_xname;await BananoSQLOpen(_xname);await _B.createtable(_B);_B.__53={};_B._ops.length=0;_B.__55.length=0;_B._flds.length=0;_B.__5a={};_B.__5d=-1;_B.__57=await _B.records(_B);_B.__2ce=false;return _B;};_B.setfield=function(__cac,__cb2) {_B.__5a[__cac]=__cb2;return _B;};_B.recordfrommap=function(_sm) {var _k,_v;_B.__5a={};var _kKeys = Object.keys(_sm);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_sm[_k];_B.__5a[_k]=_v;}};_B.firstrecord=function() {var _rec;_rec=_B.__57[0];return _rec;};_B.clear_where=function() {_B.__53={};_B._ops.length=0;_B.__55.length=0;_B._flds.length=0;return _B;};_B.add_field=function(_fld) {_B._flds.push(_fld);return _B;};_B.add_fields=function(_fields) {var _fld;for (var _fldindex=0;_fldindex<_fields.length;_fldindex++) {_fld=_fields[_fldindex];_B.add_field(_fld,_B);}return _B;};_B.add_where=function(_fld,__c86,_value) {_B.__53[_fld]=_value;_B._ops.push(__c86);return _B;};_B.add_order_by=function(_fld) {_B.__55.push(_fld);return _B;};_B.createtable=async function() {var _rs;_rs=(typeof banano_sithasodaisyalasqle_sduialasqle === 'function') ? new banano_sithasodaisyalasqle_sduialasqle(): null;_rs.initialize(_B._sdb,"main","k","");_rs.schemaaddtext(["k","v"]);_rs.schemacreatetable();_rs.__57=await BananoSQLRunExecute(_rs.__2c7, _rs._args,_B._db_xname);_rs.fromjson();_rs=null;};_B.deleteall=async function() {var _rs;_rs=(typeof banano_sithasodaisyalasqle_sduialasqle === 'function') ? new banano_sithasodaisyalasqle_sduialasqle(): null;_rs.initialize(_B._sdb,"main","k","");_rs.schemaaddtext(["k","v"]);_rs.droptable();_rs.__57=await BananoSQLRunExecute(_rs.__2c7, _rs._args,_B._db_xname);_rs.fromjson();_rs=null;await _B.createtable(_B);};_B.containskey=async function(_key) {var _rs,_fw;_rs=(typeof banano_sithasodaisyalasqle_sduialasqle === 'function') ? new banano_sithasodaisyalasqle_sduialasqle(): null;_rs.initialize(_B._sdb,"main","k","");_rs.schemaaddtext(["k","v"]);_fw={};_fw["k"]=_key;_rs.selectwhere(["k"],_fw,["="],["k"]);_rs.__57=await BananoSQLRunExecute(_rs.__2c7, _rs._args,_B._db_xname);_rs.fromjson();if (_rs.__59>0) {return true;} else {return false;}};_B.select_where=function() {return _B.findwhereorderby(_B._flds,_B.__53,_B._ops,_B.__55,_B);};_B.put=async function(_key,_value) {var __d85,__12d8,_rs;__d85=await _B.containskey(_key,_B);__12d8=JSON.stringify(_value);_rs=(typeof banano_sithasodaisyalasqle_sduialasqle === 'function') ? new banano_sithasodaisyalasqle_sduialasqle(): null;_rs.initialize(_B._sdb,"main","k","");_rs.schemaaddtext(["k","v"]);_rs.preparerecord();_rs.setfield("k",_key);_rs.setfield("v",__12d8);if (__d85) {_rs.update(_key);} else {_rs.insert();}_rs.__57=await BananoSQLRunExecute(_rs.__2c7, _rs._args,_B._db_xname);_rs.fromjson();_rs=null;return true;};_B.get=async function(_key) {var __f37,__12d9,_rs,_fw;__f37=null;__12d9="";_rs=(typeof banano_sithasodaisyalasqle_sduialasqle === 'function') ? new banano_sithasodaisyalasqle_sduialasqle(): null;_rs.initialize(_B._sdb,"main","k","");_rs.schemaaddtext(["k","v"]);_fw={};_fw["k"]=_key;_rs.selectwhere(["v"],_fw,["="],["k"]);_rs.__57=await BananoSQLRunExecute(_rs.__2c7, _rs._args,_B._db_xname);_rs.fromjson();if (_rs.nextrow()) {_rs.movefirst();__f37=_rs.getstring("v");__12d9=JSON.parse(__f37);__f37=__12d9;}_rs=null;return __f37;};_B.getmapasync=async function(_keys) {var _sb,_i,_rs,_m,_k,_v;_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_sb.append("SELECT k, v FROM main WHERE ");for (_i=0;_i<=_keys.length-1;_i++) {if (_i>0) {_sb.append(" OR ");}_sb.append(" k = ? ");}_rs=(typeof banano_sithasodaisyalasqle_sduialasqle === 'function') ? new banano_sithasodaisyalasqle_sduialasqle(): null;_rs.initialize(_B._sdb,"main","k","");_rs.schemaaddtext(["k","v"]);_rs.execute(_sb.toString());_rs.__57=await BananoSQLRunExecute(_rs.__2c7, _keys,_B._db_xname);_rs.fromjson();_m={};_m={};while (_rs.nextrow()) {_k=_rs.getstring("k");_v=_rs.getstring("v");_v=JSON.parse(_v);_m[_k]=_v;}_rs=null;return _m;};_B.getmapallasync=async function() {var _rs,_m,_k,_v;_rs=(typeof banano_sithasodaisyalasqle_sduialasqle === 'function') ? new banano_sithasodaisyalasqle_sduialasqle(): null;_rs.initialize(_B._sdb,"main","k","");_rs.schemaaddtext(["k","v"]);_rs.selecteverything();_rs.__57=await BananoSQLRunExecute(_rs.__2c7, _rs._args,_B._db_xname);_rs.fromjson();_m={};_m={};while (_rs.nextrow()) {_k=_rs.getstring("k");_v=_rs.getstring("v");_v=JSON.parse(_v);_m[_k]=_v;}_rs=null;return _m;};_B.records=async function() {var _rs,_v;_rs=(typeof banano_sithasodaisyalasqle_sduialasqle === 'function') ? new banano_sithasodaisyalasqle_sduialasqle(): null;_rs.initialize(_B._sdb,"main","k","");_rs.schemaaddtext(["k","v"]);_rs.selecteverything();_rs.__57=await BananoSQLRunExecute(_rs.__2c7, _rs._args,_B._db_xname);_rs.fromjson();_B.__57.length=0;while (_rs.nextrow()) {_v=_rs.getstring("v");_v=JSON.parse(_v);_B.__57.push(_v);}_B.__5d=-1;_B.__5c=_B.__57.length;return _B.__57;};_B.findwhere=async function(__c87,__c88) {var _sb,_args,_recs,_i,__c8c,_col,_val,_opr,_sout,_res;_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_args=[];_args.length=0;_recs=await _B.records(_B);_args.push(_recs);_sb.append("SELECT * FROM ? WHERE ");_i=0;__c8c=Object.keys(__c87).length-1;for (_i=0;_i<=__c8c;_i++) {if (_i>0) {_sb.append(" AND ");}_col=banano_getB4JKeyAt(__c87,_i);_val=banano_getB4JValueAt(__c87,_i);_opr=__c88[_i];_sb.append(_col);_sb.append(" " + _opr + " ?");_args.push(_val);}_sout=_sb.toString();_res=await BananoSQLRunExecute(_sout, _args,_B._db_xname);return _res;};_B.findwhereorderby=async function(_fields,__c87,__c88,__c89) {var _sb,_args,_recs,_fld1,__e67,_i,__c8c,_col,_val,_opr,_stro,_sout,_res;_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_args=[];_args.length=0;_recs=await _B.records(_B);_args.push(_recs);if (_fields.length==0) {_fields.push("*");}_fld1=_fields[0];__e67="";switch ("" + _fld1) {case "" + "*":__e67="*";break;default:__e67=_B.joinfields(",",_fields,_B);break;}_sb.append("SELECT " + __e67 + " FROM ? WHERE ");_i=0;__c8c=Object.keys(__c87).length-1;for (_i=0;_i<=__c8c;_i++) {if (_i>0) {_sb.append(" AND ");}_col=banano_getB4JKeyAt(__c87,_i);_val=banano_getB4JValueAt(__c87,_i);_opr=__c88[_i];_sb.append(_col);_sb.append(" " + _opr + " ?");_args.push(_val);}if (true && __c89.length>0) {_stro=_B.joinfields(",",__c89,_B);if (_stro.length>0) {_sb.append(" ORDER BY ").append(_stro);}}_sout=_sb.toString();_res=await BananoSQLRunExecute(_sout, _args,_B._db_xname);return _res;};_B.escapefield=function(_f) {if (_B.__2ce) {return "[" + _f + "]";} else {return _f;}};_B.joinfields=function(__cc2,_lst) {var _i,_sb,_fld;_i=0;_sb=new StringBuilder();_fld="";_sb.init();_sb.isinitialized=true;_fld=_lst[0];_fld=_B.escapefield(_fld,_B);_sb.append(_fld);for (_i=1;_i<=_lst.length-1;_i++) {_fld=_lst[_i];_fld=_B.escapefield(_fld,_B);_sb.append(__cc2).append(_fld);}return _sb.toString();};_B.deletewhere=async function(__cb8,__c87,__c88) {var _recs,_rec,__cba;_recs=await _B.findwhere(__c87,__c88,_B);for (var _recindex=0;_recindex<_recs.length;_recindex++) {_rec=_recs[_recindex];__cba=_rec[__cb8];await _B.remove(__cba,_B);}return true;};_B.putmapasync=async function(__d91) {var _k,_v;var _kKeys = Object.keys(__d91);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=__d91[_k];await _B.put(_k,_v,_B);}return true;};_B.getdefault=async function(_key,__d92) {var _res;_res=await _B.get(_key,_B);if (_res==null) { return __d92;}return _res;};_B.listkeys=async function() {var _rs,_res;_rs=(typeof banano_sithasodaisyalasqle_sduialasqle === 'function') ? new banano_sithasodaisyalasqle_sduialasqle(): null;_rs.initialize(_B._sdb,"main","k","");_rs.schemaaddtext(["k","v"]);_rs.selectall(["k"],["k"]);_rs.__57=await BananoSQLRunExecute(_rs.__2c7, _rs._args,_B._db_xname);_rs.fromjson();_res=[];_res.length=0;while (_rs.nextrow()) {_res.push(_rs.getstring("k"));}_rs=null;return _res;};_B.remove=async function(_key) {var _rs;_rs=(typeof banano_sithasodaisyalasqle_sduialasqle === 'function') ? new banano_sithasodaisyalasqle_sduialasqle(): null;_rs.initialize(_B._sdb,"main","k","");_rs.schemaaddtext(["k","v"]);_rs.delete(_key);_rs.__57=await BananoSQLRunExecute(_rs.__2c7, _rs._args,_B._db_xname);_rs.fromjson();_rs=null;};_B.nextrow=function() {var __cb4;_B.__5d=_B.__5d+1;__cb4=_B.__5c-1;if (_B.__5d>__cb4) {return false;} else {_B.setposition(_B.__5d,_B);return true;}};_B.setrecord=function(_rec) {var _k,_v;var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_rec[_k];_B.setfield(_k,_v,_B);}};_B.preparerecord=function() {_B.__5a={};};_B.setposition=function(_pos) {if (_B.__57.length>_pos) {_B.__5a=_B.__57[_pos];_B.__5d=_pos;} else {_B.__5d=-1;_B.__5a={};}};_B.getposition=function() {return _B.__5d;};_B.getint=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B.__5a)) { return 0;}if ((_fld in _B.__5a)) {_obj=_B.__5a[_fld]===undefined? 0:_B.__5a[_fld];_obj=_banano_sithasodaisyalasqle_modala.cint(_obj);return _obj;} else {return 0;}};_B.getlong=function(_fld) {return _B.getint(_fld,_B);};_B.getstring=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B.__5a)) { return "";}if ((_fld in _B.__5a)) {_obj=_B.__5a[_fld]===undefined? "":_B.__5a[_fld];_obj=_banano_sithasodaisyalasqle_modala.cstr(_obj);return _obj;} else {return "";}};_B.getboolean=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B.__5a)) { return false;}if ((_fld in _B.__5a)) {_obj=_B.__5a[_fld]===undefined? false:_B.__5a[_fld];_obj=_banano_sithasodaisyalasqle_modala.cbool(_obj);return _obj;} else {return false;}};_B.getdouble=function(_fld) {var _obj;_fld=_fld.toLowerCase();if ((_fld in _B.__5a)) {_obj=_B.__5a[_fld]===undefined? 0:_B.__5a[_fld];_obj=_banano_sithasodaisyalasqle_modala.cdbl(_obj);return _obj;} else {return 0;}};_B.getrecord=function(_pos) {var _rec;_rec=_B.__57[_pos];return _rec;};_B.movestart=function() {_B.__5d=-1;};_B.movefirst=function() {_B.setposition(0,_B);};_B.movelast=function() {_B.setposition(_B.__5c-1,_B);};_B.moveprevious=function() {_B.__5d=_B.__5d-1;if (_B.__5d<0) {_B.__5d=0;}_B.setposition(_B.__5d,_B);};_B.movenext=function() {_B.__5d=_B.__5d+1;if (_B.__5d>_B.__5c) {_B.__5d=_B.__5c-1;}_B.setposition(_B.__5d,_B);};}function banano_sithasodaisyalasqle_sithasodaisyalasqe() {var _B=this;}