/*! Chartkick.js v4.2.0 | MIT License */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Chartkick=e()}(this,(function(){"use strict";function t(t){return"[object Array]"===Object.prototype.toString.call(t)}function e(t){return t instanceof Function}function r(t){return"[object Object]"===Object.prototype.toString.call(t)&&!e(t)&&t instanceof Object}function n(e,o){var a;for(a in o)"__proto__"!==a&&(r(o[a])||t(o[a])?(r(o[a])&&!r(e[a])&&(e[a]={}),t(o[a])&&!t(e[a])&&(e[a]=[]),n(e[a],o[a])):void 0!==o[a]&&(e[a]=o[a]))}function o(t,e){var r={};return n(r,t),n(r,e),r}var a=/^(\d\d\d\d)(-)?(\d\d)(-)?(\d\d)$/i;function i(t){return""+t}function s(t){return parseFloat(t)}function l(t){var e,r,n,o;if("object"!=typeof t)if("number"==typeof t)t=new Date(1e3*t);else{if(e=(t=i(t)).match(a))return r=parseInt(e[1],10),n=parseInt(e[3],10)-1,o=parseInt(e[5],10),new Date(r,n,o);var s=t.replace(/ /,"T").replace(" ","").replace("UTC","Z");t=new Date(Date.parse(s)||t)}return t}function c(e){if(!t(e)){var r,n=[];for(r in e)e.hasOwnProperty(r)&&n.push([r,e[r]]);e=n}return e}function p(t,e,r,n,a,i,s,l){return function(c,p,u){var d=c.data,h=o({},t);return h=o(h,u||{}),(c.singleSeriesFormat||"legend"in p)&&e(h,p.legend,c.singleSeriesFormat),p.title&&r(h,p.title),"min"in p?n(h,p.min):function(t){var e,r,n;for(e=0;e<t.length;e++)for(n=t[e].data,r=0;r<n.length;r++)if(n[r][1]<0)return!0;return!1}(d)||n(h,0),p.max&&a(h,p.max),"stacked"in p&&i(h,p.stacked),p.colors&&(h.colors=p.colors),p.xtitle&&s(h,p.xtitle),p.ytitle&&l(h,p.ytitle),h=o(h,p.library||{})}}function u(t,e){return t[0].getTime()-e[0].getTime()}function d(t,e){return t[0]-e[0]}function h(t,e){return t-e}function f(t){return 0===t.getMilliseconds()&&0===t.getSeconds()}function y(t){return f(t)&&0===t.getMinutes()}function m(t){return y(t)&&0===t.getHours()}function g(t,e){return m(t)&&t.getDay()===e}function v(t){return m(t)&&1===t.getDate()}function z(t){return v(t)&&0===t.getMonth()}function b(t){return!isNaN(l(t))&&i(t).length>=6}function M(t){return"number"==typeof t}var x=["bytes","KB","MB","GB","TB","PB","EB"];function w(t,e,r,n){t=t||"",r.prefix&&(e<0&&(e*=-1,t+="-"),t+=r.prefix);var o=r.suffix||"",a=r.precision,s=r.round;if(r.byteScale){var l,c=n?r.byteScale:e;c>=0x1000000000000000?(e/=0x1000000000000000,l=6):c>=0x4000000000000?(e/=0x4000000000000,l=5):c>=1099511627776?(e/=1099511627776,l=4):c>=1073741824?(e/=1073741824,l=3):c>=1048576?(e/=1048576,l=2):c>=1024?(e/=1024,l=1):l=0,void 0===a&&void 0===s&&(e>=1023.5&&l<x.length-1&&(e=1,l+=1),a=e>=1e3?4:3),o=" "+x[l]}if(void 0!==a&&void 0!==s)throw Error("Use either round or precision, not both");if(!n&&(void 0!==a&&(e=e.toPrecision(a),r.zeros||(e=parseFloat(e))),void 0!==s))if(s<0){var p=Math.pow(10,-1*s);e=parseInt((1*e/p).toFixed(0))*p}else e=e.toFixed(s),r.zeros||(e=parseFloat(e));if(r.thousands||r.decimal){var u=(e=i(e)).split(".");e=u[0],r.thousands&&(e=e.replace(/\B(?=(\d{3})+(?!\d))/g,r.thousands)),u.length>1&&(e+=(r.decimal||".")+u[1])}return t+e+o}function C(t,e,r){return r in e?e[r]:r in t.options?t.options[r]:null}var _={maintainAspectRatio:!1,animation:!1,plugins:{legend:{},tooltip:{displayColors:!1,callbacks:{}},title:{font:{size:20},color:"#333"}},interaction:{}},A={scales:{y:{ticks:{maxTicksLimit:4},title:{font:{size:16},color:"#333"},grid:{}},x:{grid:{drawOnChartArea:!1},title:{font:{size:16},color:"#333"},time:{},ticks:{}}}},k=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#651067"],S=function(t,e,r){void 0!==e?(t.plugins.legend.display=!!e,e&&!0!==e&&(t.plugins.legend.position=e)):r&&(t.plugins.legend.display=!1)},T=function(t,e){t.plugins.title.display=!0,t.plugins.title.text=e},D=function(t,e){null!==e&&(t.scales.x.min=s(e))},O=function(t,e){t.scales.x.max=s(e)},E=function(t,e){t.scales.x.stacked=!!e,t.scales.y.stacked=!!e},L=function(t,e){t.scales.x.title.display=!0,t.scales.x.title.text=e},B=function(t,e){t.scales.y.title.display=!0,t.scales.y.title.text=e},F=function(t,e){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?"rgba("+parseInt(r[1],16)+", "+parseInt(r[2],16)+", "+parseInt(r[3],16)+", "+e+")":t},j=function(t){return null!=t},N=function(e,r,n){var o={prefix:e.options.prefix,suffix:e.options.suffix,thousands:e.options.thousands,decimal:e.options.decimal,precision:e.options.precision,round:e.options.round,zeros:e.options.zeros};if(e.options.bytes){var a=e.data;"pie"===n&&(a=[{data:a}]);for(var i=0,s=0;s<a.length;s++)for(var l=a[s],c=0;c<l.data.length;c++)l.data[c][1]>i&&(i=l.data[c][1]);for(var p=1;i>=1024;)p*=1024,i/=1024;o.byteScale=p}if("pie"!==n){var u=r.scales.y;"bar"===n&&(u=r.scales.x),o.byteScale&&(u.ticks.stepSize||(u.ticks.stepSize=o.byteScale/2),u.ticks.maxTicksLimit||(u.ticks.maxTicksLimit=4)),u.ticks.callback||(u.ticks.callback=function(t){return w("",t,o,!0)})}if(!r.plugins.tooltip.callbacks.label)if("scatter"===n)r.plugins.tooltip.callbacks.label=function(t){var e=t.dataset.label||"";return e&&(e+=": "),e+"("+t.label+", "+t.formattedValue+")"};else if("bubble"===n)r.plugins.tooltip.callbacks.label=function(t){var e=t.dataset.label||"";e&&(e+=": ");var r=t.raw;return e+"("+r.x+", "+r.y+", "+r.v+")"};else if("pie"===n)r.plugins.tooltip.callbacks.label=function(e){var r=e.label;return t(r)?(r=r.slice())[0]+=": ":r+=": ",w(r,e.parsed,o)};else{var d="bar"===n?"x":"y";r.plugins.tooltip.callbacks.label=function(t){if(null!==t.parsed[d]){var e=t.dataset.label||"";return e&&(e+=": "),w(e,t.parsed[d],o)}}}},H=p(o(_,A),S,T,(function(t,e){null!==e&&(t.scales.y.min=s(e))}),(function(t,e){t.scales.y.max=s(e)}),E,L,B),R=function(e,r,n){var a,i=[],c=[],p=e.options.colors||k,u=!0,d=!0,b=!0,M=!0,x=!0,w=!0,_=e.data,A=0;if("bubble"===n)for(var S=0;S<_.length;S++)for(var T=_[S],D=0;D<T.data.length;D++)T.data[D][2]>A&&(A=T.data[D][2]);var O,E,L,B,N,H,R,I=[],P=[];if("bar"===n||"column"===n||"number"!==e.xtype&&"bubble"!==e.xtype){var U,W,V=[];for(O=0;O<_.length;O++)for(L=_[O],E=0;E<L.data.length;E++)B=L.data[E],I[N="datetime"==e.xtype?B[0].getTime():B[0]]||(I[N]=new Array(_.length)),I[N][O]=s(B[1]),-1===V.indexOf(N)&&V.push(N);for("datetime"!==e.xtype&&"number"!==e.xtype||V.sort(h),E=0;E<_.length;E++)P.push([]);for(W=0;W<V.length;W++)for(O=V[W],"datetime"===e.xtype?(U=new Date(s(O)),u=u&&m(U),a||(a=U.getDay()),d=d&&g(U,a),b=b&&v(U),M=M&&z(U),x=x&&y(U),w=w&&f(U)):U=O,c.push(U),E=0;E<_.length;E++)P[E].push(void 0===I[O][E]?null:I[O][E])}else for(var Q=0;Q<_.length;Q++){for(var J=_[Q],G=[],K=0;K<J.data.length;K++){var X={x:s(J.data[K][0]),y:s(J.data[K][1])};"bubble"===n&&(X.r=20*s(J.data[K][2])/A,X.v=J.data[K][2]),G.push(X)}P.push(G)}for(O=0;O<_.length;O++){if(L=_[O],!e.options.colors||!e.singleSeriesFormat||"bar"!==n&&"column"!==n||L.color||!t(e.options.colors)||t(e.options.colors[0]))H=L.color||p[O],R="line"!==n?F(H,.5):H;else{H=p,R=[];for(var Y=0;Y<p.length;Y++)R[Y]=F(H[Y],.5)}var Z={label:L.name||"",data:P[O],fill:"area"===n,borderColor:H,backgroundColor:R,borderWidth:2},q="line"===n||"area"===n||"scatter"===n||"bubble"===n;q&&(Z.pointBackgroundColor=H,Z.pointHoverBackgroundColor=H,Z.pointHitRadius=50),"bubble"===n&&(Z.pointBackgroundColor=R,Z.pointHoverBackgroundColor=R,Z.pointHoverBorderWidth=2),L.stack&&(Z.stack=L.stack),!1===C(e,L,"curve")?Z.tension=0:q&&(Z.tension=.4),!1===C(e,L,"points")&&(Z.pointRadius=0,Z.pointHoverRadius=0),Z=o(Z,e.options.dataset||{}),Z=o(Z,L.library||{}),Z=o(Z,L.dataset||{}),i.push(Z)}var $=e.options.xmin,tt=e.options.xmax;if("datetime"===e.xtype?(j($)&&(r.scales.x.min=l($).getTime()),j(tt)&&(r.scales.x.max=l(tt).getTime())):"number"===e.xtype&&(j($)&&(r.scales.x.min=$),j(tt)&&(r.scales.x.max=tt)),"datetime"===e.xtype&&0===c.length&&(j($)&&c.push(l($)),j(tt)&&c.push(l(tt)),u=!1,d=!1,b=!1,M=!1,x=!1,w=!1),"datetime"===e.xtype&&c.length>0){var et=(j($)?l($):c[0]).getTime(),rt=(j(tt)?l(tt):c[0]).getTime();for(O=1;O<c.length;O++){var nt=c[O].getTime();nt<et&&(et=nt),nt>rt&&(rt=nt)}var ot,at=(rt-et)/864e5;if(!r.scales.x.time.unit)if(M||at>3650?(r.scales.x.time.unit="year",ot=365):b||at>300?(r.scales.x.time.unit="month",ot=30):u||at>10?(r.scales.x.time.unit="day",ot=1):x||at>.5?(r.scales.x.time.displayFormats={hour:"MMM d, h a"},r.scales.x.time.unit="hour",ot=1/24):w&&(r.scales.x.time.displayFormats={minute:"h:mm a"},r.scales.x.time.unit="minute",ot=1/24/60),ot&&at>0){var it=e.element.offsetWidth;if(it>0){var st=Math.ceil(at/ot/(it/100));d&&1===ot&&(st=7*Math.ceil(st/7)),r.scales.x.time.stepSize=st}}r.scales.x.time.tooltipFormat||(u?r.scales.x.time.tooltipFormat="PP":x?r.scales.x.time.tooltipFormat="MMM d, h a":w&&(r.scales.x.time.tooltipFormat="h:mm a"))}return{labels:c,datasets:i}},I=function(t){this.name="chartjs",this.library=t};I.prototype.renderLineChart=function(t,e){var r={};!t.options.max&&function(t){var e,r,n;for(e=0;e<t.length;e++)for(n=t[e].data,r=0;r<n.length;r++)if(0!=n[r][1])return!1;return!0}(t.data)&&(r.max=1);var n=H(t,o(r,t.options));N(t,n,e);var a=R(t,n,e||"line");"number"===t.xtype?(n.scales.x.type=n.scales.x.type||"linear",n.scales.x.position=n.scales.x.position||"bottom"):n.scales.x.type="string"===t.xtype?"category":"time",this.drawChart(t,"line",a,n)},I.prototype.renderPieChart=function(t){var e=o({},_);t.options.donut&&(e.cutout="50%"),"legend"in t.options&&S(e,t.options.legend),t.options.title&&T(e,t.options.title),e=o(e,t.options.library||{}),N(t,e,"pie");for(var r=[],n=[],a=0;a<t.data.length;a++){var i=t.data[a];r.push(i[0]),n.push(i[1])}var s={data:n,backgroundColor:t.options.colors||k},l={labels:r,datasets:[s=o(s,t.options.dataset||{})]};this.drawChart(t,"pie",l,e)},I.prototype.renderColumnChart=function(t,e){var r;if("bar"===e){var n=o(_,A);n.indexAxis="y",n.scales.x.grid.drawOnChartArea=!0,n.scales.y.grid.drawOnChartArea=!1,delete n.scales.y.ticks.maxTicksLimit,r=p(n,S,T,D,O,E,L,B)(t,t.options)}else r=H(t,t.options);N(t,r,e);var a=R(t,r,"column");"bar"!==e&&function(t,e,r){var n=Math.ceil(t.element.offsetWidth/4/e.labels.length);n>25?n=25:n<10&&(n=10),r.scales.x.ticks.callback||(r.scales.x.ticks.callback=function(t){return(t=i(this.getLabelForValue(t))).length>n?t.substring(0,n-2)+"...":t})}(t,a,r),this.drawChart(t,"bar",a,r)},I.prototype.renderAreaChart=function(t){this.renderLineChart(t,"area")},I.prototype.renderBarChart=function(t){this.renderColumnChart(t,"bar")},I.prototype.renderScatterChart=function(t,e){e=e||"scatter";var r=H(t,t.options);N(t,r,e),"showLine"in r||(r.showLine=!1);var n=R(t,r,e);r.scales.x.type=r.scales.x.type||"linear",r.scales.x.position=r.scales.x.position||"bottom","mode"in r.interaction||(r.interaction.mode="nearest"),this.drawChart(t,e,n,r)},I.prototype.renderBubbleChart=function(t){this.renderScatterChart(t,"bubble")},I.prototype.destroy=function(t){t.chart&&t.chart.destroy()},I.prototype.drawChart=function(t,e,r,n){if(this.destroy(t),!t.destroyed){var o={type:e,data:r,options:n};t.options.code&&window.console.log("new Chart(ctx, "+JSON.stringify(o)+");"),t.element.innerHTML="<canvas></canvas>";var a=t.element.getElementsByTagName("CANVAS")[0];t.chart=new this.library(a,o)}};var P={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},area:{},series:{marker:{}}},time:{useUTC:!1}},U=function(t,e,r){void 0!==e?(t.legend.enabled=!!e,e&&!0!==e&&("top"===e||"bottom"===e?t.legend.verticalAlign=e:(t.legend.layout="vertical",t.legend.verticalAlign="middle",t.legend.align=e))):r&&(t.legend.enabled=!1)},W=function(t,e){t.title.text=e},V=p(P,U,W,(function(t,e){t.yAxis.min=e}),(function(t,e){t.yAxis.max=e}),(function(t,e){var r=e?!0===e?"normal":e:null;t.plotOptions.series.stacking=r,t.plotOptions.area.stacking=r,t.plotOptions.areaspline.stacking=r}),(function(t,e){t.xAxis.title.text=e}),(function(t,e){t.yAxis.title.text=e})),Q=function(e,r,n){var o={prefix:e.options.prefix,suffix:e.options.suffix,thousands:e.options.thousands,decimal:e.options.decimal,precision:e.options.precision,round:e.options.round,zeros:e.options.zeros};"pie"===n||t(r.yAxis)||r.yAxis.labels.formatter||(r.yAxis.labels.formatter=function(){return w("",this.value,o)}),r.tooltip.pointFormatter||r.tooltip.pointFormat||(r.tooltip.pointFormatter=function(){return'<span style="color:'+this.color+'">●</span> '+w(this.series.name+": <b>",this.y,o)+"</b><br/>"})},J=function(t){this.name="highcharts",this.library=t};J.prototype.renderLineChart=function(t,e){var r={};"areaspline"===(e=e||"spline")&&(r={plotOptions:{areaspline:{stacking:"normal"},area:{stacking:"normal"},series:{marker:{enabled:!1}}}}),!1===t.options.curve&&("areaspline"===e?e="area":"spline"===e&&(e="line"));var n,o,a,i=V(t,t.options,r);"number"===t.xtype?i.xAxis.type=i.xAxis.type||"linear":i.xAxis.type="string"===t.xtype?"category":"datetime",i.chart.type||(i.chart.type=e),Q(t,i,e);var s=t.data;for(o=0;o<s.length;o++){if(s[o].name=s[o].name||"Value",n=s[o].data,"datetime"===t.xtype)for(a=0;a<n.length;a++)n[a][0]=n[a][0].getTime();s[o].marker={symbol:"circle"},!1===t.options.points&&(s[o].marker.enabled=!1)}this.drawChart(t,s,i)},J.prototype.renderScatterChart=function(t){var e=V(t,t.options,{});e.chart.type="scatter",this.drawChart(t,t.data,e)},J.prototype.renderPieChart=function(t){var e=o(P,{});t.options.colors&&(e.colors=t.options.colors),t.options.donut&&(e.plotOptions={pie:{innerSize:"50%"}}),"legend"in t.options&&U(e,t.options.legend),t.options.title&&W(e,t.options.title);var r=o(e,t.options.library||{});Q(t,r,"pie");var n=[{type:"pie",name:t.options.label||"Value",data:t.data}];this.drawChart(t,n,r)},J.prototype.renderColumnChart=function(t,e){e=e||"column";var r,n,o,a,i=t.data,s=V(t,t.options),l=[],c=[];for(s.chart.type=e,Q(t,s,e),r=0;r<i.length;r++)for(o=i[r],n=0;n<o.data.length;n++)l[(a=o.data[n])[0]]||(l[a[0]]=new Array(i.length),c.push(a[0])),l[a[0]][r]=a[1];"number"===t.xtype&&c.sort(h),s.xAxis.categories=c;var p,u=[];for(r=0;r<i.length;r++){for(a=[],n=0;n<c.length;n++)a.push(l[c[n]][r]||0);p={name:i[r].name||"Value",data:a},i[r].stack&&(p.stack=i[r].stack),u.push(p)}this.drawChart(t,u,s)},J.prototype.renderBarChart=function(t){this.renderColumnChart(t,"bar")},J.prototype.renderAreaChart=function(t){this.renderLineChart(t,"areaspline")},J.prototype.destroy=function(t){t.chart&&t.chart.destroy()},J.prototype.drawChart=function(t,e,r){this.destroy(t),t.destroyed||(r.chart.renderTo=t.element.id,r.series=e,t.options.code&&window.console.log("new Highcharts.Chart("+JSON.stringify(r)+");"),t.chart=new this.library.Chart(r))};var G={},K=[],X={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},Y=function(t,e,r){var n;void 0!==e?(n=e?!0===e?"right":e:"none",t.legend.position=n):r&&(t.legend.position="none")},Z=function(t,e){t.title=e,t.titleTextStyle={color:"#333",fontSize:"20px"}},q=function(t,e){t.hAxis.viewWindow.min=e},$=function(t,e){t.hAxis.viewWindow.max=e},tt=function(t,e){t.isStacked=e||!1},et=function(t,e){t.hAxis.title=e,t.hAxis.titleTextStyle.italic=!1},rt=function(t,e){t.vAxis.title=e,t.vAxis.titleTextStyle.italic=!1},nt=p(X,Y,Z,(function(t,e){t.vAxis.viewWindow.min=e}),(function(t,e){t.vAxis.viewWindow.max=e}),tt,et,rt),ot=function(t){this.name="google",this.library=t};function at(t,e){var r,n,o=[];if(n="number"===e?s:"datetime"===e?l:i,"bubble"===e)for(r=0;r<t.length;r++)o.push([s(t[r][0]),s(t[r][1]),s(t[r][2])]);else for(r=0;r<t.length;r++)o.push([n(t[r][0]),s(t[r][1])]);return"datetime"===e?o.sort(u):"number"===e&&o.sort(d),o}function it(t,e){var r,n,o;for(r=0;r<t.length;r++)for(o=c(t[r].data),n=0;n<o.length;n++)if(!e(o[n][0]))return!1;return!0}function st(e,r,n){var o,a=e.options,i=e.rawData;for(e.singleSeriesFormat=!t(i)||"object"!=typeof i[0]||t(i[0]),e.singleSeriesFormat&&(i=[{name:a.label,data:i}]),i=function(t){var e,r,n=[];for(e=0;e<t.length;e++){var o={};for(r in t[e])t[e].hasOwnProperty(r)&&(o[r]=t[e][r]);n.push(o)}return n}(i),o=0;o<i.length;o++)i[o].data=c(i[o].data);for(e.xtype=r||(a.discrete?"string":function(t,e,r){return ct(t)?!r.xmin&&!r.xmax||r.xmin&&!b(r.xmin)||r.xmax&&!b(r.xmax)?"number":"datetime":it(t,M)?"number":!e&&it(t,b)?"datetime":"string"}(i,n,a)),o=0;o<i.length;o++)i[o].data=at(i[o].data,e.xtype);return i}function lt(t){var e,r=c(t.rawData);for(e=0;e<r.length;e++)r[e]=[i(r[e][0]),s(r[e][1])];return r}function ct(t,e){if("PieChart"===e||"GeoChart"===e||"Timeline"===e)return 0===t.length;for(var r=0;r<t.length;r++)if(t[r].data.length>0)return!1;return!0}function pt(t,e,r){if(t.addEventListener)return t.addEventListener(e,r,!1),r;var n=function(){return r.call(t,window.event)};return t.attachEvent("on"+e,n),n}function ut(t,e,r){t.removeEventListener?t.removeEventListener(e,r,!1):t.detachEvent("on"+e,r)}function dt(t,e){if(t===e)return!1;for(;e&&e!==t;)e=e.parentNode;return e===t}ot.prototype.renderLineChart=function(t){var e=this;this.waitForLoaded(t,(function(){var r={};!1===t.options.curve&&(r.curveType="none"),!1===t.options.points&&(r.pointSize=0);var n=nt(t,t.options,r),o=e.createDataTable(t.data,t.xtype);e.drawChart(t,"LineChart",o,n)}))},ot.prototype.renderPieChart=function(t){var e=this;this.waitForLoaded(t,(function(){var r={chartArea:{top:"10%",height:"80%"},legend:{}};t.options.colors&&(r.colors=t.options.colors),t.options.donut&&(r.pieHole=.5),"legend"in t.options&&Y(r,t.options.legend),t.options.title&&Z(r,t.options.title);var n=o(o(X,r),t.options.library||{}),a=new e.library.visualization.DataTable;a.addColumn("string",""),a.addColumn("number","Value"),a.addRows(t.data),e.drawChart(t,"PieChart",a,n)}))},ot.prototype.renderColumnChart=function(t){var e=this;this.waitForLoaded(t,(function(){var r=nt(t,t.options),n=e.createDataTable(t.data,t.xtype);e.drawChart(t,"ColumnChart",n,r)}))},ot.prototype.renderBarChart=function(t){var e=this;this.waitForLoaded(t,(function(){var r=p(X,Y,Z,q,$,tt,et,rt)(t,t.options,{hAxis:{gridlines:{color:"#ccc"}}}),n=e.createDataTable(t.data,t.xtype);e.drawChart(t,"BarChart",n,r)}))},ot.prototype.renderAreaChart=function(t){var e=this;this.waitForLoaded(t,(function(){var r=nt(t,t.options,{isStacked:!0,pointSize:0,areaOpacity:.5}),n=e.createDataTable(t.data,t.xtype);e.drawChart(t,"AreaChart",n,r)}))},ot.prototype.renderGeoChart=function(t){var e=this;this.waitForLoaded(t,"geochart",(function(){var r={legend:"none",colorAxis:{colors:t.options.colors||["#f6c7b6","#ce502d"]}},n=o(o(X,r),t.options.library||{}),a=new e.library.visualization.DataTable;a.addColumn("string",""),a.addColumn("number",t.options.label||"Value"),a.addRows(t.data),e.drawChart(t,"GeoChart",a,n)}))},ot.prototype.renderScatterChart=function(t){var e=this;this.waitForLoaded(t,(function(){var r,n,o,a,i=nt(t,t.options,{}),s=t.data,l=[];for(r=0;r<s.length;r++)for(s[r].name=s[r].name||"Value",a=s[r].data,n=0;n<a.length;n++){var c=new Array(s.length+1);c[0]=a[n][0],c[r+1]=a[n][1],l.push(c)}for((o=new e.library.visualization.DataTable).addColumn("number",""),r=0;r<s.length;r++)o.addColumn("number",s[r].name);o.addRows(l),e.drawChart(t,"ScatterChart",o,i)}))},ot.prototype.renderTimeline=function(t){var e=this;this.waitForLoaded(t,"timeline",(function(){var r={legend:"none"};t.options.colors&&(r.colors=t.options.colors);var n=o(o(X,r),t.options.library||{}),a=new e.library.visualization.DataTable;a.addColumn({type:"string",id:"Name"}),a.addColumn({type:"date",id:"Start"}),a.addColumn({type:"date",id:"End"}),a.addRows(t.data),t.element.style.lineHeight="normal",e.drawChart(t,"Timeline",a,n)}))},ot.prototype.destroy=function(t){t.chart&&t.chart.clearChart()},ot.prototype.drawChart=function(t,e,r,n){var o;(this.destroy(t),t.destroyed)||(t.options.code&&window.console.log("var data = new google.visualization.DataTable("+r.toJSON()+");\nvar chart = new google.visualization."+e+"(element);\nchart.draw(data, "+JSON.stringify(n)+");"),t.chart=new this.library.visualization[e](t.element),o=function(){t.chart.draw(r,n)},window.attachEvent?window.attachEvent("onresize",o):window.addEventListener&&window.addEventListener("resize",o,!0),o())},ot.prototype.waitForLoaded=function(t,e,r){var n=this;if(r||(r=e,e="corechart"),K.push({pack:e,callback:r}),G[e])this.runCallbacks();else{G[e]=!0;var o={packages:[e],callback:function(){n.runCallbacks()}},a=t.__config();a.language&&(o.language=a.language),"geochart"===e&&a.mapsApiKey&&(o.mapsApiKey=a.mapsApiKey),this.library.charts.load("current",o)}},ot.prototype.runCallbacks=function(){for(var t,e=0;e<K.length;e++)t=K[e],this.library.visualization&&("corechart"===t.pack&&this.library.visualization.LineChart||"timeline"===t.pack&&this.library.visualization.Timeline||"geochart"===t.pack&&this.library.visualization.GeoChart)&&(t.callback(),K.splice(e,1),e--)},ot.prototype.createDataTable=function(t,e){var r,n,o,a,l,c=[],p=[];for(r=0;r<t.length;r++)for(o=t[r],t[r].name=t[r].name||"Value",n=0;n<o.data.length;n++)a=o.data[n],c[l="datetime"===e?a[0].getTime():a[0]]||(c[l]=new Array(t.length),p.push(l)),c[l][r]=s(a[1]);var h,f=[],y=!0;for(n=0;n<p.length;n++)r=p[n],"datetime"===e?(h=new Date(s(r)),y=y&&m(h)):h="number"===e?s(r):r,f.push([h].concat(c[r]));if("datetime"===e)f.sort(u);else if("number"===e){for(f.sort(d),r=0;r<f.length;r++)f[r][0]=i(f[r][0]);e="string"}var g=new this.library.visualization.DataTable;for(e="datetime"===e&&y?"date":e,g.addColumn(e,""),r=0;r<t.length;r++)g.addColumn("number",t[r].name);return g.addRows(f),g};var ht=[],ft=0;function yt(){if(ft<4){var t=ht.shift();t&&(ft++,e=t[0],r=t[1],n=t[2],function(t,e,r){var n=window.jQuery||window.Zepto||window.$;if(n&&n.ajax)n.ajax({dataType:"json",url:t,success:e,error:r,complete:mt});else{var o=new XMLHttpRequest;o.open("GET",t,!0),o.setRequestHeader("Content-Type","application/json"),o.onload=function(){mt(),200===o.status?e(JSON.parse(o.responseText),o.statusText,o):r(o,"error",o.statusText)},o.send()}}(e,r,(function(t,e,r){var o="string"==typeof r?r:r.message;n(o)})),yt())}var e,r,n}function mt(){ft--,yt()}var gt={},vt=[];function zt(t,e){document.body.innerText?t.innerText=e:t.textContent=e}function bt(t,e,r){r||(e="Error Loading Chart: "+e),zt(t,e),t.style.color="#ff0000"}function Mt(t){try{t.__render()}catch(e){throw bt(t.element,e.message),e}}function xt(t,e,r){if(r&&t.options.loading&&("string"==typeof e||"function"==typeof e)&&zt(t.element,t.options.loading),"string"==typeof e)n=e,o=function(e){t.rawData=e,Mt(t)},a=function(e){bt(t.element,e)},ht.push([n,o,a]),yt();else if("function"==typeof e)try{e((function(e){t.rawData=e,Mt(t)}),(function(e){bt(t.element,e,!0)}))}catch(e){bt(t.element,e,!0)}else t.rawData=e,Mt(t);var n,o,a}function wt(t){var r=function(t){if(t){if("Highcharts"===t.product)return J;if(t.charts)return ot;if(e(t))return I}throw new Error("Unknown adapter")}(t),n=new r(t);-1===vt.indexOf(n)&&vt.push(n)}function Ct(t,r){if(ct(r.data,t)){var n=r.options.empty||r.options.messages&&r.options.messages.empty||"No data";zt(r.element,n)}else!function(t,r){var n,o,a,i;for(a="render"+t,i=r.options.adapter,function(){"Chart"in window&&wt(window.Chart),"Highcharts"in window&&wt(window.Highcharts),window.google&&window.google.charts&&wt(window.google)}(),n=0;n<vt.length;n++)if(o=vt[n],(!i||i===o.name)&&e(o[a]))return r.adapter=o.name,r.__adapterObject=o,o[a](r);throw vt.length>0?new Error("No charting library found for "+t):new Error("No charting libraries found - be sure to include one before your charts")}(t,r),r.options.download&&!r.__downloadAttached&&"chartjs"===r.adapter&&function(t){var e=t.element,r=document.createElement("a"),n=t.options.download;!0===n?n={}:"string"==typeof n&&(n={filename:n}),r.download=n.filename||"chart.png",r.style.position="absolute",r.style.top="20px",r.style.right="20px",r.style.zIndex=1e3,r.style.lineHeight="20px",r.target="_blank";var o=document.createElement("img");o.alt="Download",o.style.border="none",o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABCFBMVEUAAADMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMywEsqxAAAAV3RSTlMAAQIDBggJCgsMDQ4PERQaHB0eISIjJCouLzE0OTo/QUJHSUpLTU5PUllhYmltcHh5foWLjI+SlaCio6atr7S1t7m6vsHHyM7R2tze5Obo7fHz9ff5+/1hlxK2AAAA30lEQVQYGUXBhVYCQQBA0TdYWAt2d3d3YWAHyur7/z9xgD16Lw0DW+XKx+1GgX+FRzM3HWQWrHl5N/oapW5RPe0PkBu+UYeICvozTWZVK23Ao04B79oJrOsJDOoxkZoQPWgX29pHpCZEk7rEvQYiNSFq1UMqvlCjJkRBS1R8hb00Vb/TajtBL7nTHE1X1vyMQF732dQhyF2o6SAwrzP06iUQzvwsArlnzcOdrgBhJyHa1QOgO9U1GsKuvjUTjavliZYQ8nNPapG6sap/3nrIdJ6bOWzmX/fy0XVpfzZP3S8OJT3g9EEiJwAAAABJRU5ErkJggg==",r.appendChild(o),e.style.position="relative",t.__downloadAttached=!0,t.__enterEvent=pt(e,"mouseover",(function(o){var a=o.relatedTarget;a&&(a===this||dt(this,a))||!t.options.download||(r.href=t.toImage(n),e.appendChild(r))})),t.__leaveEvent=pt(e,"mouseout",(function(t){var e=t.relatedTarget;e&&(e===this||dt(this,e))||r.parentNode&&r.parentNode.removeChild(r)}))}(r)}var _t=function(t,e,r){var n;if("string"==typeof t&&(n=t,!(t=document.getElementById(t))))throw new Error("No element with id "+n);this.element=t,this.options=o(Ft.options,r||{}),this.dataSource=e,Ft.charts[t.id]=this,xt(this,e,!0),this.options.refresh&&this.startRefresh()};_t.prototype.getElement=function(){return this.element},_t.prototype.getDataSource=function(){return this.dataSource},_t.prototype.getData=function(){return this.data},_t.prototype.getOptions=function(){return this.options},_t.prototype.getChartObject=function(){return this.chart},_t.prototype.getAdapter=function(){return this.adapter},_t.prototype.updateData=function(t,e){this.dataSource=t,e&&this.__updateOptions(e),xt(this,t,!0)},_t.prototype.setOptions=function(t){this.__updateOptions(t),this.redraw()},_t.prototype.redraw=function(){xt(this,this.rawData)},_t.prototype.refreshData=function(){if("string"==typeof this.dataSource){var t=-1===this.dataSource.indexOf("?")?"?":"&";xt(this,this.dataSource+t+"_="+(new Date).getTime())}else"function"==typeof this.dataSource&&xt(this,this.dataSource)},_t.prototype.startRefresh=function(){var t=this,e=this.options.refresh;if(e&&"string"!=typeof this.dataSource&&"function"!=typeof this.dataSource)throw new Error("Data source must be a URL or callback for refresh");if(!this.intervalId){if(!e)throw new Error("No refresh interval");this.intervalId=setInterval((function(){t.refreshData()}),1e3*e)}},_t.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},_t.prototype.toImage=function(t){if("chartjs"===this.adapter){if(t&&t.background&&"transparent"!==t.background){var e=this.chart.canvas,r=this.chart.ctx,n=document.createElement("canvas"),o=n.getContext("2d");return n.width=r.canvas.width,n.height=r.canvas.height,o.fillStyle=t.background,o.fillRect(0,0,n.width,n.height),o.drawImage(e,0,0),n.toDataURL("image/png")}return this.chart.toBase64Image()}throw new Error("Feature only available for Chart.js")},_t.prototype.destroy=function(){this.destroyed=!0,this.stopRefresh(),this.__adapterObject&&this.__adapterObject.destroy(this),this.__enterEvent&&ut(this.element,"mouseover",this.__enterEvent),this.__leaveEvent&&ut(this.element,"mouseout",this.__leaveEvent)},_t.prototype.__updateOptions=function(t){var e=t.refresh&&t.refresh!==this.options.refresh;this.options=o(Ft.options,t),e&&(this.stopRefresh(),this.startRefresh())},_t.prototype.__render=function(){this.data=this.__processData(),Ct(this.__chartName(),this)},_t.prototype.__config=function(){return gt};var At=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return st(this)},e.prototype.__chartName=function(){return"LineChart"},e}(_t),kt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return lt(this)},e.prototype.__chartName=function(){return"PieChart"},e}(_t),St=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return st(this,null,!0)},e.prototype.__chartName=function(){return"ColumnChart"},e}(_t),Tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return st(this,null,!0)},e.prototype.__chartName=function(){return"BarChart"},e}(_t),Dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return st(this)},e.prototype.__chartName=function(){return"AreaChart"},e}(_t),Ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return lt(this)},e.prototype.__chartName=function(){return"GeoChart"},e}(_t),Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return st(this,"number")},e.prototype.__chartName=function(){return"ScatterChart"},e}(_t),Lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return st(this,"bubble")},e.prototype.__chartName=function(){return"BubbleChart"},e}(_t),Bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){var t,e=this.rawData;for(t=0;t<e.length;t++)e[t][1]=l(e[t][1]),e[t][2]=l(e[t][2]);return e},e.prototype.__chartName=function(){return"Timeline"},e}(_t),Ft={LineChart:At,PieChart:kt,ColumnChart:St,BarChart:Tt,AreaChart:Dt,GeoChart:Ot,ScatterChart:Et,BubbleChart:Lt,Timeline:Bt,charts:{},configure:function(t){for(var e in t)t.hasOwnProperty(e)&&(gt[e]=t[e])},setDefaultOptions:function(t){Ft.options=t},eachChart:function(t){for(var e in Ft.charts)Ft.charts.hasOwnProperty(e)&&t(Ft.charts[e])},destroyAll:function(){for(var t in Ft.charts)Ft.charts.hasOwnProperty(t)&&(Ft.charts[t].destroy(),delete Ft.charts[t])},config:gt,options:{},adapters:vt,addAdapter:wt,use:function(t){return wt(t),Ft}};return"undefined"==typeof window||window.Chartkick||(window.Chartkick=Ft,document.addEventListener("turbolinks:before-render",(function(){!1!==gt.autoDestroy&&Ft.destroyAll()})),document.addEventListener("turbo:before-render",(function(){!1!==gt.autoDestroy&&Ft.destroyAll()})),setTimeout((function(){window.dispatchEvent(new Event("chartkick:load"))}),0)),Ft.default=Ft,Ft}));
