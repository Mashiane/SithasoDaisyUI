
/* sithasodaisypocketbase */
function banano_sithasodaisypocketbase_sduipocketbase() {var _B=this;_B._db_bool="BOOL";_B._db_int="INT";_B._db_file="FILE";_B._db_string="STRING";_B._db_real="REAL";_B._db_blob="BLOB";_B._db_float="FLOAT";_B._db_integer="INTEGER";_B._db_text="TEXT";_B._db_double="DOUBLE";_B._db_number="NUMBER";_B._db_relation="RELATION";_B._db_json="JSON";_B._db_date="DATE";_B._mcallback={};_B._baseurl="";_B._wherefield={};_B._ops=[];_B._orderbyl=[];_B._flds=[];_B._rowcount=0;_B._lastposition=0;_B._record={};_B._result=[];_B._success=false;_B._client=null;_B._mevent="";_B._stablename="";_B._tag={};_B._schema={};_B._primarykey="";_B._displayfield="";_B._singular="";_B._plural="";_B._displayvalue="";_B._userprofile= new banano_sithasodaisy_profiletype();_B._formdata=null;_B._filefields=[];_B._isauthenticated=false;_B._combinel=[];_B._showlog=false;_B._operations=[];_B.initialize=function(_module,_eventname,_url,_tablename) {var _stoken,_smodel,_acb;_B._stablename=_tablename;_B._mcallback=_module;_B._baseurl=_url;_B._wherefield={};_B._ops.length=0;_B._orderbyl.length=0;_B._flds.length=0;_B._record={};_B._lastposition=-1;_B._result.length=0;_B._mevent=_eventname;_B._primarykey="id";_B._schema={};_B._client=new PocketBase(_B._baseurl);_B.schemaaddtext1("id",_B);_B._filefields.length=0;_B._combinel.length=0;_B._showlog=false;if ((typeof _module[("" + _eventname + "_AuthChange").toLowerCase()]==="function")) {_stoken="";_smodel={};_acb=function(_stoken,_smodel) {if (typeof _module[("" + _eventname + "_AuthChange").toLowerCase()]==="function") {return _module[("" + _eventname + "_AuthChange").toLowerCase()](_stoken,_smodel,_B)};};_B._client["authStore"]["onChange"](_acb);}return _B;};_B.buildfileurl=function(_id,_filename) {var _fpath;_fpath="" + _B._baseurl + "/api/files/" + _B._stablename + "/" + _id + "/" + _filename + "";return _fpath;};_B.buildfilethumbnailurl=function(_id,_filename,_width,_height) {var _fpath;_fpath="" + _B._baseurl + "/api/files/" + _B._stablename + "/" + _id + "/" + _filename + "?thumb=" + _width + "x" + _height + "";return _fpath;};_B.getfileurl=function(_rec,_filesfieldname) {var _docs,_firstfilename,_url;_docs=_rec[_filesfieldname];_firstfilename=_docs[0];_url=_B._client["getFileUrl"](_rec,_firstfilename);return _url;};_B.settablename=function(_s) {_B._stablename=_s;};_B.schemaaddblob=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_blob;}return _B;};_B.schemaaddfile=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_file;}return _B;};_B.schemaaddfile1=function(_b) {_B._schema[_b]=_B._db_file;return _B;};_B.schemaaddblob1=function(_b) {_B._schema[_b]=_B._db_blob;return _B;};_B.schemaaddboolean=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_bool;}return _B;};_B.schemaaddboolean1=function(_b) {_B._schema[_b]=_B._db_bool;return _B;};_B.schemaadddouble1=function(_b) {_B._schema[_b]=_B._db_double;return _B;};_B.schemaadddouble=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_double;}return _B;};_B.schemaaddfloat1=function(_b) {_B._schema[_b]=_B._db_float;return _B;};_B.schemaaddfloat=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_float;}return _B;};_B.schemaaddtext1=function(_b) {_B._schema[_b]=_B._db_string;return _B;};_B.schemaaddtext=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_string;}return _B;};_B.schemaaddint1=function(_b) {_B._schema[_b]=_B._db_int;return _B;};_B.schemaaddint=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_int;}return _B;};_B.schemaaddnumber=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_number;}return _B;};_B.schemaaddnumber1=function(_b) {_B._schema[_b]=_B._db_number;return _B;};_B.schemaaddrelation=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_relation;}return _B;};_B.schemaaddrelation1=function(_b) {_B._schema[_b]=_B._db_relation;return _B;};_B.schemaaddjson=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_json;}return _B;};_B.schemaaddjson1=function(_b) {_B._schema[_b]=_B._db_json;return _B;};_B.select_all=async function() {var _qsort,_nl,_opt;if (_B._showlog) {console.log("SDUIPocketBase.SELECT_ALL");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.SELECT_ALL. Please execute SchemaAdd?? first to define your table schema!";return null;}_B._lastposition=-1;_B._result.length=0;_qsort=_banano_sithasodaisy_sduishared.join(",",_B._orderbyl);_nl=[];_nl.length=0;try {_opt={};if (_qsort!="") {_opt["sort"]=_qsort;}_B._result=await _B._client["collection"](_B._stablename)["getFullList"](200,_opt);} catch(err) {}_B._rowcount=_B._result.length;return _B._result;};_B.select_all_users=async function() {var _qsort,_nl,_opt;if (_B._showlog) {console.log("SDUIPocketBase.SELECT_ALL_USERS");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.SELECT_ALL. Please execute SchemaAdd?? first to define your table schema!";return null;}_B._lastposition=-1;_B._result.length=0;_qsort=_banano_sithasodaisy_sduishared.join(",",_B._orderbyl);_nl=[];_nl.length=0;try {_opt={};if (_qsort!="") {_opt["sort"]=_qsort;}_B._result=await _B._client["collection"]("users")["getFullList"](200,_opt);} catch(err) {}_B._rowcount=_B._result.length;return _B._result;};_B.select_all_admins=async function() {var _qsort,_nl,_opt;if (_B._showlog) {console.log("SDUIPocketBase.SELECT_ALL_ADMINS");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.SELECT_ALL_ADMINS. Please execute SchemaAdd?? first to define your table schema!";return null;}_B._lastposition=-1;_B._result.length=0;_qsort=_banano_sithasodaisy_sduishared.join(",",_B._orderbyl);_nl=[];_nl.length=0;try {_opt={};if (_qsort!="") {_opt["sort"]=_qsort;}_B._result=await _B._client["admins"]["getFullList"](200,_opt);} catch(err) {}_B._rowcount=_B._result.length;return _B._result;};_B.select_all_collections_names=async function() {var _tblnames,_tbnames;if (_B._showlog) {console.log("SDUIPocketBase.SELECT_ALL_COLLECTIONS_NAMES");}_tblnames=await _B.select_all_collections(_B);_tbnames=_banano_sithasodaisy_sduishared.listofmapsgetproperty(_tblnames,"name");return _tbnames;};_B.select_all_collections=async function() {var _qsort,_nl,_opt;if (_B._showlog) {console.log("SDUIPocketBase.SELECT_ALL_COLLECTIONS");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.SELECT_ALL_COLLECTIONS. Please execute SchemaAdd?? first to define your table schema!";return null;}_B._lastposition=-1;_B._result.length=0;_qsort=_banano_sithasodaisy_sduishared.join(",",_B._orderbyl);_nl=[];_nl.length=0;try {_opt={};if (_qsort!="") {_opt["sort"]=_qsort;}_B._result=await _B._client["collections"]["getFullList"](200,_opt);} catch(err) {}_B._rowcount=_B._result.length;return _B._result;};_B.subscribe=function(_module,_tablename) {var _ename,_e,_cb,_ename1;if (_B._showlog) {console.log("SDUIPocketBase.Subscribe(" + _tablename + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.Subscribe. Please execute SchemaAdd?? first to define your table schema!";return;}try {_ename="" + _B._mevent + "_changes";if ((typeof _module[(_ename).toLowerCase()]==="function")) {_e={};_cb=function(_e) {if (typeof _module[("" + _B._mevent + "_changes").toLowerCase()]==="function") {return _module[("" + _B._mevent + "_changes").toLowerCase()](_e,_B)};};_B._client["collection"](_tablename)["subscribe"]("*",_cb);}_ename1="" + _B._mevent + "_change";if ((typeof _B._mcallback[(_ename1).toLowerCase()]==="function")) {_e={};_cb=function(_e) {if (typeof _B[("HandleChange").toLowerCase()]==="function") {return _B[("HandleChange").toLowerCase()](_e,_B)};};_B._client["collection"](_tablename)["subscribe"]("*",_cb);}} catch(err) {}};_B.handlechange=function(_e) {var _saction,_record1,_stablename1;_saction=_e["action"];_record1=_e["record"];_stablename1=_banano_sithasodaisy_sduishared.getrecursive(_e,"record.collectionName");(function() {if (typeof _B._mcallback[("" + _B._mevent + "_change").toLowerCase()]==="function") {var CSr = _B._mcallback[("" + _B._mevent + "_change").toLowerCase()](_saction,_record1,_stablename1,_B);if(CSr!=null) {return CSr}}})();};_B.subscribetorecord=function(_module,_tablename,_id) {var _ename,_e,_cb;if (_B._showlog) {console.log("SDUIPocketBase.SubscribeToRecord(" + _tablename + "," + _id + ")");}try {_ename="" + _B._mevent + "_changes";if ((typeof _module[(_ename).toLowerCase()]==="function")) {_e={};_cb=function(_e) {if (typeof _module[("" + _B._mevent + "_changes").toLowerCase()]==="function") {return _module[("" + _B._mevent + "_changes").toLowerCase()](_e,_B)};};_B._client["collection"](_tablename)["subscribe"](_id,_cb);} else {window.console.warn("SDUIPocketBase.SubscribeToRecord.'" + _B._mevent + "_changes' callback is missing!");}} catch(err) {}};_B.unsubscribe=function(_tablename) {if (_B._showlog) {console.log("SDUIPocketBase.UnSubscribe(" + _tablename + ")");}try {_B._client["collection"](_tablename)["unsubscribe"]("*");} catch(err) {}};_B.unsubscribetorecord=function(_tablename,_id) {if (_B._showlog) {console.log("SDUIPocketBase.UnSubscribeToRecord(" + _tablename + "," + _id + ")");}try {_B._client["collection"](_tablename)["unsubscribe"](_id);} catch(err) {}};_B.create_or_update=async function() {var _key,_bthere,_res,_k,_id,_r;if (_B._showlog) {console.log("SDUIPocketBase.CREATE_OR_UPDATE");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.CREATE_OR_UPDATE. Please execute SchemaAdd?? first to define your table schema!";return "";}try {_key=_B._record["id"]===undefined? "":_B._record["id"];_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];_bthere=false;if (_key!="") {_bthere=await _B.containskey(_key,_B);if (_B._showlog) {console.log("SDUIPocketBase.CREATE_OR_UPDATE:ContainsKey(id," + _key + "," + _bthere + ")");}}if (_bthere==false) {_res=await _B._client["collection"](_B._stablename)["create"](_B._record);if (("id" in _res)) {_k=_res["id"];return _k;}return "";} else {_id=_B._record["id"];_r=await _B._client["collection"](_B._stablename)["update"](_id,_B._record);if (("id" in _r)) {_k=_r["id"];return _k;}return "";}} catch(err) {return "";}};_B.create_or_update_by_field=async function(_fldname) {var _skey,_bthere,_id,_rec,_res,_k,_r;if (_B._showlog) {console.log("SDUIPocketBase.CREATE_OR_UPDATE_BY_FIELD(" + _fldname + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.CREATE_OR_UPDATE_BY_FIELD. Please execute SchemaAdd?? first to define your table schema!";return "";}try {_skey=_B._record[_fldname]===undefined? "":_B._record[_fldname];_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];_bthere=false;_id="";if (_skey!="") {_rec=await _B.read_by_string(_fldname,_skey,_B);_id=_rec["id"]===undefined? "":_rec["id"];if (_id!="") {_bthere=true;}}if (_bthere==false) {_res=await _B._client["collection"](_B._stablename)["create"](_B._record);if (("id" in _res)) {_k=_res["id"];return _k;}return "";} else {_B._record["id"]=_id;_r=await _B._client["collection"](_B._stablename)["update"](_id,_B._record);if (("id" in _r)) {_k=_r["id"];return _k;}return "";}} catch(err) {return "";}};_B.update_file=async function(_sid,_filefield,_fileobj) {var _r,_k;_B._formdata=new FormData();_B._formdata["append"](_filefield,_fileobj);_r=await _B._client["collection"](_B._stablename)["update"](_sid,_B._formdata);if (("id" in _r)) {_k=_r["id"];return _k;}return "";};_B.create=async function() {var _m,_k;if (_B._showlog) {console.log("SDUIPocketBase.CREATE");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.CREATE. Please execute SchemaAdd?? first to define your table schema!";return null;}try {_m=await _B._client["collection"](_B._stablename)["create"](_B._record);if (("id" in _m)) {_k=_m["id"];return _k;}return "";} catch(err) {return "";}};_B.create_formdata=async function(_filefield) {var _m,_firstfilename,_url;if (_B._showlog) {console.log("SDUIPocketBase.CREATE_FORMDATA");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.CREATE_FORMDATA. Please execute SchemaAdd?? first to define your table schema!";return null;}try {_m=await _B._client["collection"](_B._stablename)["create"](_B._formdata);_firstfilename=_m[_filefield];_url=_B._client["files"]["getUrl"](_m,_firstfilename);_m["fileurl"]=_url;return _m;} catch(err) {return null;}};_B.establishfileurl=function(_filefield,_urlfield) {var _rtot,_rcnt,_r,_firstfilename,_url;_rtot=_B._result.length-1;_rcnt=0;for (_rcnt=0;_rcnt<=_rtot;_rcnt++) {_r=_B._result[_rcnt];_firstfilename=_r[_filefield];_url=_B._client["files"]["getUrl"](_r,_firstfilename);_r[_urlfield]=_url;_B._result[_rcnt]=_r;}};_B.establishfileurl1=function(_rec,_filefield,_urlfield) {var _firstfilename,_url;_firstfilename=_rec[_filefield];_url=_B._client["files"]["getUrl"](_rec,_firstfilename);_rec[_urlfield]=_url;};_B.update_formdata=async function() {var _id,_r,_k;if (_B._showlog) {console.log("SDUIPocketBase.UPDATE_FORMDATA");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.UPDATE. Please execute SchemaAdd?? first to define your table schema!";return null;}try {_id=_B._record["id"];_r=await _B._client["collection"](_B._stablename)["update"](_id,_B._formdata);if (("id" in _r)) {_k=_r["id"];return _k;}return "";} catch(err) {return "";}};_B.get_id_by_field=async function(_fldname,_fldvalue) {var _rec,_sid;if (_B._showlog) {console.log("SDUIPocketBase.GET_ID_BY_FIELD(" + _fldname + "," + _fldvalue + ")");}_rec=await _B.read_by_string(_fldname,_fldvalue,_B);_sid=_rec["id"]===undefined? "":_rec["id"];return _sid;};_B.update_by_string=async function(_fldname,_fldvalue) {var _rec,_sid,_nid;if (_B._showlog) {console.log("SDUIPocketBase.UPDATE_BY_STRING(" + _fldname + "," + _fldvalue + ")");}_rec=await _B.read_by_string(_fldname,_fldvalue,_B);_sid=_rec["id"]===undefined? "":_rec["id"];_B._record["id"]=_sid;_nid=await _B.update(_B);return _nid;};_B.update_by=async function(_fldname,_fldvalue) {var _rec,_sid,_nid;if (_B._showlog) {console.log("SDUIPocketBase.UPDATE_BY(" + _fldname + "," + _fldvalue + ")");}_rec=await _B.read_by(_fldname,_fldvalue,_B);_sid=_rec["id"]===undefined? "":_rec["id"];_B._record["id"]=_sid;_nid=await _B.update(_B);return _nid;};_B.update=async function() {var _id,_r,_k;if (_B._showlog) {console.log("SDUIPocketBase.UPDATE");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.UPDATE. Please execute SchemaAdd?? first to define your table schema!";return null;}try {_id=_B._record["id"];_r=await _B._client["collection"](_B._stablename)["update"](_id,_B._record);if (("id" in _r)) {_k=_r["id"];return _k;}return "";} catch(err) {return "";}};_B.read=async function(_id) {var _m;if (_B._showlog) {console.log("SDUIPocketBase.READ(" + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.READ. Please execute SchemaAdd?? first to define your table schema!";return null;}_m={};try {_m=await _B._client["collection"](_B._stablename)["getOne"](_id);_B._record=_m;return _m;} catch(err) {_B._record=_m;return _m;}};_B.read_user=async function(_id) {var _m;if (_B._showlog) {console.log("SDUIPocketBase.READ_USER(" + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.READ_USER. Please execute SchemaAdd?? first to define your table schema!";return null;}_m={};try {_m=await _B._client["collection"]("users")["getOne"](_id);_B._record=_m;return _m;} catch(err) {_B._record=_m;return _m;}};_B.read_admin=async function(_id) {var _m;if (_B._showlog) {console.log("SDUIPocketBase.READ_ADMIN(" + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.READ_USER. Please execute SchemaAdd?? first to define your table schema!";return null;}_m={};try {_m=await _B._client["admins"]["getOne"](_id);_B._record=_m;return _m;} catch(err) {_B._record=_m;return _m;}};_B.read_collection=async function(_id) {var _m;if (_B._showlog) {console.log("SDUIPocketBase.READ_COLLECTION(" + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.READ_USER. Please execute SchemaAdd?? first to define your table schema!";return null;}_m={};try {_m=await _B._client["collections"]["getOne"](_id);_B._record=_m;return _m;} catch(err) {_B._record=_m;return _m;}};_B.read_by_string=async function(_fldname,_fldvalue) {var _res,_m;if (_B._showlog) {console.log("SDUIPocketBase.READ_BY_STRING(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where_string(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);_m={};if (_res.length==0) {return _m;} else {_m=_res[0];return _m;}};_B.read_id_by_string=async function(_fldname,_fldvalue) {var _rec,_sid;if (_B._showlog) {console.log("SDUIPocketBase.READ_ID_BY_STRING(" + _fldname + "," + _fldvalue + ")");}_rec=await _B.read_by_string(_fldname,_fldvalue,_B);_sid=_rec["id"]===undefined? "":_rec["id"];return _sid;};_B.read_by=async function(_fldname,_fldvalue) {var _res,_m;if (_B._showlog) {console.log("SDUIPocketBase.READ_BY(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);_m={};if (_res.length==0) {return _m;} else {_m=_res[0];return _m;}};_B.containskey=async function(_id) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.ContainsKey(" + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.ContainsKey. Please execute SchemaAdd?? first to define your table schema!";return "";}_B.clear_where(_B);_B.add_where("id","=","'" + _id + "'",_B);_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.containsfield=async function(_fldname,_id) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.ContainsField(" + _fldname + "," + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.ContainsField. Please execute SchemaAdd?? first to define your table schema!";return "";}_B.clear_where(_B);_B.add_where(_fldname,"=","'" + _id + "'",_B);_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.listkeys=async function() {var _res,_rec,_k;if (_B._showlog) {console.log("SDUIPocketBase.ListKeys");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.ListKeys. Please execute SchemaAdd?? first to define your table schema!";return null;}_B.clear_where(_B);_B._result=await _B.select_where(_B);_res=[];_res.length=0;for (var _recindex=0;_recindex<_B._result.length;_recindex++) {_rec=_B._result[_recindex];_k=_rec["id"]===undefined? "":_rec["id"];_k=_banano_sithasodaisy_sduishared.cstr(_k);_res.push(_k);}return _res;};_B.delete_all=async function() {var _keys,_collection,_k;if (_B._showlog) {console.log("SDUIPocketBase.DELETE_ALL");}_keys=await _B.listkeys(_B);if (_keys.length==0) { return ;}_collection=_B._client["collection"](_B._stablename);for (var _kindex=0;_kindex<_keys.length;_kindex++) {_k=_keys[_kindex];await _collection["delete"](_k);}};_B.getkeyvalues=async function(_bhasnothing,_k,_v) {var _mx,_row,_f1,_f2;if (_B._showlog) {console.log("SDUIPocketBase.GetKeyValues(" + _bhasnothing + "," + _k + "," + _v + ")");}_mx={};if (_bhasnothing) {_mx[""]="-- Nothing Selected --";}_B.clear_where(_B);_B.add_field(_k,_B);_B.add_field(_v,_B);_B.add_order_by(_v,_B);_B._result=await _B.select_where(_B);for (var _rowindex=0;_rowindex<_B._result.length;_rowindex++) {_row=_B._result[_rowindex];_f1=_row[_k];_f2=_row[_v];_mx[_f1]=_f2;}return _mx;};_B.getkeyvaluesfromlist=function(_source,_bhasnothing,_k,_v) {var _mx,_row,_f1,_f2;_mx={};if (_bhasnothing) {_mx[""]="-- Nothing Selected --";}for (var _rowindex=0;_rowindex<_source.length;_rowindex++) {_row=_source[_rowindex];_f1=_row[_k];_f2=_row[_v];_mx[_f1]=_f2;}return _mx;};_B.delete=async function(_id) {var _r;if (_B._showlog) {console.log("SDUIPocketBase.DELETE(" + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.DELETE. Please execute SchemaAdd?? first to define your table schema!";return false;}try {_r=await _B._client["collection"](_B._stablename)["delete"](_id);return _r;} catch(err) {return false;}};_B.setfield=function(_fldname,_fldvalue) {var _dt;if (_B._showlog) {console.log("SDUIPocketBase.SetField(" + _fldname + ", " + _fldvalue + ")");}_dt=_B._schema[_fldname];switch ("" + _dt) {case "" + _B._db_bool:_fldvalue=_banano_sithasodaisy_sduishared.cbool(_fldvalue);break;case "" + _B._db_int:_fldvalue=_banano_sithasodaisy_sduishared.cint(_fldvalue);break;case "" + _B._db_file:break;case "" + _B._db_string:_fldvalue=_banano_sithasodaisy_sduishared.cstr(_fldvalue);break;case "" + _B._db_real:_fldvalue=_banano_sithasodaisy_sduishared.cdbl(_fldvalue);break;case "" + _B._db_blob:break;case "" + _B._db_float:_fldvalue=_banano_sithasodaisy_sduishared.cdbl(_fldvalue);break;case "" + _B._db_integer:_fldvalue=_banano_sithasodaisy_sduishared.cint(_fldvalue);break;case "" + _B._db_text:_fldvalue=_banano_sithasodaisy_sduishared.cstr(_fldvalue);break;case "" + _B._db_double:_fldvalue=_banano_sithasodaisy_sduishared.cdbl(_fldvalue);break;}_B._record[_fldname]=_fldvalue;return _B;};_B.recordfrommap=function(_sm) {var _k,_v;_B._record={};var _kKeys = Object.keys(_sm);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_sm[_k];_B._record[_k]=_v;}};_B.firstrecord=function() {var _rec;_rec=_B._result[0];return _rec;};_B.clear_where=function() {if (_B._showlog) {console.log("SDUIPocketBase.CLEAR_WHERE");}_B._wherefield={};_B._ops.length=0;_B._orderbyl.length=0;_B._flds.length=0;_B._combinel.length=0;return _B;};_B.reset=function() {_B._wherefield={};_B._ops.length=0;_B._orderbyl.length=0;_B._flds.length=0;_B._combinel.length=0;_B._rowcount=0;_B._lastposition=-1;_B._record={};_B._result.length=0;_B._success=false;_B._tag=null;_B._schema={};_B._displayfield="";_B._singular="";_B._plural="";_B._displayvalue="";_B._userprofile.initialize();_B._filefields.length=0;_B._isauthenticated=false;_B.schemaaddtext1("id",_B);return _B;};_B.add_field=function(_fld) {_B._flds.push(_fld);return _B;};_B.add_fields=function(_fields) {var _fld;for (var _fldindex=0;_fldindex<_fields.length;_fldindex++) {_fld=_fields[_fldindex];_B.add_field(_fld,_B);}return _B;};_B.add_where=function(_fld,_operator,_value) {if (_B._showlog) {console.log("SDUIPocketBase.ADD_WHERE(" + _fld + "," + _operator + "," + _value + ")");}switch ("" + _operator) {case "" + "<>":_operator="!=";break;case "" + "like":_operator="~";break;}_B._wherefield[_fld]=_value;_B._ops.push(_operator);_B._combinel.push("&&");return _B;};_B.add_where_string=function(_fld,_operator,_value) {if (_B._showlog) {console.log("SDUIPocketBase.ADD_WHERE_STRING(" + _fld + "," + _operator + "," + _value + ")");}_B.add_where(_fld,_operator,"'" + _value + "'",_B);return _B;};_B.where_or=function(_pos) {if (_B._showlog) {console.log("SDUIPocketBase.WHERE_OR(" + _pos + ")");}_B._combinel[_pos]="||";return _B;};_B.where_and=function(_pos) {if (_B._showlog) {console.log("SDUIPocketBase.WHERE_AND(" + _pos + ")");}_B._combinel[_pos]="&&";return _B;};_B.add_order_by=function(_fld) {if (_B._showlog) {console.log("SDUIPocketBase.ADD_ORDER_BY(" + _fld + ")");}_B._orderbyl.push(_fld);return _B;};_B.add_order_by_desc=function(_fld) {if (_B._showlog) {console.log("SDUIPocketBase.ADD_ORDER_BY_DESC(" + _fld + ")");}_B._orderbyl.push("-" + _fld + "");return _B;};_B.nextrow=function() {var _realsize;_B._lastposition=_B._lastposition+1;_realsize=_B._rowcount-1;if (_B._lastposition>_realsize) {return false;} else {_B.setposition(_B._lastposition,_B);return true;}};_B.setrecord=function(_rec) {var _k,_fldpos,_v,_dt;_B._record={};var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_fldpos=(_k in _B._schema);if (_fldpos==false) {delete _rec[_k];}}var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_rec[_k]===undefined? "":_rec[_k];_dt=_B._schema[_k];switch ("" + _dt) {case "" + _B._db_bool:_v=_banano_sithasodaisy_sduishared.cbool(_v);break;case "" + _B._db_int:_v=_banano_sithasodaisy_sduishared.cint(_v);break;case "" + _B._db_file:break;case "" + _B._db_string:_v=_banano_sithasodaisy_sduishared.cstr(_v);break;case "" + _B._db_real:_v=_banano_sithasodaisy_sduishared.cdbl(_v);break;case "" + _B._db_blob:break;case "" + _B._db_float:_v=_banano_sithasodaisy_sduishared.cdbl(_v);break;case "" + _B._db_integer:_v=_banano_sithasodaisy_sduishared.cint(_v);break;case "" + _B._db_text:_v=_banano_sithasodaisy_sduishared.cstr(_v);break;case "" + _B._db_double:_v=_banano_sithasodaisy_sduishared.cdbl(_v);break;}_B._record[_k]=_v;}_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];if (_B._showlog) {console.log("SDUIPocketBase.SetRecord(" + JSON.stringify(_B._record) + ")");}};_B.preparerecord=function() {_B._record={};};_B.prepareform=function() {_B._formdata=new FormData();};_B.setformfile=function(_fldname,_fileobj) {_B._formdata["append"](_fldname,_fileobj);return _B;};_B.setformfield=function(_fldname,_fldvalue) {_B._formdata["append"](_fldname,_fldvalue);return _B;};_B.setposition=function(_pos) {if (_B._result.length>_pos) {_B._record=_B._result[_pos];_B._lastposition=_pos;} else {_B._lastposition=-1;_B._record={};}};_B.getposition=function() {return _B._lastposition;};_B.getint=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return 0;}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? 0:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cint(_obj);return _obj;} else {return 0;}};_B.getlong=function(_fld) {return _B.getint(_fld,_B);};_B.getstring=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return "";}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? "":_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cstr(_obj);return _obj;} else {return "";}};_B.getimage=function(_fld) {var _simage;_simage=_B.getstring(_fld,_B);if (_simage=="") { return "./assets/placeholderimg.jpg";}return _simage;};_B.getboolean=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return false;}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? false:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.parsebool(_obj);return _obj;} else {return false;}};_B.getdouble=function(_fld) {var _obj;_fld=_fld.toLowerCase();if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? 0:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cdbl(_obj);return _obj;} else {return 0;}};_B.getrecord=function(_pos) {var _rec;_rec=_B._result[_pos];return _rec;};_B.movefirst=function() {_B.setposition(0,_B);};_B.movelast=function() {_B.setposition(_B._rowcount-1,_B);};_B.moveprevious=function() {_B._lastposition=_B._lastposition-1;if (_B._lastposition<0) {_B._lastposition=0;}_B.setposition(_B._lastposition,_B);};_B.movenext=function() {_B._lastposition=_B._lastposition+1;if (_B._lastposition>_B._rowcount) {_B._lastposition=_B._rowcount-1;}_B.setposition(_B._lastposition,_B);};_B.findwhereorderby=async function(_wheremap,_whereops,_orderby) {var _sb,_i,_iwhere,_col,_val,_opr,_com,_qfilter,_afilter,_qsort,_nl,_opt;if (_B._showlog) {console.log("SDUIPocketBase.findWhereOrderBy(" + JSON.stringify(_wheremap) + "," + _whereops + "," + _orderby + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.findWhereOrderBy. Please execute SchemaAdd?? first to define your table schema!";return null;}_sb=new StringBuilder();_sb.init();_sb.isinitialized=true;_i=0;_iwhere=Object.keys(_wheremap).length-1;for (_i=0;_i<=_iwhere;_i++) {_col=banano_getB4JKeyAt(_wheremap,_i);_col=_col.split("&").join("");_val=banano_getB4JValueAt(_wheremap,_i);_opr=_whereops[_i];_com=_B._combinel[_i];_sb.append(_col);_sb.append(" " + _opr + " ");_sb.append(_val);_sb.append(" " + _com + " ");}_qfilter=_sb.toString();_afilter=_banano_sithasodaisy_sduishared.remdelim(_qfilter," " + _com + " ");_qfilter=_afilter.trim();_qsort="";if (is.null(_orderby)==false) {_qsort=_banano_sithasodaisy_sduishared.join(",",_orderby);}_nl=[];_nl.length=0;try {_opt={};if (_qsort!="") {_opt["sort"]=_qsort;}if (_qfilter!="") {_opt["filter"]=_qfilter;}_nl=await _B._client["collection"](_B._stablename)["getFullList"](200,_opt);} catch(err) {}return _nl;};_B.findwhere=async function(_wheremap,_whereops) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.findWhere(" + JSON.stringify(_wheremap) + "," + _whereops + ")");}_res=await _B.findwhereorderby(_wheremap,_whereops,null,_B);return _res;};_B.delete_by=function(_fldname,_fldvalue) {if (_B._showlog) {console.log("SDUIPocketBase.DELETE_BY(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where(_fldname,"=",_fldvalue,_B);_B.deletewhere("id",_B._wherefield,_B._ops,_B);};_B.delete_by_string=function(_fldname,_fldvalue) {if (_B._showlog) {console.log("SDUIPocketBase.DELETE_BY_STRING(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where(_fldname,"=","'" + _fldvalue + "'",_B);_B.deletewhere("id",_B._wherefield,_B._ops,_B);};_B.deletewhere=async function(_prikey,_wheremap,_whereops) {var _recs,_rec,_pvalue;if (_B._showlog) {console.log("SDUIPocketBase.deleteWhere(" + _prikey + "," + JSON.stringify(_wheremap) + "," + _whereops + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.deleteWhere. Please execute SchemaAdd?? first to define your table schema!";return null;}_recs=await _B.findwhere(_wheremap,_whereops,_B);for (var _recindex=0;_recindex<_recs.length;_recindex++) {_rec=_recs[_recindex];_pvalue=_rec[_prikey];await _B.delete(_pvalue,_B);}return true;};_B.delete_where=function() {if (_B._showlog) {console.log("SDUIPocketBase.DELETE_WHERE");}_B.deletewhere("id",_B._wherefield,_B._ops,_B);};_B.existsbystring=async function(_fldname,_fldvalue) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.ExistsByString(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where_string(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.exists=async function(_fldname,_fldvalue) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.Exists(" + _fldname + "," + _fldvalue + ")");}_B.clear_where(_B);_B.add_where(_fldname,"=",_fldvalue,_B);_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.existswhere=async function(_where) {var _k,_v,_res;if (_B._showlog) {console.log("SDUIPocketBase.ExistsWhere(" + JSON.stringify(_where) + ")");}_B.clear_where(_B);var _kKeys = Object.keys(_where);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_where[_k];_B.add_where_string(_k,"=",_v,_B);}_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.select_where=async function() {var _res;if (_B._showlog) {console.log("SDUIPocketBase.SELECT_WHERE");}_res=await _B.findwhereorderby(_B._wherefield,_B._ops,_B._orderbyl,_B);return _res;};_B.select_where1=async function() {if (_B._showlog) {console.log("SDUIPocketBase.SELECT_WHERE1");}_B._result=await _B.findwhereorderby(_B._wherefield,_B._ops,_B._orderbyl,_B);_B._lastposition=-1;_B._rowcount=_B._result.length;return _B._result;};_B.nextid=function() {var _ni;_ni=_banano_sithasodaisy_sduishared.guidalpha(15);return _ni;};_B.assignrealrecord=function(_dbrecord) {var _k,_v;_B._record={};var _kKeys = Object.keys(_B._schema);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_dbrecord[_k];_B._record[_k]=_v;}delete _B._record["collectionId"];delete _B._record["collectionName"];_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];};_B.getrealrecord=function(_dbrecord) {delete _dbrecord["collectionId"];delete _dbrecord["collectionName"];return _dbrecord;};_B.create_user=async function(_profile) {var _fok,_res;if (_B._showlog) {console.log("SDUIPocketBase.CREATE_USER(" + _profile + ")");}_B._userprofile.initialize();_B._userprofile._size=0;try {_fok=0;if (("email" in _profile)==false) {_fok=parseInt(_fok)+1;}if (("password" in _profile)==false) {_fok=parseInt(_fok)+1;}if (("passwordConfirm" in _profile)==false) {_fok=parseInt(_fok)+1;}if (_fok!=0) { return null;}_res=await _B._client["collection"]("users")["create"](_profile);_B._userprofile._id=_res["id"]===undefined? "":_res["id"];_B._userprofile._email=_res["email"]===undefined? "":_res["email"];_B._userprofile._avatar=_res["avatar"]===undefined? "":_res["avatar"];_B._userprofile._name=_res["name"]===undefined? "":_res["name"];_B._userprofile._verified=_res["verified"]===undefined? false:_res["verified"];_B._userprofile._username=_res["username"]===undefined? "":_res["username"];_B._userprofile._size=7;return _res;} catch(err) {return null;}};_B.create_admin=async function(_profile) {var _fok,_res;if (_B._showlog) {console.log("SDUIPocketBase.CREATE_ADMIN(" + _profile + ")");}_B._userprofile.initialize();_B._userprofile._size=0;try {_fok=0;if (("email" in _profile)==false) {_fok=parseInt(_fok)+1;}if (("password" in _profile)==false) {_fok=parseInt(_fok)+1;}if (("passwordConfirm" in _profile)==false) {_fok=parseInt(_fok)+1;}if (_fok!=0) { return null;}_res=await _B._client["admins"]["create"](_profile);_B._userprofile._id=_res["id"]===undefined? "":_res["id"];_B._userprofile._email=_res["email"]===undefined? "":_res["email"];_B._userprofile._avatar=_res["avatar"]===undefined? "":_res["avatar"];_B._userprofile._name=_res["name"]===undefined? "":_res["name"];_B._userprofile._verified=_res["verified"]===undefined? false:_res["verified"];_B._userprofile._username=_res["username"]===undefined? "":_res["username"];_B._userprofile._size=7;return _res;} catch(err) {return null;}};_B.create_collection=async function(_nameof,_coltype,_colschema) {var _col,_res;if (_B._showlog) {console.log("SDUIPocketBase.CREATE_COLLECTION(" + _nameof + ")");}try {_col={};_col["name"]=_nameof;_col["type"]=_coltype;_col["schema"]=_colschema;_res=await _B._client["collections"]["create"](_col);return _res;} catch(err) {return null;}};_B.create_collection1=async function(_nameof,_colschema,_createrule,_updaterule,_deleterule,_listrule,_viewrule) {var _col,_res;if (_B._showlog) {console.log("SDUIPocketBase.CREATE_COLLECTION1(" + _nameof + ")");}try {_col={};_col["name"]=_nameof;_col["type"]="base";_col["createRule"]=_createrule;_col["updateRule"]=_updaterule;_col["deleteRule"]=_deleterule;_col["listRule"]=_listrule;_col["viewRule"]=_viewrule;_col["schema"]=_colschema;_res=await _B._client["collections"]["create"](_col);return _res;} catch(err) {return null;}};_B.create_collection2=async function(_nameof,_typeof,_colschema,_createrule,_updaterule,_deleterule,_listrule,_viewrule,_indexes,_options) {var _col,_res;if (_B._showlog) {console.log("SDUIPocketBase.CREATE_COLLECTION2(" + _nameof + ")");}try {_col={};_col["name"]=_nameof;_col["type"]=_typeof;_col["createRule"]=_createrule;_col["updateRule"]=_updaterule;_col["deleteRule"]=_deleterule;_col["listRule"]=_listrule;_col["viewRule"]=_viewrule;_col["schema"]=_colschema;_col["indexes"]=_indexes;_col["options"]=_options;_res=await _B._client["collections"]["create"](_col);return _res;} catch(err) {return null;}};_B.create_collection_original=async function(_col) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.CREATE_COLLECTION_ORIGINAL");}try {_res=await _B._client["collections"]["create"](_col);return _res;} catch(err) {return null;}};_B.update_collection=async function(_colname,_colschema) {var _col,_res;if (_B._showlog) {console.log("SDUIPocketBase.UPDATE_COLLECTION(" + _colname + ")");}try {_col={};_col["schema"]=_colschema;_res=await _B._client["collections"]["update"](_colname,_col);return _res;} catch(err) {return null;}};_B.update_collection_original=async function(_col) {var _colname,_nc,_res;if (_B._showlog) {console.log("SDUIPocketBase.UPDATE_COLLECTION()");}try {_colname=_col["name"];_nc={};_nc["name"]=_colname;_nc["schema"]=_col["schema"];_nc["type"]=_col["type"];_nc["system"]=_col["system"];_nc["listRule"]=_col["listRule"];_nc["viewRule"]=_col["viewRule"];_nc["createRule"]=_col["createRule"];_nc["updateRule"]=_col["updateRule"];_nc["deleteRule"]=_col["deleteRule"];_nc["indexes"]=_col["indexes"];_nc["options"]=_col["options"];_res=await _B._client["collections"]["update"](_colname,_nc);return _res;} catch(err) {return null;}};_B.update_collection1=async function(_nameof,_colschema,_createrule,_updaterule,_deleterule,_listrule,_viewrule) {var _col,_res;if (_B._showlog) {console.log("SDUIPocketBase.UPDATE_COLLECTION1(" + _nameof + ")");}try {_col={};_col["name"]=_nameof;_col["type"]="base";_col["createRule"]=_createrule;_col["updateRule"]=_updaterule;_col["deleteRule"]=_deleterule;_col["listRule"]=_listrule;_col["viewRule"]=_viewrule;_col["schema"]=_colschema;_res=await _B._client["collections"]["update"](_nameof,_col);return _res;} catch(err) {return null;}};_B.update_collection2=async function(_nameof,_typeof,_colschema,_createrule,_updaterule,_deleterule,_listrule,_viewrule,_indexes,_options) {var _col,_res;if (_B._showlog) {console.log("SDUIPocketBase.UPDATE_COLLECTION2(" + _nameof + ")");}try {_col={};_col["name"]=_nameof;_col["type"]=_typeof;_col["createRule"]=_createrule;_col["updateRule"]=_updaterule;_col["deleteRule"]=_deleterule;_col["listRule"]=_listrule;_col["viewRule"]=_viewrule;_col["schema"]=_colschema;_col["indexes"]=_indexes;_col["options"]=_options;_res=await _B._client["collections"]["update"](_col);return _res;} catch(err) {return null;}};_B.update_user=async function(_id,_profile) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.UPDATE_USER(" + _id + ", " + _profile + ")");}try {_res=await _B._client["collection"]("users")["update"](_id,_profile);return _res;} catch(err) {return null;}};_B.update_admin=async function(_id,_profile) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.UPDATE_ADMIN(" + _id + ", " + _profile + ")");}try {_res=await _B._client["admins"]["update"](_id,_profile);return _res;} catch(err) {return null;}};_B.delete_user=async function(_id) {var _r;if (_B._showlog) {console.log("SDUIPocketBase.DELETE_USER(" + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.DELETE_USER. Please execute SchemaAdd?? first to define your table schema!";return false;}try {_r=await _B._client["collection"]("users")["delete"](_id);return _r;} catch(err) {return false;}};_B.delete_admin=async function(_id) {var _r;if (_B._showlog) {console.log("SDUIPocketBase.DELETE_ADMIN(" + _id + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.DELETE_ADMIN. Please execute SchemaAdd?? first to define your table schema!";return false;}try {_r=await _B._client["admins"]["delete"](_id);return _r;} catch(err) {return false;}};_B.delete_collection=async function(_colname) {var _r;if (_B._showlog) {console.log("SDUIPocketBase.DELETE_COLLECTION(" + _colname + ")");}if (Object.keys(_B._schema).length==0) {throw "SDUIPocketBase.DELETE_COLLECTION. Please execute SchemaAdd?? first to define your table schema!";return false;}try {_r=await _B._client["collections"]["delete"](_colname);return _r;} catch(err) {return false;}};_B.user_request_verification=async function(_email) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.USER_REQUEST_VERIFICATION(" + _email + ")");}try {_res=await _B._client["collection"]("users")["requestVerification"](_email);return _res;} catch(err) {return null;}};_B.user_request_password_reset=async function(_email) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.USER_REQUEST_PASSWORD_RESET(" + _email + ")");}try {_res=await _B._client["collection"]("users")["requestPasswordReset"](_email);return _res;} catch(err) {return null;}};_B.user_request_email_change=async function(_email) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.USER_REQUEST_EMAIL_CHANGE(" + _email + ")");}try {_res=await _B._client["collection"]("users")["requestEmailChange"](_email);return _res;} catch(err) {return null;}};_B.user_confirm_email_change=async function(_token,_email) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.USER_CONFIRM_EMAIL_CHANGE(" + _email + ")");}try {_res=await _B._client["collection"]("users")["confirmEmailChange"](_token,_email);return _res;} catch(err) {return null;}};_B.user_confirm_verification=async function(_token) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.USER_CONFIRM_VERIFICATION");}try {_res=await _B._client["collection"]("users")["confirmVerification"](_token);return _res;} catch(err) {return null;}};_B.user_confirm_password_reset=async function(_token,_newpassword,_confimpassword) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.USER_CONFIRM_PASSWORD_RESET");}try {_res=await _B._client["collection"]("users")["confirmPasswordReset"](_token,_newpassword,_confimpassword);return _res;} catch(err) {return null;}};_B.user_auth_with_password=async function(_email,_pwd) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.USER_AUTH_WITH_PASSWORD(" + _email + ")");}_B._userprofile.initialize();_B._userprofile._size=0;_B._isauthenticated=false;try {_res=await _B._client["collection"]("users")["authWithPassword"](_email,_pwd);_B._userprofile._token=_res["token"]===undefined? "":_res["token"];if (("record" in _res)) {_B._userprofile._id=_banano_sithasodaisy_sduishared.getrecursive(_res,"record.id");_B._userprofile._email=_banano_sithasodaisy_sduishared.getrecursive(_res,"record.email");_B._userprofile._avatar=_banano_sithasodaisy_sduishared.getrecursive(_res,"record.avatar");_B._userprofile._name=_banano_sithasodaisy_sduishared.getrecursive(_res,"record.name");_B._userprofile._verified=_banano_sithasodaisy_sduishared.getrecursive(_res,"record.verified");_B._userprofile._username=_banano_sithasodaisy_sduishared.getrecursive(_res,"record.username");_B._userprofile._size=7;_B._isauthenticated=true;}return _res;} catch(err) {return null;}};_B.user_auth_refresh=async function() {var _res;if (_B._showlog) {console.log("SDUIPocketBase.USER_AUTH_REFRESH");}_B._userprofile.initialize();_B._userprofile._size=0;try {_res=await _B._client["collection"]("users")["authRefresh"]();console.log(_res);_B._userprofile._token=_res["token"]===undefined? "":_res["token"];if (("record" in _res)) {_B._userprofile._id=_banano_sithasodaisy_sduishared.getrecursive(_res,"record.id");_B._userprofile._email=_banano_sithasodaisy_sduishared.getrecursive(_res,"record.email");_B._userprofile._avatar=_banano_sithasodaisy_sduishared.getrecursive(_res,"record.avatar");_B._userprofile._name=_banano_sithasodaisy_sduishared.getrecursive(_res,"record.name");_B._userprofile._verified=_banano_sithasodaisy_sduishared.getrecursive(_res,"record.verified");_B._userprofile._username=_banano_sithasodaisy_sduishared.getrecursive(_res,"record.username");_B._userprofile._size=7;}return _res;} catch(err) {return null;}};_B.admin_auth_with_password=async function(_email,_pwd) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.ADMIN_AUTH_WITH_PASSWORD");}_B._userprofile.initialize();_B._userprofile._size=0;_B._isauthenticated=false;try {_res=await _B._client["admins"]["authWithPassword"](_email,_pwd);_B._userprofile._token=_res["token"]===undefined? "":_res["token"];if (("admin" in _res)) {_B._userprofile._id=_banano_sithasodaisy_sduishared.getrecursive(_res,"admin.id");_B._userprofile._email=_banano_sithasodaisy_sduishared.getrecursive(_res,"admin.email");_B._userprofile._avatar=_banano_sithasodaisy_sduishared.getrecursive(_res,"admin.avatar");_B._userprofile._name=_banano_sithasodaisy_sduishared.getrecursive(_res,"admin.name");_B._userprofile._verified=_banano_sithasodaisy_sduishared.getrecursive(_res,"admin.verified");_B._userprofile._username=_banano_sithasodaisy_sduishared.getrecursive(_res,"admin.username");_B._userprofile._size=7;_B._isauthenticated=true;}return _res;} catch(err) {return null;}};_B.admin_request_password_reset=async function(_email) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.ADMIN_REQUEST_PASSWORD_RESET");}try {_res=await _B._client["admins"]["requestPasswordReset"](_email);return _res;} catch(err) {return null;}};_B.admin_confirm_password_reset=async function(_token,_newpassword,_confimpassword) {var _res;if (_B._showlog) {console.log("SDUIPocketBase.ADMIN_CONFIRM_PASSWORD_RESET");}try {_res=await _B._client["admins"]["confirmPasswordReset"](_token,_newpassword,_confimpassword);return _res;} catch(err) {return null;}};_B.admin_auth_refresh=async function() {var _res;if (_B._showlog) {console.log("SDUIPocketBase.ADMIN_AUTH_REFRESH");}_B._userprofile.initialize();_B._userprofile._size=0;try {_res=await _B._client["admins"]["refresh"]();_B._userprofile._token=_res["token"]===undefined? "":_res["token"];if (("admin" in _res)) {_B._userprofile._id=_banano_sithasodaisy_sduishared.getrecursive(_res,"admin.id");_B._userprofile._email=_banano_sithasodaisy_sduishared.getrecursive(_res,"admin.email");_B._userprofile._avatar=_banano_sithasodaisy_sduishared.getrecursive(_res,"admin.avatar");_B._userprofile._name=_banano_sithasodaisy_sduishared.getrecursive(_res,"admin.name");_B._userprofile._verified=_banano_sithasodaisy_sduishared.getrecursive(_res,"admin.verified");_B._userprofile._username=_banano_sithasodaisy_sduishared.getrecursive(_res,"admin.username");_B._userprofile._size=7;}return _res;} catch(err) {return null;}};_B.user_signout=function() {if (_B._showlog) {console.log("SDUIPocketBase.USER_SIGNOUT");}_B._client["authStore"]["clear"]();_B._userprofile.initialize();_B._userprofile._size=0;};_B.user_token=function() {var _out;if (_B._showlog) {console.log("SDUIPocketBase.USER_TOKEN");}_out=_B._client["authStore"]["token"];return _out;};_B.user_isvalid=function() {var _out;if (_B._showlog) {console.log("SDUIPocketBase.USER_ISVALID");}_out=_B._client["authStore"]["isValid"];return _out;};_B.schematopocketbase=function() {var _nl,_k,_v;_nl=[];_nl.length=0;var _kKeys = Object.keys(_B._schema);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_B._schema[_k];switch ("" + _v) {case "" + _B._db_bool:_nl.push({"name":_k, "type":"bool"});break;case "" + _B._db_int:case "" + _B._db_real:case "" + _B._db_real:case "" + _B._db_float:case "" + _B._db_integer:case "" + _B._db_double:case "" + _B._db_number:_nl.push({"name":_k, "type":"number"});break;case "" + _B._db_file:case "" + _B._db_blob:_nl.push({"name":_k, "type":"file"});break;case "" + _B._db_string:case "" + _B._db_text:_nl.push({"name":_k, "type":"text"});break;case "" + _B._db_relation:_nl.push({"name":_k, "type":"relation"});break;case "" + _B._db_json:_nl.push({"name":_k, "type":"json"});break;case "" + _B._db_date:_nl.push({"name":_k, "type":"date"});break;default:_nl.push({"name":_k, "type":"text"});break;}}return _nl;};_B.schemarestorefromasset=async function(_sassetfile,_semail,_spassword) {var _collections,_bres;if (_B._showlog) {console.log("SDUIPocketBase.SchemaRestoreFromAsset");}_collections=await BANFetch('J', _sassetfile,'');_bres=await _B.schemarestore(_B._baseurl,_semail,_spassword,_collections,_B);return _bres;};_B.schemaaddfromasset=async function(_sassetfile,_semail,_spassword) {var _collections,_bres;if (_B._showlog) {console.log("SDUIPocketBase.SchemaAddFromAsset");}_collections=await BANFetch('J', _sassetfile,'');_bres=await _B.schemaadd(_B._baseurl,_semail,_spassword,_collections,_B);return _bres;};_B.schemarestore=async function(_surl,_semail,_spassword,_collections) {var _dbsource,_sprofile,_tblnames,_collection,_screaterule,_sdeleterule,_slistrule,_sname,_lschema,_supdaterule,_sviewrule,_stype,_options,_indexes,_tblindex;if (_B._showlog) {console.log("SDUIPocketBase.SchemaRestore");}_dbsource= new banano_sithasodaisypocketbase_sduipocketbase();_dbsource.initialize(_B,"sourceDB",_surl,"");await _dbsource.admin_auth_with_password(_semail,_spassword);_sprofile=_dbsource._userprofile;if (_sprofile._size==0) { return false;}_tblnames=await _dbsource.select_all_collections_names();for (var _collectionindex=0;_collectionindex<_collections.length;_collectionindex++) {_collection=_collections[_collectionindex];_screaterule=_collection["createRule"];_sdeleterule=_collection["deleteRule"];_slistrule=_collection["listRule"];_sname=_collection["name"];_lschema=_collection["schema"];_supdaterule=_collection["updateRule"];_sviewrule=_collection["viewRule"];_stype=_collection["type"];_options=_collection["options"];_indexes=_collection["indexes"];_tblindex=_tblnames.indexOf(_sname);if (_tblindex==-1) {await _dbsource.create_collection2(_sname,_stype,_lschema,_screaterule,_supdaterule,_sdeleterule,_slistrule,_sviewrule,_indexes,_options);} else {await _dbsource.update_collection2(_sname,_stype,_lschema,_screaterule,_supdaterule,_sdeleterule,_slistrule,_sviewrule,_indexes,_options);}}return true;};_B.schemaadd=async function(_surl,_semail,_spassword,_collections) {var _dbsource,_sprofile,_tblnames,_collection,_sname,_tblindex,_m;if (_B._showlog) {console.log("SDUIPocketBase.SchemaUpdate");}_B._operations.length=0;_dbsource= new banano_sithasodaisypocketbase_sduipocketbase();_dbsource.initialize(_B,"sourceDB",_surl,"");await _dbsource.admin_auth_with_password(_semail,_spassword);_sprofile=_dbsource._userprofile;if (_sprofile._size==0) { return false;}_tblnames=await _dbsource.select_all_collections_names();for (var _collectionindex=0;_collectionindex<_collections.length;_collectionindex++) {_collection=_collections[_collectionindex];_sname=_collection["name"];_tblindex=_tblnames.indexOf(_sname);if (_tblindex==-1) {_m=await _dbsource.create_collection_original(_collection);_B._operations.push(_m);}}return true;};_B.schemaupdate=async function(_surl,_semail,_spassword,_collections) {var _dbsource,_sprofile,_tblnames,_collection,_sname,_tblindex,_m;if (_B._showlog) {console.log("SDUIPocketBase.SchemaUpdate");}_B._operations.length=0;_dbsource= new banano_sithasodaisypocketbase_sduipocketbase();_dbsource.initialize(_B,"sourceDB",_surl,"");await _dbsource.admin_auth_with_password(_semail,_spassword);_sprofile=_dbsource._userprofile;if (_sprofile._size==0) { return false;}_tblnames=await _dbsource.select_all_collections_names();for (var _collectionindex=0;_collectionindex<_collections.length;_collectionindex++) {_collection=_collections[_collectionindex];_sname=_collection["name"];_tblindex=_tblnames.indexOf(_sname);if (_tblindex>=0) {_m=await _dbsource.update_collection_original(_collection);_B._operations.push(_m);}}return true;};_B.schemabackup=async function(_prjname,_surl,_semail,_spassword) {var _dbsource,_sprofile,_prjsearch,_prjtables,_rec,_tblname,_prjtablesjson,_prjfilename;if (_B._showlog) {console.log("SDUIPocketBase.SchemaBackUp");}_dbsource= new banano_sithasodaisypocketbase_sduipocketbase();_dbsource.initialize(_B,"sourceDB",_surl,"");await _dbsource.admin_auth_with_password(_semail,_spassword);_sprofile=_dbsource._userprofile;if (_sprofile._size==0) { return false;}_prjname=_prjname.split(" ").join("");_prjname=_prjname.toLowerCase();_prjsearch="" + _prjname + "_";await _dbsource.select_all_collections();_prjtables=[];_prjtables.length=0;while (_dbsource.nextrow()) {_rec=_dbsource._record;_tblname=_dbsource.getstring("name");if (_tblname.startsWith(_prjsearch)) {_prjtables.push(_rec);}}_prjtablesjson=JSON.stringify(_prjtables);_prjfilename="" + _prjname + "_schema.json";_banano_sithasodaisy_sduishared.download(_prjtablesjson,_prjfilename);return true;};_B.setrecordasis=function(_rec) {var _k,_v;_B._record={};var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_rec[_k];_B._record[_k]=_v;}_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];if (_B._showlog) {console.log("SDUIPocketBase.SetRecordAsIs(" + JSON.stringify(_B._record) + ")");}};_B.schemaget=async function(_prjname,_surl,_semail,_spassword) {var _prjtables,_dbsource,_sprofile,_prjsearch,_rec,_tblname;_prjtables=[];_prjtables.length=0;if (_B._showlog) {console.log("SDUIPocketBase.SchemaGet");}_dbsource= new banano_sithasodaisypocketbase_sduipocketbase();_dbsource.initialize(_B,"sourceDB",_surl,"");await _dbsource.admin_auth_with_password(_semail,_spassword);_sprofile=_dbsource._userprofile;if (_sprofile._size==0) { return _prjtables;}_prjname=_prjname.split(" ").join("");_prjname=_prjname.toLowerCase();_prjsearch="" + _prjname + "_";await _dbsource.select_all_collections();while (_dbsource.nextrow()) {_rec=_dbsource._record;_tblname=_dbsource.getstring("name");if (_tblname.startsWith(_prjsearch)) {_prjtables.push(_rec);}}return _prjtables;};}