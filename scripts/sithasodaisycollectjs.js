
/* sithasodaisycollectjs */
function banano_sithasodaisycollectjs_sduicollectjs() {var _B=this;_B._collect=null;_B._ne="!==";_B._gt=">";_B._lt="<";_B._ge=">=";_B._le="<=";_B._eq="==";_B._ni="ni";_B._bt="bt";_B._in="in";_B._nbt="nbt";_B._mcallback={};_B._wherefield={};_B._ops1=[];_B._orderbyl=[];_B._flds1=[];_B._result=[];_B._error="";_B._affectedrows=0;_B._record={};_B._ok=false;_B._rowcount=0;_B._lastposition=0;_B._displayfield="";_B._singular="";_B._plural="";_B._displayvalue="";_B._db_bool="BOOL";_B._db_int="INT";_B._db_string="STRING";_B._db_real="REAL";_B._db_blob="BLOB";_B._db_float="FLOAT";_B._db_integer="INTEGER";_B._db_text="TEXT";_B._db_double="DOUBLE";_B._db_date="DATE";_B._schema={};_B._stablename="";_B.initialize=function(_module,_lst) {_B._mcallback=_module;_B._collect=BANanoExec("collect", window, _lst);_B._wherefield={};_B._orderbyl.length=0;_B._flds1.length=0;_B._ops1.length=0;_B._result.length=0;return _B;};_B.initializejson=function(_module,_jsonstring) {var _lst;_B._mcallback=_module;_lst=JSON.parse(_jsonstring);_B._collect=BANanoExec("collect", window, _lst);_B._wherefield={};_B._orderbyl.length=0;_B._flds1.length=0;_B._ops1.length=0;_B._result.length=0;return _B;};_B.initializefromlocalstorage=function(_module,_key) {var _data,_lst;_B._mcallback=_module;_B._wherefield={};_B._orderbyl.length=0;_B._flds1.length=0;_B._ops1.length=0;_B._result.length=0;_data=localStorage.getItem(_key);_data=_banano_sithasodaisy_sduishared.cstr(_data);if (_data!="") {_lst=JSON.parse(_data);_B._collect=BANanoExec("collect", window, _lst);} else {_lst=[];_lst.length=0;_B._collect=BANanoExec("collect", window, _lst);}return _B;};_B.savetolocalstorage=function(_key) {var _data;_B._result=_B._collect["all"]();_data=JSON.stringify(_B._result);localStorage.setItem(_key,_data);};_B.reset=function() {_B._record={};_B._result.length=0;_B._error="";_B._affectedrows=0;_B._ok=false;_B._lastposition=-1;_B._rowcount=0;};_B.sortby=function(_fld) {_B._collect=_B._collect["sortBy"](_fld);return _B;};_B.order=function(_flds) {var _fld;for (var _fldindex=0;_fldindex<_flds.length;_fldindex++) {_fld=_flds[_fldindex];_B._collect=_B._collect["sortBy"](_fld);}return _B;};_B.orderdesc=function(_flds) {var _fld;for (var _fldindex=0;_fldindex<_flds.length;_fldindex++) {_fld=_flds[_fldindex];_B._collect=_B._collect["sortByDesc"](_fld);}return _B;};_B.skip=function(_num) {var _bo,_res;_bo=_B._collect["skip"](_num);_res=_bo["all"]();return _res;};_B.offset=function(_num) {var _bo,_res;_bo=_B._collect["skip"](_num);_res=_bo["all"]();return _res;};_B.skipuntil=function(_num) {_B._collect=_B._collect["skipUntil"](_num);return _B;};_B.skipwhile=function(_num) {_B._collect=_B._collect["skipWhile"](_num);return _B;};_B.slice=function(_num) {var _bo,_res;_bo=_B._collect["slice"](_num);_res=_bo["all"]();return _res;};_B.slice1=function(_num,_endat) {var _bo,_res;_bo=_B._collect["slice"](_num,_endat);_res=_bo["all"]();return _res;};_B.splice=function(_startat) {var _bo,_res;_bo=_B._collect["splice"](_startat);_res=_bo["all"]();return _res;};_B.take=function(_num) {var _bo,_res;_bo=_B._collect["take"](_num);_res=_bo["all"]();return _res;};_B.limit=function(_num) {return _B.take(_num,_B);};_B.takeuntil=function(_num) {_B._collect=_B._collect["takeUntil"](_num);return _B;};_B.split=function(_num) {var _bo,_res;_bo=_B._collect["split"](_num);_res=_bo["all"]();return _res;};_B.splice1=function(_startat,_numofitems) {_B._collect["splice"](_startat,_numofitems);return _B;};_B.splice2=function(_startat,_numofitems,_newitem) {_B._collect["splice"](_startat,_numofitems,_newitem);return _B;};_B.sortbydesc=function(_fld) {_B._collect=_B._collect["sortByDesc"](_fld);return _B;};_B.unique1=function() {var _res;_res=_B._collect["unique"]();return _res;};_B.unique=function(_prop) {_B._collect=_B._collect["unique"](_prop);return _B;};_B.last=function() {var _res;_res=_B._collect["last"]();return _res;};_B.last1=function(_methodname) {var _item,_cb,_res;_item={};_cb=function(_item) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_item,_B)};};_res=_B._collect["last"](_cb);return _res;};_B.sum=function(_fld) {var _res;_res=_B._collect["sum"](_fld);return _res;};_B.toarray=function() {var _res;_res=_B._collect["toArray"]();return _res;};_B.tojson=function() {var _res;_res=_B._collect["toJson"]();return _res;};_B.sortkeys=function() {_B._collect=_B._collect["sortKeys"]();return _B;};_B.sortdesc=function() {_B._collect=_B._collect["sortDesc"]();return _B;};_B.sortkeysdesc=function() {_B._collect=_B._collect["sortKeysDesc"]();return _B;};_B.all=function() {var _result1;_result1=_B._collect["all"]();return _result1;};_B.exec=function() {var _result1;_result1=_B._collect["all"]();return _result1;};_B.where=function(_fld,_operator,_value) {switch ("" + _operator) {case "" + _B._ni:_B._collect=_B._collect["whereNotIn"](_fld,_value);break;case "" + _B._nbt:_B._collect=_B._collect["whereNotBetween"](_fld,_value);break;case "" + _B._bt:_B._collect=_B._collect["whereBetween"](_fld,_value);break;case "" + _B._in:_B._collect=_B._collect["whereIn"](_fld,_value);break;default:_B._collect=_B._collect["where"](_fld,_operator,_value);break;}return _B;};_B.whereexec=function(_fld,_operator,_value) {var _bo,_res;_bo=null;_res=[];_res.length=0;switch ("" + _operator) {case "" + _B._ni:_bo=_B._collect["whereNotIn"](_fld,_value);break;case "" + _B._nbt:_bo=_B._collect["whereNotBetween"](_fld,_value);break;case "" + _B._bt:_bo=_B._collect["whereBetween"](_fld,_value);break;case "" + _B._in:_bo=_B._collect["whereIn"](_fld,_value);break;default:_bo=_B._collect["where"](_fld,_operator,_value);break;}_res=_bo["all"]();return _res;};_B.findwhereorderby=async function(_wheremap,_whereops,_orderby) {var _tmp,_these,_i,_iwhere,_col,_val,_opr,_fld,_res;if (Object.keys(_B._schema).length==0) {throw "SDUICollectJS.findWhereOrderBy. Please execute SchemaAdd?? first to define your table schema!";return null;}if (is.null(_whereops)) {_whereops=_B.eqoperators(_wheremap,_B);}_tmp=_B._collect["all"]();_these=BANanoExec("collect", window, _tmp);_i=0;_iwhere=Object.keys(_wheremap).length-1;for (_i=0;_i<=_iwhere;_i++) {_col=banano_getB4JKeyAt(_wheremap,_i);_val=banano_getB4JValueAt(_wheremap,_i);_opr=_whereops[_i];await _B.where(_col,_opr,_val,_B);switch ("" + _opr) {case "" + _B._ni:_these=_these["whereNotIn"](_col,_val);break;case "" + _B._nbt:_these=_these["whereNotBetween"](_col,_val);break;case "" + _B._bt:_these=_these["whereBetween"](_col,_val);break;case "" + _B._in:_these=_these["whereIn"](_col,_val);break;default:_these=_these["where"](_col,_opr,_val);break;}}if (is.null(_orderby)==false) {for (var _fldindex=0;_fldindex<_orderby.length;_fldindex++) {_fld=_orderby[_fldindex];_these=_these["sortBy"](_fld);}}_res=_these["all"]();return _res;};_B.selectwhere=async function(_flds,_wheremap,_whereops,_orderby) {var _tmp,_these,_i,_iwhere,_col,_val,_opr,_fld,_res,_fi;if (Object.keys(_B._schema).length==0) {throw "SDUICollectJS.selectWhere. Please execute SchemaAdd?? first to define your table schema!";return null;}if (is.null(_whereops)) {_whereops=_B.eqoperators(_wheremap,_B);}_tmp=_B._collect["all"]();_these=BANanoExec("collect", window, _tmp);_i=0;_iwhere=Object.keys(_wheremap).length-1;for (_i=0;_i<=_iwhere;_i++) {_col=banano_getB4JKeyAt(_wheremap,_i);_val=banano_getB4JValueAt(_wheremap,_i);_opr=_whereops[_i];await _B.where(_col,_opr,_val,_B);switch ("" + _opr) {case "" + _B._ni:_these=_these["whereNotIn"](_col,_val);break;case "" + _B._nbt:_these=_these["whereNotBetween"](_col,_val);break;case "" + _B._bt:_these=_these["whereBetween"](_col,_val);break;case "" + _B._in:_these=_these["whereIn"](_col,_val);break;default:_these=_these["where"](_col,_opr,_val);break;}}if (is.null(_orderby)==false) {for (var _fldindex=0;_fldindex<_orderby.length;_fldindex++) {_fld=_orderby[_fldindex];_these=_these["sortBy"](_fld);}}_res=[];_res.length=0;_fi=_flds[0];if (_fi=="*") {_res=_these["all"]();} else {_res=_B.only(_flds,_B);}return _res;};_B.select_where=function() {return _B.selectwhere(_B._flds1,_B._wherefield,_B._ops1,_B._orderbyl,_B);};_B.select_where1=function() {_B._result=_B.selectwhere(_B._flds1,_B._wherefield,_B._ops1,_B._orderbyl,_B);_B._lastposition=-1;_B._rowcount=_B._result.length;return _B._result;};_B.eqoperators=function(_sm) {var _nl,_k;_nl=[];_nl.length=0;var _kKeys = Object.keys(_sm);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_nl.push(_B._eq);}return _nl;};_B.forpage=function(_page,_offset1) {var _bo,_res;_bo=_B._collect["forPage"](_page,_offset1);_res=_bo["all"]();return _res;};_B.wherebetween=function(_fld,_range) {var _bo,_res;_bo=_B._collect["whereBetween"](_fld,_range);_res=_bo["all"]();return _res;};_B.wherein=function(_fld,_range) {var _bo,_res;_bo=_B._collect["whereIn"](_fld,_range);_res=_bo["all"]();return _res;};_B.wherenotbetween=function(_fld,_range) {var _bo,_res;_bo=_B._collect["whereNotBetween"](_fld,_range);_res=_bo["all"]();return _res;};_B.wherenotin=function(_fld,_range) {var _bo,_res;_bo=_B._collect["whereNotIn"](_fld,_range);_res=_bo["all"]();return _res;};_B.wherenotnull=function(_fld) {var _bo,_res;_bo=_B._collect["whereNotNull"](_fld);_res=_bo["all"]();return _res;};_B.wherenull=function(_fld) {var _bo,_res;_bo=_B._collect["whereNull"](_fld);_res=_bo["all"]();return _res;};_B.firstwhere=function(_fld,_value) {var _res;_res=_B._collect["firstWhere"](_fld,_value);return _res;};_B.findby=function(_fld,_value) {var _l;_l=_B._collect["firstWhere"](_fld,_value);return _l;};_B.find=function(_value) {var _m;_m=_B.findby("id",_value,_B);return _m;};_B.exists=function(_fld,_value) {var _res;_res=_B._collect["contains"](_fld,_value);return _res;};_B.avg=function(_fld) {var _iavg;_iavg=_B._collect["avg"](_fld);_iavg=parseFloat(_iavg);return _iavg;};_B.collapse=function() {_B._collect=_B._collect["collapse"]();return _B;};_B.combine=function(_nl) {_B._collect=_B._collect["combine"](_nl);return _B;};_B.chunk=function(_num) {var _chunks;_chunks=_B._collect["chunk"](_num);_chunks=_chunks["all"]();return _chunks;};_B.crossjoin=function(_objects) {_B._collect=_B._collect["crossJoin"](_objects);return _B;};_B.concat=function(_objects) {_B._collect=_B._collect["concat"](_objects);return _B;};_B.contains1=function(_fld) {var _res;_res=_B._collect["contains"](_fld);return _res;};_B.flatten=function() {_B._collect=_B._collect["flatten"]();return _B;};_B.flip=function() {_B._collect=_B._collect["flip"]();return _B;};_B.flatten1=function(_depth) {_B._collect=_B._collect["flatten"](_depth);return _B;};_B.contains2=function(_fld,_value) {var _res;_res=_B._collect["contains"](_fld,_value);return _res;};_B.count=function() {var _res;_res=_B._collect["count"]();return _res;};_B.countby=function() {var _res;_res=_B._collect["countBy"]();return _res;};_B.size=function() {return _B.count(_B);};_B.eachitem=function(_methodname) {var _item,_cb;_item={};_cb=function(_item) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_item,_B)};};_B._collect["each"](_cb);return _B;};_B.reduceitem=function(_methodname) {var _c,_i,_cb;_c={};_i={};_cb=function(_c,_i) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_c,_i,_B)};};_B._collect["reduce"](_cb);return _B;};_B.transform=function(_methodname,_params) {var _cb;_cb=function(_params) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_params,_B)};};_B._collect=_B._collect["transform"](_cb);return _B;};_B.takewhile=function(_methodname,_params) {var _cb;_cb=function(_params) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_params,_B)};};_B._collect=_B._collect["takeWhile"](_cb);return _B;};_B.tap=function(_methodname,_params) {var _cb;_cb=function(_params) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_params,_B)};};_B._collect=_B._collect["tap"](_cb);return _B;};_B.rejectitem=function(_methodname,_params) {var _cb;_cb=function(_params) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_params,_B)};};_B._collect=_B._collect["reject"](_cb);return _B;};_B.reject=function(_methodname) {var _item,_cb;_item={};_cb=function(_item) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_item,_B)};};_B._collect=_B._collect["reject"](_cb);return _B;};_B.mapitem=function(_methodname) {var _item,_cb;_item={};_cb=function(_item) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_item,_B)};};_B._collect=_B._collect["map"](_cb);return _B;};_B.filter=function(_methodname) {var _value,_cb,_res;_value={};_cb=function(_value) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_value,_B)};};_res=_B._collect["filter"](_cb);return _res;};_B.eachspread=function(_methodname,_params) {var _cb;_cb=function(_params) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_params,_B)};};_B._collect["eachSpread"](_cb);return _B;};_B.every=function(_methodname) {var _value,_key,_cb;_value={};_key={};_cb=function(_value,_key) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_value,_key,_B)};};_B._collect["every"](_cb);return _B;};_B.pipe=function(_methodname,_params) {var _cb,_res;_cb=function(_params) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_params,_B)};};_res=_B._collect["pipe"](_cb);return _res;};_B.first=function() {var _res;_res=_B._collect["first"]();return _res;};_B.first1=function(_methodname) {var _value,_cb,_res;_value={};_cb=function(_value) {if (typeof _B._mcallback[(_methodname).toLowerCase()]==="function") {return _B._mcallback[(_methodname).toLowerCase()](_value,_B)};};_res=_B._collect["first"](_cb);return _res;};_B.forget=function(_prop) {_B._collect=_B._collect["forget"](_prop);return _B;};_B.getvalueat=function(_pos) {var _res;_res=_B._collect["get"](_pos);return _res;};_B.get=function(_prop) {var _res;_res=_B._collect["get"](_prop);return _res;};_B.getdefault=function(_prop,_def) {var _res;_res=_B._collect["get"](_prop,_def);return _res;};_B.replaceitem=function(_item) {var _replaced,_res;_replaced=_B._collect["replace"](_item);_res=_replaced["all"]();return _res;};_B.replacerecursive=function(_item) {_B._collect["replaceRecursive"](_item);return _B;};_B.groupby=function(_fld) {_B._collect=_B._collect["groupBy"](_fld);return _B;};_B.has=function(_fld) {var _res;_res=_B._collect["has"](_fld);return _res;};_B.hasitems=function(_flds) {var _res;_res=_B._collect["has"](_flds);return _res;};_B.search=function(_value) {var _res;_res=_B._collect["search"](_value);if (is.number(_res)) {return _res;} else {return -1;}};_B.searchstrict=function(_value) {var _res;_res=_B._collect["search"](_value,true);if (is.number(_res)) {return _res;} else {return -1;}};_B.implode=function(_fld,_delim) {var _res;_res=_B._collect["implode"](_fld,_delim);return _res;};_B.pad=function(_num,_value) {_B._collect=_B._collect["pad"](_num,_value);return _B;};_B.keys=function() {var _res;_res=_B._collect["keys"]();return _res;};_B.values=function() {var _res;_res=_B._collect["values"]();return _res;};_B.maxofkey=function(_fld) {var _res;_res=_B._collect["max"](_fld);return _res;};_B.modeofkey=function(_fld) {var _res;_res=_B._collect["mode"](_fld);return _res;};_B.medianofkey=function(_fld) {var _res;_res=_B._collect["median"](_fld);return _res;};_B.merge=function(_lst) {_B._collect=_B._collect["merge"](_lst);return _B;};_B.selectcolumns=function(_lst) {var _items;_items=_B.only(_lst,_B);_B._collect=BANanoExec("collect", window, _items);return _B;};_B.mapcopykeys=function(_o,_keysof) {var _nm,_k,_v;_nm={};for (var _kindex=0;_kindex<_keysof.length;_kindex++) {_k=_keysof[_kindex];if ((_k in _o)) {_v=_o[_k];_nm[_k]=_v;}}return _nm;};_B.only=function(_lst) {var _res,_fi,_everything,_nl,_rec,_nr;_res=[];_res.length=0;if (_lst.length==0) {return _res;}_fi=_lst[0];if (_fi=="*") {_res=_B._collect["all"]();return _res;}_everything=_B._collect["all"]();_nl=[];_nl.length=0;for (var _recindex=0;_recindex<_everything.length;_recindex++) {_rec=_everything[_recindex];_nr=_B.mapcopykeys(_rec,_lst,_B);_nl.push(_nr);}return _nl;};_B.nth=function(_inth) {var _res;_res=_B._collect["nth"](_inth);return _res;};_B.mergerecursive=function(_lst) {_B._collect=_B._collect["mergeRecursive"](_lst);return _B;};_B.minofkey=function(_fld) {var _res;_res=_B._collect["min"](_fld);return _res;};_B.isempty=function() {var _res;_res=_B._collect["isEmpty"]();return _res;};_B.isnotempty=function() {var _res;_res=_B._collect["isNotEmpty"]();return _res;};_B.pluck=function(_fld) {_B._collect=_B._collect["pluck"](_fld);return _B;};_B.pop=function() {_B._collect["pop"]();return _B;};_B.random=function() {var _resx;_resx=_B._collect["random"]();return _resx;};_B.random1=function(_num) {var _rndx,_res;_rndx=_B._collect["random"](_num);_res=_rndx["all"]();return _res;};_B.sort=function() {_B._collect["sort"]();return _B;};_B.reverse=function() {_B._collect=_B._collect["reverse"]();return _B;};_B.shift=function() {_B._collect["shift"]();return _B;};_B.shuffle=function() {_B._collect=_B._collect["shuffle"]();return _B;};_B.prepend=function(_xitems) {_B._collect["prepend"](_xitems);return _B;};_B.readby=function(_key,_value) {var _mexist;_mexist=_B.firstwhere(_key,_value,_B);if (is.null(_mexist)) {return null;} else {return _mexist;}};_B.updateby=function(_key,_value,_nrecord) {var _mexist,_pos,_k,_v;_mexist=_B.firstwhere(_key,_value,_B);if (is.null(_mexist)) { return false;}_pos=_B.indexof1(_mexist,_B);var _kKeys = Object.keys(_nrecord);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_nrecord[_k];_mexist[_k]=_v;}_B.set(_pos,_mexist,_B);return true;};_B.deleteby=function(_key,_value) {var _mexist,_pos;_mexist=_B.readby(_key,_value,_B);if (is.null(_mexist)) { return false;}_pos=_B.indexof1(_mexist,_B);_B.removeat(_pos,_B);return true;};_B.indexof1=function(_item) {var _pos;_pos=_B.search(_item,_B);if (_pos==false) { return -1;}return _pos;};_B.add=function(_xitem) {_B.push(_xitem,_B);return _B;};_B.set=function(_pos,_xitem) {_B.splice2(_pos,1,_xitem,_B);return _B;};_B.removeat=function(_pos) {_B.splice1(_pos,1,_B);return _B;};_B.push=function(_xitem) {_B._collect["push"](_xitem);return _B;};_B.put=function(_k,_v) {_B._collect["put"](_k,_v);return _B;};_B.pull=function(_prop) {_B._collect["pull"](_prop);return _B;};_B.diff=function(_flds) {var _diffs,_res;_diffs=_B._collect["diff"](_flds);_res=_diffs["all"]();return _res;};_B.diffassoc=function(_flds) {var _diffs,_res;_diffs=_B._collect["diffAssoc"](_flds);_res=_diffs["all"]();return _res;};_B.diffkeys=function(_flds) {var _diffs,_res;_diffs=_B._collect["diffKeys"](_flds);_res=_diffs["all"]();return _res;};_B.duplicates=function() {var _diffs,_res;_diffs=_B._collect["duplicates"]();_res=_diffs["all"]();return _res;};_B.except=function(_flds) {_B._collect=_B._collect["except"](_flds);return _B;};_B.intersect=function(_flds) {_B._collect=_B._collect["intersect"](_flds);return _B;};_B.join=function(_flds) {_B._collect=_B._collect["join"](_flds);return _B;};_B.keyby=function(_skeyby) {_B._collect=_B._collect["keyBy"](_skeyby);return _B;};_B.intersectbykeys=function(_flds) {_B._collect=_B._collect["intersectByKeys"](_flds);return _B;};_B.union=function(_flds) {_B._collect=_B._collect["union"](_flds);return _B;};_B.unwrap=function(_flds) {_B._collect=_B._collect["unwrap"](_flds);return _B;};_B.wrap=function(_flds) {_B._collect=_B._collect["wrap"](_flds);return _B;};_B.zip=function(_flds) {_B._collect=_B._collect["zip"](_flds);return _B;};_B.clear=function() {_B._collect=null;};_B.clear_where=function() {_B._wherefield={};_B._ops1.length=0;_B._orderbyl.length=0;_B._flds1.length=0;_B._result.length=0;};_B.add_where=function(_fld,_operator,_value) {switch ("" + _operator) {case "" + "<>":_operator="!==";break;}_B._wherefield[_fld]=_value;_B._ops1.push(_operator);return _B;};_B.add_order_by=function(_fld) {_B._orderbyl.push(_fld);return _B;};_B.add_field=function(_fld) {_B._flds1.push(_fld);return _B;};_B.add_fields=function(_fields) {var _fld;for (var _fldindex=0;_fldindex<_fields.length;_fldindex++) {_fld=_fields[_fldindex];_B.add_field(_fld,_B);}return _B;};_B.settablename=function(_s) {_B._stablename=_s;};_B.schemaaddblob=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_blob;}return _B;};_B.schemaaddblob1=function(_b) {_B._schema[_b]=_B._db_blob;return _B;};_B.schemaaddboolean=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_bool;}return _B;};_B.schemaaddboolean1=function(_b) {_B._schema[_b]=_B._db_bool;return _B;};_B.schemaadddouble1=function(_b) {_B._schema[_b]=_B._db_double;return _B;};_B.schemaadddouble=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_double;}return _B;};_B.schemaaddfloat1=function(_b) {_B._schema[_b]=_B._db_float;return _B;};_B.schemaaddfloat=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_float;}return _B;};_B.schemaaddtext1=function(_b) {_B._schema[_b]=_B._db_string;return _B;};_B.schemaaddtext=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_string;}return _B;};_B.schemaaddint1=function(_b) {_B._schema[_b]=_B._db_int;return _B;};_B.schemaaddint=function(_bools) {var _b;for (var _bindex=0;_bindex<_bools.length;_bindex++) {_b=_bools[_bindex];_B._schema[_b]=_B._db_int;}return _B;};_B.select_all=function() {if (Object.keys(_B._schema).length==0) {throw "SDUICollectJS.SELECT_ALL. Please execute SchemaAdd?? first to define your table schema!";return null;}_B._lastposition=-1;_B.order(_B._orderbyl,_B);_B._result=_B.all(_B);_B._rowcount=_B._result.length;return _B._result;};_B.create=function() {var _k;if (Object.keys(_B._schema).length==0) {throw "SDUICollectJS.CREATE. Please execute SchemaAdd?? first to define your table schema!";return null;}try {_B.push(_B._record,_B);_k=_B._record["id"];return _k;} catch(err) {return "";}};_B.update=function() {var _id,_res,_found,_k;if (Object.keys(_B._schema).length==0) {throw "SDUICollectJS.UPDATE. Please execute SchemaAdd?? first to define your table schema!";return null;}try {_id=_B._record["id"];_res=_B._collect["firstWhere"]("id",_id);_found=_B._collect["search"](_res);if (is.number(_found)) {_B._collect["splice"](_found,1,_B._record);_k=_B._record["id"];return _k;} else {return "";}} catch(err) {return "";}};_B.read=function(_id) {var _m,_bo,_lst;if (Object.keys(_B._schema).length==0) {throw "SDUICollectJS.READ. Please execute SchemaAdd?? first to define your table schema!";return null;}_m={};try {_bo=_B._collect["where"]("id",_B._eq,_id);_lst=_bo["all"]();if (_lst.length>=1) {_m=_lst[0];}_B._record=_m;return _m;} catch(err) {_B._record=_m;return _m;}};_B.containskey=async function(_id) {var _res;if (Object.keys(_B._schema).length==0) {throw "SDUICollectJS.ContainsKey. Please execute SchemaAdd?? first to define your table schema!";return "";}_B.clear_where(_B);_B.add_where("id","=","'" + _id + "'",_B);_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.containsfield=async function(_fldname,_id) {var _res;if (Object.keys(_B._schema).length==0) {throw "SDUICollectJS.ContainsField. Please execute SchemaAdd?? first to define your table schema!";return "";}_B.clear_where(_B);_B.add_where(_fldname,"=",_id,_B);_res=await _B.select_where(_B);if (_res.length==0) {return false;} else {return true;}};_B.listkeys=function() {var _bo,_lst;if (Object.keys(_B._schema).length==0) {throw "SDUICollectJS.ListKeys. Please execute SchemaAdd?? first to define your table schema!";return null;}_bo=_B._collect["pluck"]("id");_lst=_bo["all"]();return _lst;};_B.delete_all=function() {_B._result.length=0;_B._collect=BANanoExec("collect", window, _B._result);};_B.getkeyvalues=async function(_bhasnothing,_k,_v) {var _mx,_row,_f1,_f2;_mx={};if (_bhasnothing) {_mx[""]="-- Nothing Selected --";}_B.clear_where(_B);_B.add_field(_k,_B);_B.add_field(_v,_B);_B.add_order_by(_v,_B);_B._result=await _B.select_where(_B);for (var _rowindex=0;_rowindex<_B._result.length;_rowindex++) {_row=_B._result[_rowindex];_f1=_row[_k];_f2=_row[_v];_mx[_f1]=_f2;}return _mx;};_B.getkeyvaluesfromlist=function(_source,_bhasnothing,_k,_v) {var _mx,_row,_f1,_f2;_mx={};if (_bhasnothing) {_mx[""]="-- Nothing Selected --";}for (var _rowindex=0;_rowindex<_source.length;_rowindex++) {_row=_source[_rowindex];_f1=_row[_k];_f2=_row[_v];_mx[_f1]=_f2;}return _mx;};_B.delete=function(_id) {var _res,_found;if (Object.keys(_B._schema).length==0) {throw "SDUICollectJS.DELETE. Please execute SchemaAdd?? first to define your table schema!";return false;}try {_res=_B._collect["firstWhere"]("id",_id);_found=_B._collect["search"](_res);if (is.number(_found)) {_B._collect["splice"](_found,1);return true;} else {return false;}} catch(err) {return false;}};_B.setfield=function(_fldname,_fldvalue) {_B._record[_fldname]=_fldvalue;return _B;};_B.recordfrommap=function(_sm) {var _k,_v;_B._record={};var _kKeys = Object.keys(_sm);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_sm[_k];_B._record[_k]=_v;}};_B.firstrecord=function() {var _rec;_rec=_B._result[0];return _rec;};_B.nextrow=function() {var _realsize;_B._lastposition=_B._lastposition+1;_realsize=_B._rowcount-1;if (_B._lastposition>_realsize) {return false;} else {_B.setposition(_B._lastposition,_B);return true;}};_B.setrecord=function(_rec) {var _k,_fldpos,_v,_dt;_B._record={};var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_fldpos=(_k in _B._schema);if (_fldpos==false) {delete _rec[_k];}}var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_rec[_k]===undefined? "":_rec[_k];_dt=_B._schema[_k];switch ("" + _dt) {case "" + _B._db_bool:_v=_banano_sithasodaisy_sduishared.cbool(_v);break;case "" + _B._db_int:_v=_banano_sithasodaisy_sduishared.cint(_v);break;case "" + _B._db_string:_v=_banano_sithasodaisy_sduishared.cstr(_v);break;case "" + _B._db_real:_v=_banano_sithasodaisy_sduishared.cdbl(_v);break;case "" + _B._db_blob:break;case "" + _B._db_float:_v=_banano_sithasodaisy_sduishared.cdbl(_v);break;case "" + _B._db_integer:_v=_banano_sithasodaisy_sduishared.cint(_v);break;case "" + _B._db_text:_v=_banano_sithasodaisy_sduishared.cstr(_v);break;case "" + _B._db_double:_v=_banano_sithasodaisy_sduishared.cdbl(_v);break;}_B._record[_k]=_v;}_B._displayvalue=_B._record[_B._displayfield]===undefined? "":_B._record[_B._displayfield];};_B.preparerecord=function() {_B._record={};};_B.setposition=function(_pos) {if (_B._result.length>_pos) {_B._record=_B._result[_pos];_B._lastposition=_pos;} else {_B._lastposition=-1;_B._record={};}};_B.getposition=function() {return _B._lastposition;};_B.getint=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return 0;}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? 0:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cint(_obj);return _obj;} else {return 0;}};_B.getlong=function(_fld) {return _B.getint(_fld,_B);};_B.getstring=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return "";}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? "":_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cstr(_obj);return _obj;} else {return "";}};_B.getimage=function(_fld) {var _simage;_simage=_B.getstring(_fld,_B);if (_simage=="") { return "./assets/placeholderimg.jpg";}return _simage;};_B.getboolean=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return false;}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? false:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.parsebool(_obj);return _obj;} else {return false;}};_B.getdouble=function(_fld) {var _obj;_fld=_fld.toLowerCase();if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? 0:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cdbl(_obj);return _obj;} else {return 0;}};_B.getrecord=function(_pos) {var _rec;_rec=_B._result[_pos];return _rec;};_B.movestart=function() {_B._lastposition=-1;};_B.movefirst=function() {_B.setposition(0,_B);};_B.movelast=function() {_B.setposition(_B._rowcount-1,_B);};_B.moveprevious=function() {_B._lastposition=_B._lastposition-1;if (_B._lastposition<0) {_B._lastposition=0;}_B.setposition(_B._lastposition,_B);};_B.movenext=function() {_B._lastposition=_B._lastposition+1;if (_B._lastposition>_B._rowcount) {_B._lastposition=_B._rowcount-1;}_B.setposition(_B._lastposition,_B);};_B.findwhere=async function(_wheremap,_whereops) {var _so,_res;_so=[];_so.length=0;_res=await _B.findwhereorderby(_wheremap,_whereops,_so,_B);return _res;};_B.delete_by=function(_fldname,_fldvalue) {_B.clear_where(_B);_B.add_where(_fldname,"=",_fldvalue,_B);_B.deletewhere("id",_B._wherefield,_B._ops1,_B);};_B.deletewhere=async function(_prikey,_wheremap,_whereops) {var _recs,_rec,_pvalue;if (Object.keys(_B._schema).length==0) {throw "SDUICollectJS.deleteWhere. Please execute SchemaAdd?? first to define your table schema!";return null;}_recs=await _B.findwhere(_wheremap,_whereops,_B);for (var _recindex=0;_recindex<_recs.length;_recindex++) {_rec=_recs[_recindex];_pvalue=_rec[_prikey];await _B.delete(_pvalue,_B);}return true;};_B.delete_where=function() {_B.deletewhere("id",_B._wherefield,_B._ops1,_B);};_B.nextid=function() {var _nix;_nix=_banano_sithasodaisy_sduishared.guidalpha(15);return _nix;};}