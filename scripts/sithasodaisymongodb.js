
/* sithasodaisymongodb */
function banano_sithasodaisymongodb_sduimongodb() {var _B=this;_B._tablename="";_B._result=[];_B._dbase="";_B._filterl={};_B._orderbyl={};_B._flds={};_B._rowcount=0;_B._host="";_B._port=0;_B._record={};_B._primarykey="";_B._auto="";_B._eq_op="$eq";_B._ne_op="$ne";_B._gt_op="$gt";_B._lt_op="$lt";_B._gte_op="$gte";_B._lte_op="$lte";_B._in_op="$in";_B._nin_op="$nin";_B._lastposition=0;_B._idxl={};_B._xskip=0;_B._xlimit=0;_B._schema={};_B._db_string="TEXT";_B._db_int="INT";_B._db_float="FLOAT";_B._db_double="DOUBLE";_B._db_blob="BLOB";_B._db_bool="BOOL";_B._db_real="REAL";_B._db_date="DATE";_B._db_integer="INTEGER";_B._db_text="TEXT";_B.initialize=function(_shost,_iport,_dbname,_tblname) {var _BANp = gBANp(arguments);_B._dbase=_dbname;_B._tablename=_tblname;_B._result.length=0;_B._orderbyl={};_B._filterl={};_B._flds={};_B.clearwhere(_BANp,_B);_B._host=_shost;_B._port=_iport;_B._lastposition=0;_B._rowcount=0;_B._idxl={};_B._xskip=0;_B._xlimit=0;_B._schema={};_B._primarykey="_id";return _B;};_B.clear_where=function() {_B.clearwhere(_B);return _B;};_B.add_field=function(_fld) {_B.addfield(_fld,true,_B);return _B;};_B.add_fields=function(_fields) {var _fld;for (var _fldindex=0;_fldindex<_fields.length;_fldindex++) {_fld=_fields[_fldindex];_B.add_field(_fld,_B);}return _B;};_B.add_where=function(_fld,_operator,_value) {switch ("" + _operator) {case "" + "=":_operator=_B._eq_op;break;case "" + "<>":_operator=_B._ne_op;break;case "" + ">":_operator=_B._gt_op;break;case "" + "<":_operator=_B._lt_op;break;case "" + ">=":_operator=_B._gte_op;break;case "" + "<=":_operator=_B._lte_op;break;case "" + "in":_operator=_B._in_op;break;case "" + "notin":_operator=_B._nin_op;break;}_B.addwhere(_fld,_operator,_value,_B);return _B;};_B.add_order_by=function(_fld) {_B.addsort(_fld,false,_B);return _B;};_B.reset=function() {_B._record={};_B._result.length=0;_B._lastposition=0;_B._rowcount=0;_B._schema={};};_B.getid=function() {return _B.getstring("_id",_B);};_B.setid=function(_id) {_B._record["_id"]=_id;};_B.preparerecord=function() {_B._record={};return _B;};_B.setrecord=function(_rec) {var _BANp = gBANp(arguments);var _k,_v;var _kKeys = Object.keys(_rec);for (var _kindex=0;_kindex<_kKeys.length;_kindex++) {_k=_kKeys[_kindex];_v=_rec[_k];_B.setfield(_k,_v,_BANp,_B);}return _B;};_B.setfield=function(_fld,_value) {var _BANp = gBANp(arguments);_B._record[_fld]=_value;};_B.setlimit=function(_l) {_B._xlimit=_l;return _B;};_B.setskip=function(_l) {_B._xskip=_l;return _B;};_B.movefirst=function() {_B.setposition(0,_B);};_B.movelast=function() {_B.setposition(_B._rowcount-1,_B);};_B.moveprevious=function() {_B._lastposition=_B._lastposition-1;if (_B._lastposition<0) {_B._lastposition=0;}_B.setposition(_B._lastposition,_B);};_B.movenext=function() {_B._lastposition=_B._lastposition+1;if (_B._lastposition>_B._rowcount) {_B._lastposition=_B._rowcount-1;}_B.setposition(_B._lastposition,_B);};_B.clearwhere=function() {var _BANp = gBANp(arguments);_B._filterl={};_B._orderbyl={};_B._flds={};_B._idxl={};return _B;};_B.addfield=function(_fld,_visible) {var _i;if (_fld=="_id") { return _B;}_i=0;if (_visible) {_i=1;}_B._flds[_fld]=_i;return _B;};_B.addsort=function(_fld,_desc) {if (_fld=="_id") { return _B;}if (_desc==false) {_B._orderbyl[_fld]=1;} else {_B._orderbyl[_fld]=-1;}return _B;};_B.addwhere=function(_fld,_operator,_value) {var _BANp = gBANp(arguments);var _qry;switch ("" + _operator) {case "" + "=":_operator=_B._eq_op;break;case "" + "<>":_operator=_B._ne_op;break;case "" + ">":_operator=_B._gt_op;break;case "" + "<":_operator=_B._lt_op;break;case "" + ">=":_operator=_B._gte_op;break;case "" + "<=":_operator=_B._lte_op;break;case "" + "in":_operator=_B._in_op;break;case "" + "notin":_operator=_B._nin_op;break;}if (_fld=="_id") { return _B;}_qry={};_qry[_operator]=_value;_B._filterl[_fld]=_qry;return _B;};_B.updatewait=async function() {var _BANp = gBANp(arguments);var _command,_fjson,_options,_optjson,_mdb;_command="update";if (Object.keys(_B._filterl).length>0) {_command="updatewhere";}_fjson=JSON.stringify(_B._record);_options=_B.buildoptions(_command,_BANp,_B);_optjson=JSON.stringify(_options);_mdb={};_mdb["record"]=_fjson;_mdb["options"]=_optjson;_B._rowcount=await callAjaxWait('https://localhost/sithasodaisydemo/sithasodaisydemo.php','POST','json', JSON.stringify({"request": "MongoDynamic", "params": _mdb}),false,null);return _B._rowcount;};_B.deletewait=async function(_id) {var _BANp = gBANp(arguments);var _rec,_fjson,_options,_optjson,_mdb;_rec={};_rec["_id"]=_id;_fjson=JSON.stringify(_rec);_options=_B.buildoptions("delete",_BANp,_B);_optjson=JSON.stringify(_options);_mdb={};_mdb["record"]=_fjson;_mdb["options"]=_optjson;_B._rowcount=await callAjaxWait('https://localhost/sithasodaisydemo/sithasodaisydemo.php','POST','json', JSON.stringify({"request": "MongoDynamic", "params": _mdb}),false,null);return _B._rowcount;};_B.deletewherewait=async function() {var _options,_optjson,_mdb;_options=_B.buildoptions("deletewhere",_B);_optjson=JSON.stringify(_options);_mdb={};_mdb["record"]="";_mdb["options"]=_optjson;_B._rowcount=await callAjaxWait('https://localhost/sithasodaisydemo/sithasodaisydemo.php','POST','json', JSON.stringify({"request": "MongoDynamic", "params": _mdb}),false,null);return _B._rowcount;};_B.deleteallwait=async function() {var _options,_optjson,_mdb;_options=_B.buildoptions("deleteall",_B);_optjson=JSON.stringify(_options);_mdb={};_mdb["record"]="";_mdb["options"]=_optjson;_B._rowcount=await callAjaxWait('https://localhost/sithasodaisydemo/sithasodaisydemo.php','POST','json', JSON.stringify({"request": "MongoDynamic", "params": _mdb}),false,null);return _B._rowcount;};_B.readwait=async function(_id) {var _BANp = gBANp(arguments);var _rec,_fjson,_options,_optjson,_mdb,_jsondata;_rec={};_rec["_id"]=_id;_fjson=JSON.stringify(_rec);_options=_B.buildoptions("read",_BANp,_B);_optjson=JSON.stringify(_options);_mdb={};_mdb["record"]=_fjson;_mdb["options"]=_optjson;_jsondata=await callAjaxWait('https://localhost/sithasodaisydemo/sithasodaisydemo.php','POST','json', JSON.stringify({"request": "MongoDynamic", "params": _mdb}),false,null);_B._result=JSON.parse(_jsondata);_B._rowcount=_B._result.length;_B.setposition(0,_BANp,_B);return _B._record;};_B.insertwait=async function() {var _BANp = gBANp(arguments);var _fjson,_options,_optjson,_mdb;_fjson=JSON.stringify(_B._record);_options=_B.buildoptions("insert",_BANp,_B);_optjson=JSON.stringify(_options);_mdb={};_mdb["record"]=_fjson;_mdb["options"]=_optjson;_B._rowcount=await callAjaxWait('https://localhost/sithasodaisydemo/sithasodaisydemo.php','POST','json', JSON.stringify({"request": "MongoDynamic", "params": _mdb}),false,null);return _B._rowcount;};_B.select_where=function() {return _B.selectwait(_B);};_B.selectwait=async function() {var _BANp = gBANp(arguments);var _options,_optjson,_mdb,_jsondata;_options=_B.buildoptions("select",_BANp,_B);_optjson=JSON.stringify(_options);_mdb={};_mdb["record"]="";_mdb["options"]=_optjson;_jsondata=await callAjaxWait('https://localhost/sithasodaisydemo/sithasodaisydemo.php','POST','json', JSON.stringify({"request": "MongoDynamic", "params": _mdb}),false,null);_B._result=JSON.parse(_jsondata);_B._rowcount=_B._result.length;return _B._result;};_B.buildoptions=function(_command) {var _BANp = gBANp(arguments);var _opt;_opt={};_opt["host"]=_B._host;_opt["port"]=_B._port;_opt["dbname"]=_B._dbase;_opt["tblname"]=_B._tablename;_opt["command"]=_command;_opt["fields"]=_B._flds;_opt["order"]=_B._orderbyl;_opt["where"]=_B._filterl;_opt["indexes"]=_B._idxl;_opt["skip"]=_B._xskip;_opt["limit"]=_B._xlimit;return _opt;};_B.setposition=function(_pos) {var _BANp = gBANp(arguments);if (_B._result.length>_pos) {_B._record=_B._result[_pos];_B._lastposition=_pos;} else {_B._lastposition=-1;_B._record={};}};_B.getposition=function() {return _B._lastposition;};_B.getint=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return 0;}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? 0:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cint(_obj);return _obj;} else {return 0;}};_B.getlong=function(_fld) {return _B.getint(_fld,_B);};_B.getstring=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return "";}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? "":_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cstr(_obj);return _obj;} else {return "";}};_B.getboolean=function(_fld) {var _obj;_fld=_fld.toLowerCase();if (is.undefined(_B._record)) { return false;}if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? false:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.parsebool(_obj);return _obj;} else {return false;}};_B.getdouble=function(_fld) {var _obj;_fld=_fld.toLowerCase();if ((_fld in _B._record)) {_obj=_B._record[_fld]===undefined? 0:_B._record[_fld];_obj=_banano_sithasodaisy_sduishared.cdbl(_obj);return _obj;} else {return 0;}};_B.schemaaddint1=function(_b) {_B._schema[_b]=_B._db_int;return _B;};_B.schemaaddtext1=function(_b) {_B._schema[_b]=_B._db_string;return _B;};_B.schemaaddfloat1=function(_b) {_B._schema[_b]=_B._db_float;return _B;};_B.schemaadddouble1=function(_b) {_B._schema[_b]=_B._db_double;return _B;};_B.schemaaddblob1=function(_b) {_B._schema[_b]=_B._db_blob;return _B;};}